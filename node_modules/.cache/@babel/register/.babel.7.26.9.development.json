{"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[],\"presets\":[]}:7.26.9:development":{"value":{"code":"import express from 'express';\nimport cors from 'cors';\nimport helmet from 'helmet';\nimport bodyParser from 'body-parser';\nimport { getConsoleOutput } from '@jest/console';\nimport config from './config';\nimport log from './logger';\nimport headerParser from './utils/headerParser';\nimport getAuthHelperInstance from './auth/authHelper';\n;\n// import anagineRouter from './anagine';\nimport CodedError from './utils/error';\nconst app = express();\napp.use(cors());\napp.use(helmet());\napp.use(bodyParser.json({\n  limit: '50mb'\n}));\nconst startServer = async () => {\n  const anagineRouter = async (req, res) => {\n    console.log('Hello World');\n    console.log(new Date().toLocaleString('en-US', {\n      dateStyle: 'full',\n      timeStyle: 'long',\n      timeZone: 'UTC'\n    }));\n    res.send({\n      text: \"Hello World\",\n      time: new Date().toLocaleString('en-US', {\n        dateStyle: 'full',\n        timeStyle: 'long',\n        timeZone: 'UTC'\n      })\n    });\n    return 0;\n  };\n  app.get('/anagine', anagineRouter, (req, res, err, next) => {\n    if (err instanceof CodedError) {\n      // deepcode ignore ServerLeak: no important information exists in error\n      res.status(err.code).send(err.msg);\n    } else {\n      // deepcode ignore ServerLeak: no important information exists in error\n      res.status(500).send(err);\n    }\n  });\n\n  // eslint-disable-next-line no-unused-vars\n  // app.get('/_version', versionRouter);\n\n  app.listen(config.port, () => {\n    log.info(`[Server] anagine listening on port ${config.port}!`);\n  });\n};\nstartServer();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwiY29ycyIsImhlbG1ldCIsImJvZHlQYXJzZXIiLCJnZXRDb25zb2xlT3V0cHV0IiwiY29uZmlnIiwibG9nIiwiaGVhZGVyUGFyc2VyIiwiZ2V0QXV0aEhlbHBlckluc3RhbmNlIiwiQ29kZWRFcnJvciIsImFwcCIsInVzZSIsImpzb24iLCJsaW1pdCIsInN0YXJ0U2VydmVyIiwiYW5hZ2luZVJvdXRlciIsInJlcSIsInJlcyIsImNvbnNvbGUiLCJEYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJkYXRlU3R5bGUiLCJ0aW1lU3R5bGUiLCJ0aW1lWm9uZSIsInNlbmQiLCJ0ZXh0IiwidGltZSIsImdldCIsImVyciIsIm5leHQiLCJzdGF0dXMiLCJjb2RlIiwibXNnIiwibGlzdGVuIiwicG9ydCIsImluZm8iXSwic291cmNlUm9vdCI6Ii9ob21lL2V4b3VzZXIvRG9jdW1lbnRzL1Byb2plY3RzL2FuYWdpbmUvc3JjL3NlcnZlci8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IGhlbG1ldCBmcm9tICdoZWxtZXQnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IHsgZ2V0Q29uc29sZU91dHB1dCB9IGZyb20gJ0BqZXN0L2NvbnNvbGUnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgbG9nIGZyb20gJy4vbG9nZ2VyJztcbmltcG9ydCBoZWFkZXJQYXJzZXIgZnJvbSAnLi91dGlscy9oZWFkZXJQYXJzZXInO1xuaW1wb3J0IGdldEF1dGhIZWxwZXJJbnN0YW5jZSBmcm9tICcuL2F1dGgvYXV0aEhlbHBlcic7O1xuLy8gaW1wb3J0IGFuYWdpbmVSb3V0ZXIgZnJvbSAnLi9hbmFnaW5lJztcbmltcG9ydCBDb2RlZEVycm9yIGZyb20gJy4vdXRpbHMvZXJyb3InO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5hcHAudXNlKGNvcnMoKSk7XG5hcHAudXNlKGhlbG1ldCgpKTtcbmFwcC51c2UoYm9keVBhcnNlci5qc29uKHsgbGltaXQ6ICc1MG1iJyB9KSk7XG5cbmNvbnN0IHN0YXJ0U2VydmVyID0gYXN5bmMgKCkgPT4ge1xuXG4gIGNvbnN0IGFuYWdpbmVSb3V0ZXIgPSBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgICBjb25zb2xlLmxvZygnSGVsbG8gV29ybGQnKTtcbiAgICBjb25zb2xlLmxvZyhuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHtcbiAgICAgIGRhdGVTdHlsZTogJ2Z1bGwnLFxuICAgICAgdGltZVN0eWxlOiAnbG9uZycsXG4gICAgICB0aW1lWm9uZTogJ1VUQydcbiAgICB9KSk7XG4gICAgcmVzLnNlbmQoe1xuICAgICAgICB0ZXh0OiBcIkhlbGxvIFdvcmxkXCIsXG4gICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywge1xuICAgICAgICAgICAgZGF0ZVN0eWxlOiAnZnVsbCcsXG4gICAgICAgICAgICB0aW1lU3R5bGU6ICdsb25nJyxcbiAgICAgICAgICAgIHRpbWVab25lOiAnVVRDJ1xuICAgICAgICB9KVxuICAgIH0pO1xuICAgIHJldHVybiAwO1xufTtcblxuICBhcHAuZ2V0KCcvYW5hZ2luZScsIGFuYWdpbmVSb3V0ZXIsIChyZXEsIHJlcywgZXJyLCBuZXh0KSA9PiB7XG4gICAgaWYgKGVyciBpbnN0YW5jZW9mIENvZGVkRXJyb3IpIHtcbiAgICAgIC8vIGRlZXBjb2RlIGlnbm9yZSBTZXJ2ZXJMZWFrOiBubyBpbXBvcnRhbnQgaW5mb3JtYXRpb24gZXhpc3RzIGluIGVycm9yXG4gICAgICByZXMuc3RhdHVzKGVyci5jb2RlKS5zZW5kKGVyci5tc2cpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBkZWVwY29kZSBpZ25vcmUgU2VydmVyTGVhazogbm8gaW1wb3J0YW50IGluZm9ybWF0aW9uIGV4aXN0cyBpbiBlcnJvclxuICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoZXJyKTtcbiAgICB9XG4gIH0pO1xuXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuICAvLyBhcHAuZ2V0KCcvX3ZlcnNpb24nLCB2ZXJzaW9uUm91dGVyKTtcblxuICBhcHAubGlzdGVuKGNvbmZpZy5wb3J0LCAoKSA9PiB7XG4gICAgbG9nLmluZm8oYFtTZXJ2ZXJdIGFuYWdpbmUgbGlzdGVuaW5nIG9uIHBvcnQgJHtjb25maWcucG9ydH0hYCk7XG4gIH0pO1xufTtcblxuc3RhcnRTZXJ2ZXIoKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBT0EsT0FBTyxNQUFNLFNBQVM7QUFDN0IsT0FBT0MsSUFBSSxNQUFNLE1BQU07QUFDdkIsT0FBT0MsTUFBTSxNQUFNLFFBQVE7QUFDM0IsT0FBT0MsVUFBVSxNQUFNLGFBQWE7QUFDcEMsU0FBU0MsZ0JBQWdCLFFBQVEsZUFBZTtBQUNoRCxPQUFPQyxNQUFNLE1BQU0sVUFBVTtBQUM3QixPQUFPQyxHQUFHLE1BQU0sVUFBVTtBQUMxQixPQUFPQyxZQUFZLE1BQU0sc0JBQXNCO0FBQy9DLE9BQU9DLHFCQUFxQixNQUFNLG1CQUFtQjtBQUFDO0FBQ3REO0FBQ0EsT0FBT0MsVUFBVSxNQUFNLGVBQWU7QUFFdEMsTUFBTUMsR0FBRyxHQUFHVixPQUFPLENBQUMsQ0FBQztBQUNyQlUsR0FBRyxDQUFDQyxHQUFHLENBQUNWLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDZlMsR0FBRyxDQUFDQyxHQUFHLENBQUNULE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDakJRLEdBQUcsQ0FBQ0MsR0FBRyxDQUFDUixVQUFVLENBQUNTLElBQUksQ0FBQztFQUFFQyxLQUFLLEVBQUU7QUFBTyxDQUFDLENBQUMsQ0FBQztBQUUzQyxNQUFNQyxXQUFXLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBRTlCLE1BQU1DLGFBQWEsR0FBRyxNQUFBQSxDQUFPQyxHQUFHLEVBQUVDLEdBQUcsS0FBSztJQUN4Q0MsT0FBTyxDQUFDWixHQUFHLENBQUMsYUFBYSxDQUFDO0lBQzFCWSxPQUFPLENBQUNaLEdBQUcsQ0FBQyxJQUFJYSxJQUFJLENBQUMsQ0FBQyxDQUFDQyxjQUFjLENBQUMsT0FBTyxFQUFFO01BQzdDQyxTQUFTLEVBQUUsTUFBTTtNQUNqQkMsU0FBUyxFQUFFLE1BQU07TUFDakJDLFFBQVEsRUFBRTtJQUNaLENBQUMsQ0FBQyxDQUFDO0lBQ0hOLEdBQUcsQ0FBQ08sSUFBSSxDQUFDO01BQ0xDLElBQUksRUFBRSxhQUFhO01BQ25CQyxJQUFJLEVBQUUsSUFBSVAsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsY0FBYyxDQUFDLE9BQU8sRUFBRTtRQUNyQ0MsU0FBUyxFQUFFLE1BQU07UUFDakJDLFNBQVMsRUFBRSxNQUFNO1FBQ2pCQyxRQUFRLEVBQUU7TUFDZCxDQUFDO0lBQ0wsQ0FBQyxDQUFDO0lBQ0YsT0FBTyxDQUFDO0VBQ1osQ0FBQztFQUVDYixHQUFHLENBQUNpQixHQUFHLENBQUMsVUFBVSxFQUFFWixhQUFhLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVXLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0lBQzFELElBQUlELEdBQUcsWUFBWW5CLFVBQVUsRUFBRTtNQUM3QjtNQUNBUSxHQUFHLENBQUNhLE1BQU0sQ0FBQ0YsR0FBRyxDQUFDRyxJQUFJLENBQUMsQ0FBQ1AsSUFBSSxDQUFDSSxHQUFHLENBQUNJLEdBQUcsQ0FBQztJQUNwQyxDQUFDLE1BQU07TUFDTDtNQUNBZixHQUFHLENBQUNhLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ04sSUFBSSxDQUFDSSxHQUFHLENBQUM7SUFDM0I7RUFDRixDQUFDLENBQUM7O0VBRUY7RUFDQTs7RUFFQWxCLEdBQUcsQ0FBQ3VCLE1BQU0sQ0FBQzVCLE1BQU0sQ0FBQzZCLElBQUksRUFBRSxNQUFNO0lBQzVCNUIsR0FBRyxDQUFDNkIsSUFBSSxDQUFDLHNDQUFzQzlCLE1BQU0sQ0FBQzZCLElBQUksR0FBRyxDQUFDO0VBQ2hFLENBQUMsQ0FBQztBQUNKLENBQUM7QUFFRHBCLFdBQVcsQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["express","cors","helmet","bodyParser","getConsoleOutput","config","log","headerParser","getAuthHelperInstance","CodedError","app","use","json","limit","startServer","anagineRouter","req","res","console","Date","toLocaleString","dateStyle","timeStyle","timeZone","send","text","time","get","err","next","status","code","msg","listen","port","info"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["server.js"],"sourcesContent":["import express from 'express';\nimport cors from 'cors';\nimport helmet from 'helmet';\nimport bodyParser from 'body-parser';\nimport { getConsoleOutput } from '@jest/console';\nimport config from './config';\nimport log from './logger';\nimport headerParser from './utils/headerParser';\nimport getAuthHelperInstance from './auth/authHelper';;\n// import anagineRouter from './anagine';\nimport CodedError from './utils/error';\n\nconst app = express();\napp.use(cors());\napp.use(helmet());\napp.use(bodyParser.json({ limit: '50mb' }));\n\nconst startServer = async () => {\n\n  const anagineRouter = async (req, res) => {\n    console.log('Hello World');\n    console.log(new Date().toLocaleString('en-US', {\n      dateStyle: 'full',\n      timeStyle: 'long',\n      timeZone: 'UTC'\n    }));\n    res.send({\n        text: \"Hello World\",\n        time: new Date().toLocaleString('en-US', {\n            dateStyle: 'full',\n            timeStyle: 'long',\n            timeZone: 'UTC'\n        })\n    });\n    return 0;\n};\n\n  app.get('/anagine', anagineRouter, (req, res, err, next) => {\n    if (err instanceof CodedError) {\n      // deepcode ignore ServerLeak: no important information exists in error\n      res.status(err.code).send(err.msg);\n    } else {\n      // deepcode ignore ServerLeak: no important information exists in error\n      res.status(500).send(err);\n    }\n  });\n\n  // eslint-disable-next-line no-unused-vars\n  // app.get('/_version', versionRouter);\n\n  app.listen(config.port, () => {\n    log.info(`[Server] anagine listening on port ${config.port}!`);\n  });\n};\n\nstartServer();\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,SAAS;AAC7B,OAAOC,IAAI,MAAM,MAAM;AACvB,OAAOC,MAAM,MAAM,QAAQ;AAC3B,OAAOC,UAAU,MAAM,aAAa;AACpC,SAASC,gBAAgB,QAAQ,eAAe;AAChD,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,GAAG,MAAM,UAAU;AAC1B,OAAOC,YAAY,MAAM,sBAAsB;AAC/C,OAAOC,qBAAqB,MAAM,mBAAmB;AAAC;AACtD;AACA,OAAOC,UAAU,MAAM,eAAe;AAEtC,MAAMC,GAAG,GAAGV,OAAO,CAAC,CAAC;AACrBU,GAAG,CAACC,GAAG,CAACV,IAAI,CAAC,CAAC,CAAC;AACfS,GAAG,CAACC,GAAG,CAACT,MAAM,CAAC,CAAC,CAAC;AACjBQ,GAAG,CAACC,GAAG,CAACR,UAAU,CAACS,IAAI,CAAC;EAAEC,KAAK,EAAE;AAAO,CAAC,CAAC,CAAC;AAE3C,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;EAE9B,MAAMC,aAAa,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;IACxCC,OAAO,CAACZ,GAAG,CAAC,aAAa,CAAC;IAC1BY,OAAO,CAACZ,GAAG,CAAC,IAAIa,IAAI,CAAC,CAAC,CAACC,cAAc,CAAC,OAAO,EAAE;MAC7CC,SAAS,EAAE,MAAM;MACjBC,SAAS,EAAE,MAAM;MACjBC,QAAQ,EAAE;IACZ,CAAC,CAAC,CAAC;IACHN,GAAG,CAACO,IAAI,CAAC;MACLC,IAAI,EAAE,aAAa;MACnBC,IAAI,EAAE,IAAIP,IAAI,CAAC,CAAC,CAACC,cAAc,CAAC,OAAO,EAAE;QACrCC,SAAS,EAAE,MAAM;QACjBC,SAAS,EAAE,MAAM;QACjBC,QAAQ,EAAE;MACd,CAAC;IACL,CAAC,CAAC;IACF,OAAO,CAAC;EACZ,CAAC;EAECb,GAAG,CAACiB,GAAG,CAAC,UAAU,EAAEZ,aAAa,EAAE,CAACC,GAAG,EAAEC,GAAG,EAAEW,GAAG,EAAEC,IAAI,KAAK;IAC1D,IAAID,GAAG,YAAYnB,UAAU,EAAE;MAC7B;MACAQ,GAAG,CAACa,MAAM,CAACF,GAAG,CAACG,IAAI,CAAC,CAACP,IAAI,CAACI,GAAG,CAACI,GAAG,CAAC;IACpC,CAAC,MAAM;MACL;MACAf,GAAG,CAACa,MAAM,CAAC,GAAG,CAAC,CAACN,IAAI,CAACI,GAAG,CAAC;IAC3B;EACF,CAAC,CAAC;;EAEF;EACA;;EAEAlB,GAAG,CAACuB,MAAM,CAAC5B,MAAM,CAAC6B,IAAI,EAAE,MAAM;IAC5B5B,GAAG,CAAC6B,IAAI,CAAC,sCAAsC9B,MAAM,CAAC6B,IAAI,GAAG,CAAC;EAChE,CAAC,CAAC;AACJ,CAAC;AAEDpB,WAAW,CAAC,CAAC","ignoreList":[]}},"mtime":1741316202790},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/server.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _cors = _interopRequireDefault(require(\"cors\"));\nvar _helmet = _interopRequireDefault(require(\"helmet\"));\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\nvar _config = _interopRequireDefault(require(\"./config\"));\nvar _logger = _interopRequireDefault(require(\"./logger\"));\nvar _graphql = _interopRequireDefault(require(\"./graphql\"));\nvar _endpoints = require(\"./endpoints\");\nvar _anagine = _interopRequireDefault(require(\"./anagine\"));\nvar _error = _interopRequireDefault(require(\"./utils/error\"));\n// import headerParser from './utils/headerParser';\n// import getAuthHelperInstance from './auth/authHelper';\n\nconst app = (0, _express.default)();\napp.use((0, _cors.default)());\napp.use((0, _helmet.default)());\napp.use(_bodyParser.default.json({\n  limit: '50mb'\n}));\nconst startServer = async () => {\n  app.use('/anagine', _anagine.default, (req, res, err, next) => {\n    if (err instanceof _error.default) {\n      // deepcode ignore ServerLeak: no important information exists in error\n      res.status(err.code).send(err.msg);\n    } else {\n      // deepcode ignore ServerLeak: no important information exists in error\n      res.status(500).send(err);\n    }\n  });\n  app.use('/graphql', _graphql.default);\n\n  // health check endpoint\n  app.use('/_status', _endpoints.statusProxy);\n  app.use('/_version', _endpoints.versionProxy);\n  app.listen(_config.default.port, () => {\n    _logger.default.info(`[Server] anagine listening on port ${_config.default.port}!`);\n  });\n};\nstartServer();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NvcnMiLCJfaGVsbWV0IiwiX2JvZHlQYXJzZXIiLCJfY29uZmlnIiwiX2xvZ2dlciIsIl9ncmFwaHFsIiwiX2VuZHBvaW50cyIsIl9hbmFnaW5lIiwiX2Vycm9yIiwiYXBwIiwiZXhwcmVzcyIsInVzZSIsImNvcnMiLCJoZWxtZXQiLCJib2R5UGFyc2VyIiwianNvbiIsImxpbWl0Iiwic3RhcnRTZXJ2ZXIiLCJhbmFnaW5lUm91dGVyIiwicmVxIiwicmVzIiwiZXJyIiwibmV4dCIsIkNvZGVkRXJyb3IiLCJzdGF0dXMiLCJjb2RlIiwic2VuZCIsIm1zZyIsImdyYXBoUUxQcm94eSIsInN0YXR1c1Byb3h5IiwidmVyc2lvblByb3h5IiwibGlzdGVuIiwiY29uZmlnIiwicG9ydCIsImxvZyIsImluZm8iXSwic291cmNlUm9vdCI6Ii9ob21lL2V4b3VzZXIvRG9jdW1lbnRzL1Byb2plY3RzL2FuYWdpbmUvc3JjL3NlcnZlci8iLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCBjb3JzIGZyb20gJ2NvcnMnO1xuaW1wb3J0IGhlbG1ldCBmcm9tICdoZWxtZXQnO1xuaW1wb3J0IGJvZHlQYXJzZXIgZnJvbSAnYm9keS1wYXJzZXInO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgbG9nIGZyb20gJy4vbG9nZ2VyJztcbi8vIGltcG9ydCBoZWFkZXJQYXJzZXIgZnJvbSAnLi91dGlscy9oZWFkZXJQYXJzZXInO1xuLy8gaW1wb3J0IGdldEF1dGhIZWxwZXJJbnN0YW5jZSBmcm9tICcuL2F1dGgvYXV0aEhlbHBlcic7XG5pbXBvcnQgZ3JhcGhRTFByb3h5IGZyb20gJy4vZ3JhcGhxbCc7XG5pbXBvcnQge3N0YXR1c1Byb3h5LCB2ZXJzaW9uUHJveHl9IGZyb20gJy4vZW5kcG9pbnRzJztcbmltcG9ydCBhbmFnaW5lUm91dGVyIGZyb20gJy4vYW5hZ2luZSc7XG5pbXBvcnQgQ29kZWRFcnJvciBmcm9tICcuL3V0aWxzL2Vycm9yJztcblxuY29uc3QgYXBwID0gZXhwcmVzcygpO1xuYXBwLnVzZShjb3JzKCkpO1xuYXBwLnVzZShoZWxtZXQoKSk7XG5hcHAudXNlKGJvZHlQYXJzZXIuanNvbih7IGxpbWl0OiAnNTBtYicgfSkpO1xuXG5jb25zdCBzdGFydFNlcnZlciA9IGFzeW5jICgpID0+IHtcblxuICAgIGFwcC51c2UoJy9hbmFnaW5lJywgYW5hZ2luZVJvdXRlciwgKHJlcSwgcmVzLCBlcnIsIG5leHQpID0+IHtcbiAgICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIENvZGVkRXJyb3IpIHtcbiAgICAgICAgICAgIC8vIGRlZXBjb2RlIGlnbm9yZSBTZXJ2ZXJMZWFrOiBubyBpbXBvcnRhbnQgaW5mb3JtYXRpb24gZXhpc3RzIGluIGVycm9yXG4gICAgICAgICAgICByZXMuc3RhdHVzKGVyci5jb2RlKS5zZW5kKGVyci5tc2cpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gZGVlcGNvZGUgaWdub3JlIFNlcnZlckxlYWs6IG5vIGltcG9ydGFudCBpbmZvcm1hdGlvbiBleGlzdHMgaW4gZXJyb3JcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGVycik7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGFwcC51c2UoJy9ncmFwaHFsJywgZ3JhcGhRTFByb3h5KTtcblxuICAgIC8vIGhlYWx0aCBjaGVjayBlbmRwb2ludFxuICAgIGFwcC51c2UoJy9fc3RhdHVzJywgc3RhdHVzUHJveHkpO1xuXG4gICAgYXBwLnVzZSgnL192ZXJzaW9uJywgdmVyc2lvblByb3h5KTtcblxuICAgIGFwcC5saXN0ZW4oY29uZmlnLnBvcnQsICgpID0+IHtcbiAgICAgICAgbG9nLmluZm8oYFtTZXJ2ZXJdIGFuYWdpbmUgbGlzdGVuaW5nIG9uIHBvcnQgJHtjb25maWcucG9ydH0hYCk7XG4gICAgfSk7XG59O1xuXG5zdGFydFNlcnZlcigpO1xuIl0sIm1hcHBpbmdzIjoiOzs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxLQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxXQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxPQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSyxPQUFBLEdBQUFOLHNCQUFBLENBQUFDLE9BQUE7QUFHQSxJQUFBTSxRQUFBLEdBQUFQLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTyxVQUFBLEdBQUFQLE9BQUE7QUFDQSxJQUFBUSxRQUFBLEdBQUFULHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBUyxNQUFBLEdBQUFWLHNCQUFBLENBQUFDLE9BQUE7QUFMQTtBQUNBOztBQU1BLE1BQU1VLEdBQUcsR0FBRyxJQUFBQyxnQkFBTyxFQUFDLENBQUM7QUFDckJELEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLElBQUFDLGFBQUksRUFBQyxDQUFDLENBQUM7QUFDZkgsR0FBRyxDQUFDRSxHQUFHLENBQUMsSUFBQUUsZUFBTSxFQUFDLENBQUMsQ0FBQztBQUNqQkosR0FBRyxDQUFDRSxHQUFHLENBQUNHLG1CQUFVLENBQUNDLElBQUksQ0FBQztFQUFFQyxLQUFLLEVBQUU7QUFBTyxDQUFDLENBQUMsQ0FBQztBQUUzQyxNQUFNQyxXQUFXLEdBQUcsTUFBQUEsQ0FBQSxLQUFZO0VBRTVCUixHQUFHLENBQUNFLEdBQUcsQ0FBQyxVQUFVLEVBQUVPLGdCQUFhLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxLQUFLO0lBQ3hELElBQUlELEdBQUcsWUFBWUUsY0FBVSxFQUFFO01BQzNCO01BQ0FILEdBQUcsQ0FBQ0ksTUFBTSxDQUFDSCxHQUFHLENBQUNJLElBQUksQ0FBQyxDQUFDQyxJQUFJLENBQUNMLEdBQUcsQ0FBQ00sR0FBRyxDQUFDO0lBQ3RDLENBQUMsTUFBTTtNQUNIO01BQ0FQLEdBQUcsQ0FBQ0ksTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDRSxJQUFJLENBQUNMLEdBQUcsQ0FBQztJQUM3QjtFQUNKLENBQUMsQ0FBQztFQUVGWixHQUFHLENBQUNFLEdBQUcsQ0FBQyxVQUFVLEVBQUVpQixnQkFBWSxDQUFDOztFQUVqQztFQUNBbkIsR0FBRyxDQUFDRSxHQUFHLENBQUMsVUFBVSxFQUFFa0Isc0JBQVcsQ0FBQztFQUVoQ3BCLEdBQUcsQ0FBQ0UsR0FBRyxDQUFDLFdBQVcsRUFBRW1CLHVCQUFZLENBQUM7RUFFbENyQixHQUFHLENBQUNzQixNQUFNLENBQUNDLGVBQU0sQ0FBQ0MsSUFBSSxFQUFFLE1BQU07SUFDMUJDLGVBQUcsQ0FBQ0MsSUFBSSxDQUFDLHNDQUFzQ0gsZUFBTSxDQUFDQyxJQUFJLEdBQUcsQ0FBQztFQUNsRSxDQUFDLENBQUM7QUFDTixDQUFDO0FBRURoQixXQUFXLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_express","_interopRequireDefault","require","_cors","_helmet","_bodyParser","_config","_logger","_graphql","_endpoints","_anagine","_error","app","express","use","cors","helmet","bodyParser","json","limit","startServer","anagineRouter","req","res","err","next","CodedError","status","code","send","msg","graphQLProxy","statusProxy","versionProxy","listen","config","port","log","info"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["server.js"],"sourcesContent":["import express from 'express';\nimport cors from 'cors';\nimport helmet from 'helmet';\nimport bodyParser from 'body-parser';\nimport config from './config';\nimport log from './logger';\n// import headerParser from './utils/headerParser';\n// import getAuthHelperInstance from './auth/authHelper';\nimport graphQLProxy from './graphql';\nimport {statusProxy, versionProxy} from './endpoints';\nimport anagineRouter from './anagine';\nimport CodedError from './utils/error';\n\nconst app = express();\napp.use(cors());\napp.use(helmet());\napp.use(bodyParser.json({ limit: '50mb' }));\n\nconst startServer = async () => {\n\n    app.use('/anagine', anagineRouter, (req, res, err, next) => {\n        if (err instanceof CodedError) {\n            // deepcode ignore ServerLeak: no important information exists in error\n            res.status(err.code).send(err.msg);\n        } else {\n            // deepcode ignore ServerLeak: no important information exists in error\n            res.status(500).send(err);\n        }\n    });\n\n    app.use('/graphql', graphQLProxy);\n\n    // health check endpoint\n    app.use('/_status', statusProxy);\n\n    app.use('/_version', versionProxy);\n\n    app.listen(config.port, () => {\n        log.info(`[Server] anagine listening on port ${config.port}!`);\n    });\n};\n\nstartServer();\n"],"mappings":";;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,KAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,WAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,OAAA,GAAAL,sBAAA,CAAAC,OAAA;AACA,IAAAK,OAAA,GAAAN,sBAAA,CAAAC,OAAA;AAGA,IAAAM,QAAA,GAAAP,sBAAA,CAAAC,OAAA;AACA,IAAAO,UAAA,GAAAP,OAAA;AACA,IAAAQ,QAAA,GAAAT,sBAAA,CAAAC,OAAA;AACA,IAAAS,MAAA,GAAAV,sBAAA,CAAAC,OAAA;AALA;AACA;;AAMA,MAAMU,GAAG,GAAG,IAAAC,gBAAO,EAAC,CAAC;AACrBD,GAAG,CAACE,GAAG,CAAC,IAAAC,aAAI,EAAC,CAAC,CAAC;AACfH,GAAG,CAACE,GAAG,CAAC,IAAAE,eAAM,EAAC,CAAC,CAAC;AACjBJ,GAAG,CAACE,GAAG,CAACG,mBAAU,CAACC,IAAI,CAAC;EAAEC,KAAK,EAAE;AAAO,CAAC,CAAC,CAAC;AAE3C,MAAMC,WAAW,GAAG,MAAAA,CAAA,KAAY;EAE5BR,GAAG,CAACE,GAAG,CAAC,UAAU,EAAEO,gBAAa,EAAE,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;IACxD,IAAID,GAAG,YAAYE,cAAU,EAAE;MAC3B;MACAH,GAAG,CAACI,MAAM,CAACH,GAAG,CAACI,IAAI,CAAC,CAACC,IAAI,CAACL,GAAG,CAACM,GAAG,CAAC;IACtC,CAAC,MAAM;MACH;MACAP,GAAG,CAACI,MAAM,CAAC,GAAG,CAAC,CAACE,IAAI,CAACL,GAAG,CAAC;IAC7B;EACJ,CAAC,CAAC;EAEFZ,GAAG,CAACE,GAAG,CAAC,UAAU,EAAEiB,gBAAY,CAAC;;EAEjC;EACAnB,GAAG,CAACE,GAAG,CAAC,UAAU,EAAEkB,sBAAW,CAAC;EAEhCpB,GAAG,CAACE,GAAG,CAAC,WAAW,EAAEmB,uBAAY,CAAC;EAElCrB,GAAG,CAACsB,MAAM,CAACC,eAAM,CAACC,IAAI,EAAE,MAAM;IAC1BC,eAAG,CAACC,IAAI,CAAC,sCAAsCH,eAAM,CAACC,IAAI,GAAG,CAAC;EAClE,CAAC,CAAC;AACN,CAAC;AAEDhB,WAAW,CAAC,CAAC","ignoreList":[]}},"mtime":1745562432489},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _startsWith = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/starts-with\"));\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\nvar _fs = require(\"fs\");\nvar _logger = _interopRequireDefault(require(\"./logger\"));\nvar _context, _context2;\nlet inputConfig = {};\nif (process.env.ANAGINE_CONFIG_FILEPATH) {\n  const configFilepath = process.env.ANAGINE_CONFIG_FILEPATH;\n  inputConfig = JSON.parse((0, _fs.readFileSync)(configFilepath).toString());\n  _logger.default.info('[config] read anagine config from', configFilepath, (0, _stringify.default)(inputConfig, null, 4));\n}\nconst config = {\n  esConfig: {\n    host: 'localhost:9200',\n    authFilterField: inputConfig.auth_filter_field || 'auth_resource_path'\n  },\n  guppyConfig: {\n    host: 'localhost:3010'\n  },\n  ollamaConfig: {\n    host: \"localhost:11434\",\n    model: \"llama3.2:1b\"\n  },\n  port: 3000,\n  path: '/graphql',\n  arboristEndpoint: 'http://arborist-service',\n  tierAccessLevel: 'private',\n  tierAccessLimit: 1000,\n  tierAccessSensitiveRecordExclusionField: inputConfig.tier_access_sensitive_record_exclusion_field,\n  logLevel: inputConfig.log_level || 'INFO',\n  enableEncryptWhiteList: typeof inputConfig.enable_encrypt_whitelist === 'undefined' ? false : inputConfig.enable_encrypt_whitelist,\n  encryptWhitelist: inputConfig.encrypt_whitelist || ['__missing__', 'unknown', 'not reported', 'no data'],\n  analyzedTextFieldSuffix: '.analyzed',\n  matchedTextHighlightTagName: 'em',\n  allowedMinimumSearchLen: 2\n};\nif (process.env.GEN3_ES_ENDPOINT) {\n  config.esConfig.host = process.env.GEN3_ES_ENDPOINT;\n}\nif (!(0, _startsWith.default)(_context = config.esConfig.host).call(_context, 'http')) {\n  config.esConfig.host = `http://${config.esConfig.host}`;\n}\nif (!(0, _startsWith.default)(_context2 = config.guppyConfig.host).call(_context2, 'http')) {\n  config.guppyConfig.host = `http://${config.guppyConfig.host}`;\n}\nif (process.env.GEN3_ARBORIST_ENDPOINT) {\n  config.arboristEndpoint = process.env.GEN3_ARBORIST_ENDPOINT;\n}\nif (process.env.ANAGINE_PORT) {\n  config.port = process.env.ANAGINE_PORT;\n}\nconst allowedTierAccessLevels = ['private', 'regular', 'libre'];\nif (process.env.TIER_ACCESS_LEVEL) {\n  if (!(0, _includes.default)(allowedTierAccessLevels).call(allowedTierAccessLevels, process.env.TIER_ACCESS_LEVEL)) {\n    throw new Error(`Invalid TIER_ACCESS_LEVEL \"${process.env.TIER_ACCESS_LEVEL}\"`);\n  }\n  config.tierAccessLevel = process.env.TIER_ACCESS_LEVEL;\n}\nif (process.env.TIER_ACCESS_LIMIT) {\n  config.tierAccessLimit = process.env.TIER_ACCESS_LIMIT;\n}\nif (process.env.INTERNAL_LOCAL_TEST) {\n  config.internalLocalTest = process.env.INTERNAL_LOCAL_TEST;\n}\nif (process.env.LOG_LEVEL) {\n  config.logLevel = process.env.LOG_LEVEL;\n}\nif (process.env.ANALYZED_TEXT_FIELD_SUFFIX) {\n  config.analyzedTextFieldSuffix = process.env.ANALYZED_TEXT_FIELD_SUFFIX;\n}\n\n// Either all indices should have explicit index-scoped tiered-access values or\n// the manifest should have a site-wide TIER_ACCESS_LEVEL value.\n// This approach is backwards-compatible with commons configured for past versions of tiered-access.\nlet allIndicesHaveTierAccessSettings = true;\n\n// If the indices all have settings, empty out the default\n// site-wide TIER_ACCESS_LEVEL from the config.\nif (allIndicesHaveTierAccessSettings) {\n  delete config.tierAccessLevel;\n}\n\n// check whitelist is enabled\nif (config.enableEncryptWhiteList) {\n  if (typeof config.encryptWhitelist !== 'object') {\n    config.encryptWhitelist = [config.encryptWhitelist];\n  }\n} else {\n  config.encryptWhitelist = [];\n}\n_logger.default.setLogLevel(config.logLevel);\n_logger.default.info('[config] starting server using config', (0, _stringify.default)(config, null, 4));\nvar _default = exports.default = config;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZnMiLCJyZXF1aXJlIiwiX2xvZ2dlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfY29udGV4dCIsIl9jb250ZXh0MiIsImlucHV0Q29uZmlnIiwicHJvY2VzcyIsImVudiIsIkFOQUdJTkVfQ09ORklHX0ZJTEVQQVRIIiwiY29uZmlnRmlsZXBhdGgiLCJKU09OIiwicGFyc2UiLCJyZWFkRmlsZVN5bmMiLCJ0b1N0cmluZyIsImxvZyIsImluZm8iLCJfc3RyaW5naWZ5IiwiZGVmYXVsdCIsImNvbmZpZyIsImVzQ29uZmlnIiwiaG9zdCIsImF1dGhGaWx0ZXJGaWVsZCIsImF1dGhfZmlsdGVyX2ZpZWxkIiwiZ3VwcHlDb25maWciLCJvbGxhbWFDb25maWciLCJtb2RlbCIsInBvcnQiLCJwYXRoIiwiYXJib3Jpc3RFbmRwb2ludCIsInRpZXJBY2Nlc3NMZXZlbCIsInRpZXJBY2Nlc3NMaW1pdCIsInRpZXJBY2Nlc3NTZW5zaXRpdmVSZWNvcmRFeGNsdXNpb25GaWVsZCIsInRpZXJfYWNjZXNzX3NlbnNpdGl2ZV9yZWNvcmRfZXhjbHVzaW9uX2ZpZWxkIiwibG9nTGV2ZWwiLCJsb2dfbGV2ZWwiLCJlbmFibGVFbmNyeXB0V2hpdGVMaXN0IiwiZW5hYmxlX2VuY3J5cHRfd2hpdGVsaXN0IiwiZW5jcnlwdFdoaXRlbGlzdCIsImVuY3J5cHRfd2hpdGVsaXN0IiwiYW5hbHl6ZWRUZXh0RmllbGRTdWZmaXgiLCJtYXRjaGVkVGV4dEhpZ2hsaWdodFRhZ05hbWUiLCJhbGxvd2VkTWluaW11bVNlYXJjaExlbiIsIkdFTjNfRVNfRU5EUE9JTlQiLCJfc3RhcnRzV2l0aCIsImNhbGwiLCJHRU4zX0FSQk9SSVNUX0VORFBPSU5UIiwiQU5BR0lORV9QT1JUIiwiYWxsb3dlZFRpZXJBY2Nlc3NMZXZlbHMiLCJUSUVSX0FDQ0VTU19MRVZFTCIsIl9pbmNsdWRlcyIsIkVycm9yIiwiVElFUl9BQ0NFU1NfTElNSVQiLCJJTlRFUk5BTF9MT0NBTF9URVNUIiwiaW50ZXJuYWxMb2NhbFRlc3QiLCJMT0dfTEVWRUwiLCJBTkFMWVpFRF9URVhUX0ZJRUxEX1NVRkZJWCIsImFsbEluZGljZXNIYXZlVGllckFjY2Vzc1NldHRpbmdzIiwic2V0TG9nTGV2ZWwiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2V4b3VzZXIvRG9jdW1lbnRzL1Byb2plY3RzL2FuYWdpbmUvc3JjL3NlcnZlci8iLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWFkRmlsZVN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgbG9nIGZyb20gJy4vbG9nZ2VyJztcblxubGV0IGlucHV0Q29uZmlnID0ge307XG5pZiAocHJvY2Vzcy5lbnYuQU5BR0lORV9DT05GSUdfRklMRVBBVEgpIHtcbiAgY29uc3QgY29uZmlnRmlsZXBhdGggPSBwcm9jZXNzLmVudi5BTkFHSU5FX0NPTkZJR19GSUxFUEFUSDtcbiAgaW5wdXRDb25maWcgPSBKU09OLnBhcnNlKHJlYWRGaWxlU3luYyhjb25maWdGaWxlcGF0aCkudG9TdHJpbmcoKSk7XG4gIGxvZy5pbmZvKCdbY29uZmlnXSByZWFkIGFuYWdpbmUgY29uZmlnIGZyb20nLCBjb25maWdGaWxlcGF0aCwgSlNPTi5zdHJpbmdpZnkoaW5wdXRDb25maWcsIG51bGwsIDQpKTtcbn1cblxuY29uc3QgY29uZmlnID0ge1xuICAgIGVzQ29uZmlnOiB7XG4gICAgICAgIGhvc3Q6ICdsb2NhbGhvc3Q6OTIwMCcsXG4gICAgICAgIGF1dGhGaWx0ZXJGaWVsZDogaW5wdXRDb25maWcuYXV0aF9maWx0ZXJfZmllbGQgfHwgJ2F1dGhfcmVzb3VyY2VfcGF0aCcsXG4gICAgfSxcbiAgICBndXBweUNvbmZpZzoge1xuICAgICAgICBob3N0OiAnbG9jYWxob3N0OjMwMTAnLFxuICAgIH0sXG4gICAgb2xsYW1hQ29uZmlnOiB7XG4gICAgICAgIGhvc3Q6IFwibG9jYWxob3N0OjExNDM0XCIsXG4gICAgICAgIG1vZGVsOiBcImxsYW1hMy4yOjFiXCIsXG4gICAgfSxcbiAgICBwb3J0OiAzMDAwLFxuICAgIHBhdGg6ICcvZ3JhcGhxbCcsXG4gICAgYXJib3Jpc3RFbmRwb2ludDogJ2h0dHA6Ly9hcmJvcmlzdC1zZXJ2aWNlJyxcbiAgICB0aWVyQWNjZXNzTGV2ZWw6ICdwcml2YXRlJyxcbiAgICB0aWVyQWNjZXNzTGltaXQ6IDEwMDAsXG4gICAgdGllckFjY2Vzc1NlbnNpdGl2ZVJlY29yZEV4Y2x1c2lvbkZpZWxkOiBpbnB1dENvbmZpZy50aWVyX2FjY2Vzc19zZW5zaXRpdmVfcmVjb3JkX2V4Y2x1c2lvbl9maWVsZCxcbiAgICBsb2dMZXZlbDogaW5wdXRDb25maWcubG9nX2xldmVsIHx8ICdJTkZPJyxcbiAgICBlbmFibGVFbmNyeXB0V2hpdGVMaXN0OiB0eXBlb2YgaW5wdXRDb25maWcuZW5hYmxlX2VuY3J5cHRfd2hpdGVsaXN0ID09PSAndW5kZWZpbmVkJyA/IGZhbHNlIDogaW5wdXRDb25maWcuZW5hYmxlX2VuY3J5cHRfd2hpdGVsaXN0LFxuICAgIGVuY3J5cHRXaGl0ZWxpc3Q6IGlucHV0Q29uZmlnLmVuY3J5cHRfd2hpdGVsaXN0IHx8IFsnX19taXNzaW5nX18nLCAndW5rbm93bicsICdub3QgcmVwb3J0ZWQnLCAnbm8gZGF0YSddLFxuICAgIGFuYWx5emVkVGV4dEZpZWxkU3VmZml4OiAnLmFuYWx5emVkJyxcbiAgICBtYXRjaGVkVGV4dEhpZ2hsaWdodFRhZ05hbWU6ICdlbScsXG4gICAgYWxsb3dlZE1pbmltdW1TZWFyY2hMZW46IDIsXG59O1xuXG5pZiAocHJvY2Vzcy5lbnYuR0VOM19FU19FTkRQT0lOVCkge1xuICAgIGNvbmZpZy5lc0NvbmZpZy5ob3N0ID0gcHJvY2Vzcy5lbnYuR0VOM19FU19FTkRQT0lOVDtcbn1cbmlmICghY29uZmlnLmVzQ29uZmlnLmhvc3Quc3RhcnRzV2l0aCgnaHR0cCcpKSB7XG4gICAgY29uZmlnLmVzQ29uZmlnLmhvc3QgPSBgaHR0cDovLyR7Y29uZmlnLmVzQ29uZmlnLmhvc3R9YDtcbn1cblxuaWYgKCFjb25maWcuZ3VwcHlDb25maWcuaG9zdC5zdGFydHNXaXRoKCdodHRwJykpIHtcbiAgICBjb25maWcuZ3VwcHlDb25maWcuaG9zdCA9IGBodHRwOi8vJHtjb25maWcuZ3VwcHlDb25maWcuaG9zdH1gO1xufVxuXG5pZiAocHJvY2Vzcy5lbnYuR0VOM19BUkJPUklTVF9FTkRQT0lOVCkge1xuICAgIGNvbmZpZy5hcmJvcmlzdEVuZHBvaW50ID0gcHJvY2Vzcy5lbnYuR0VOM19BUkJPUklTVF9FTkRQT0lOVDtcbn1cblxuaWYgKHByb2Nlc3MuZW52LkFOQUdJTkVfUE9SVCkge1xuICAgIGNvbmZpZy5wb3J0ID0gcHJvY2Vzcy5lbnYuQU5BR0lORV9QT1JUO1xufVxuXG5jb25zdCBhbGxvd2VkVGllckFjY2Vzc0xldmVscyA9IFsncHJpdmF0ZScsICdyZWd1bGFyJywgJ2xpYnJlJ107XG5cbmlmIChwcm9jZXNzLmVudi5USUVSX0FDQ0VTU19MRVZFTCkge1xuICAgIGlmICghYWxsb3dlZFRpZXJBY2Nlc3NMZXZlbHMuaW5jbHVkZXMocHJvY2Vzcy5lbnYuVElFUl9BQ0NFU1NfTEVWRUwpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBUSUVSX0FDQ0VTU19MRVZFTCBcIiR7cHJvY2Vzcy5lbnYuVElFUl9BQ0NFU1NfTEVWRUx9XCJgKTtcbiAgICB9XG4gICAgY29uZmlnLnRpZXJBY2Nlc3NMZXZlbCA9IHByb2Nlc3MuZW52LlRJRVJfQUNDRVNTX0xFVkVMO1xufVxuXG5pZiAocHJvY2Vzcy5lbnYuVElFUl9BQ0NFU1NfTElNSVQpIHtcbiAgICBjb25maWcudGllckFjY2Vzc0xpbWl0ID0gcHJvY2Vzcy5lbnYuVElFUl9BQ0NFU1NfTElNSVQ7XG59XG5cbmlmIChwcm9jZXNzLmVudi5JTlRFUk5BTF9MT0NBTF9URVNUKSB7XG4gICAgY29uZmlnLmludGVybmFsTG9jYWxUZXN0ID0gcHJvY2Vzcy5lbnYuSU5URVJOQUxfTE9DQUxfVEVTVDtcbn1cblxuaWYgKHByb2Nlc3MuZW52LkxPR19MRVZFTCkge1xuICAgIGNvbmZpZy5sb2dMZXZlbCA9IHByb2Nlc3MuZW52LkxPR19MRVZFTDtcbn1cblxuaWYgKHByb2Nlc3MuZW52LkFOQUxZWkVEX1RFWFRfRklFTERfU1VGRklYKSB7XG4gICAgY29uZmlnLmFuYWx5emVkVGV4dEZpZWxkU3VmZml4ID0gcHJvY2Vzcy5lbnYuQU5BTFlaRURfVEVYVF9GSUVMRF9TVUZGSVg7XG59XG5cbi8vIEVpdGhlciBhbGwgaW5kaWNlcyBzaG91bGQgaGF2ZSBleHBsaWNpdCBpbmRleC1zY29wZWQgdGllcmVkLWFjY2VzcyB2YWx1ZXMgb3Jcbi8vIHRoZSBtYW5pZmVzdCBzaG91bGQgaGF2ZSBhIHNpdGUtd2lkZSBUSUVSX0FDQ0VTU19MRVZFTCB2YWx1ZS5cbi8vIFRoaXMgYXBwcm9hY2ggaXMgYmFja3dhcmRzLWNvbXBhdGlibGUgd2l0aCBjb21tb25zIGNvbmZpZ3VyZWQgZm9yIHBhc3QgdmVyc2lvbnMgb2YgdGllcmVkLWFjY2Vzcy5cbmxldCBhbGxJbmRpY2VzSGF2ZVRpZXJBY2Nlc3NTZXR0aW5ncyA9IHRydWU7XG5cbi8vIElmIHRoZSBpbmRpY2VzIGFsbCBoYXZlIHNldHRpbmdzLCBlbXB0eSBvdXQgdGhlIGRlZmF1bHRcbi8vIHNpdGUtd2lkZSBUSUVSX0FDQ0VTU19MRVZFTCBmcm9tIHRoZSBjb25maWcuXG5pZiAoYWxsSW5kaWNlc0hhdmVUaWVyQWNjZXNzU2V0dGluZ3MpIHtcbiAgICBkZWxldGUgY29uZmlnLnRpZXJBY2Nlc3NMZXZlbDtcbn1cblxuLy8gY2hlY2sgd2hpdGVsaXN0IGlzIGVuYWJsZWRcbmlmIChjb25maWcuZW5hYmxlRW5jcnlwdFdoaXRlTGlzdCkge1xuICAgIGlmICh0eXBlb2YgY29uZmlnLmVuY3J5cHRXaGl0ZWxpc3QgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbmZpZy5lbmNyeXB0V2hpdGVsaXN0ID0gW2NvbmZpZy5lbmNyeXB0V2hpdGVsaXN0XTtcbiAgICB9XG59IGVsc2Uge1xuICAgIGNvbmZpZy5lbmNyeXB0V2hpdGVsaXN0ID0gW107XG59XG5cbmxvZy5zZXRMb2dMZXZlbChjb25maWcubG9nTGV2ZWwpO1xubG9nLmluZm8oJ1tjb25maWddIHN0YXJ0aW5nIHNlcnZlciB1c2luZyBjb25maWcnLCBKU09OLnN0cmluZ2lmeShjb25maWcsIG51bGwsIDQpKTtcblxuZXhwb3J0IGRlZmF1bHQgY29uZmlnO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLElBQUFBLEdBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUEyQixJQUFBRyxRQUFBLEVBQUFDLFNBQUE7QUFFM0IsSUFBSUMsV0FBVyxHQUFHLENBQUMsQ0FBQztBQUNwQixJQUFJQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsdUJBQXVCLEVBQUU7RUFDdkMsTUFBTUMsY0FBYyxHQUFHSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsdUJBQXVCO0VBQzFESCxXQUFXLEdBQUdLLElBQUksQ0FBQ0MsS0FBSyxDQUFDLElBQUFDLGdCQUFZLEVBQUNILGNBQWMsQ0FBQyxDQUFDSSxRQUFRLENBQUMsQ0FBQyxDQUFDO0VBQ2pFQyxlQUFHLENBQUNDLElBQUksQ0FBQyxtQ0FBbUMsRUFBRU4sY0FBYyxFQUFFLElBQUFPLFVBQUEsQ0FBQUMsT0FBQSxFQUFlWixXQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3JHO0FBRUEsTUFBTWEsTUFBTSxHQUFHO0VBQ1hDLFFBQVEsRUFBRTtJQUNOQyxJQUFJLEVBQUUsZ0JBQWdCO0lBQ3RCQyxlQUFlLEVBQUVoQixXQUFXLENBQUNpQixpQkFBaUIsSUFBSTtFQUN0RCxDQUFDO0VBQ0RDLFdBQVcsRUFBRTtJQUNUSCxJQUFJLEVBQUU7RUFDVixDQUFDO0VBQ0RJLFlBQVksRUFBRTtJQUNWSixJQUFJLEVBQUUsaUJBQWlCO0lBQ3ZCSyxLQUFLLEVBQUU7RUFDWCxDQUFDO0VBQ0RDLElBQUksRUFBRSxJQUFJO0VBQ1ZDLElB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","map":{"version":3,"names":["_fs","require","_logger","_interopRequireDefault","_context","_context2","inputConfig","process","env","ANAGINE_CONFIG_FILEPATH","configFilepath","JSON","parse","readFileSync","toString","log","info","_stringify","default","config","esConfig","host","authFilterField","auth_filter_field","guppyConfig","ollamaConfig","model","port","path","arboristEndpoint","tierAccessLevel","tierAccessLimit","tierAccessSensitiveRecordExclusionField","tier_access_sensitive_record_exclusion_field","logLevel","log_level","enableEncryptWhiteList","enable_encrypt_whitelist","encryptWhitelist","encrypt_whitelist","analyzedTextFieldSuffix","matchedTextHighlightTagName","allowedMinimumSearchLen","GEN3_ES_ENDPOINT","_startsWith","call","GEN3_ARBORIST_ENDPOINT","ANAGINE_PORT","allowedTierAccessLevels","TIER_ACCESS_LEVEL","_includes","Error","TIER_ACCESS_LIMIT","INTERNAL_LOCAL_TEST","internalLocalTest","LOG_LEVEL","ANALYZED_TEXT_FIELD_SUFFIX","allIndicesHaveTierAccessSettings","setLogLevel","_default","exports"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["config.js"],"sourcesContent":["import { readFileSync } from 'fs';\nimport log from './logger';\n\nlet inputConfig = {};\nif (process.env.ANAGINE_CONFIG_FILEPATH) {\n  const configFilepath = process.env.ANAGINE_CONFIG_FILEPATH;\n  inputConfig = JSON.parse(readFileSync(configFilepath).toString());\n  log.info('[config] read anagine config from', configFilepath, JSON.stringify(inputConfig, null, 4));\n}\n\nconst config = {\n    esConfig: {\n        host: 'localhost:9200',\n        authFilterField: inputConfig.auth_filter_field || 'auth_resource_path',\n    },\n    guppyConfig: {\n        host: 'localhost:3010',\n    },\n    ollamaConfig: {\n        host: \"localhost:11434\",\n        model: \"llama3.2:1b\",\n    },\n    port: 3000,\n    path: '/graphql',\n    arboristEndpoint: 'http://arborist-service',\n    tierAccessLevel: 'private',\n    tierAccessLimit: 1000,\n    tierAccessSensitiveRecordExclusionField: inputConfig.tier_access_sensitive_record_exclusion_field,\n    logLevel: inputConfig.log_level || 'INFO',\n    enableEncryptWhiteList: typeof inputConfig.enable_encrypt_whitelist === 'undefined' ? false : inputConfig.enable_encrypt_whitelist,\n    encryptWhitelist: inputConfig.encrypt_whitelist || ['__missing__', 'unknown', 'not reported', 'no data'],\n    analyzedTextFieldSuffix: '.analyzed',\n    matchedTextHighlightTagName: 'em',\n    allowedMinimumSearchLen: 2,\n};\n\nif (process.env.GEN3_ES_ENDPOINT) {\n    config.esConfig.host = process.env.GEN3_ES_ENDPOINT;\n}\nif (!config.esConfig.host.startsWith('http')) {\n    config.esConfig.host = `http://${config.esConfig.host}`;\n}\n\nif (!config.guppyConfig.host.startsWith('http')) {\n    config.guppyConfig.host = `http://${config.guppyConfig.host}`;\n}\n\nif (process.env.GEN3_ARBORIST_ENDPOINT) {\n    config.arboristEndpoint = process.env.GEN3_ARBORIST_ENDPOINT;\n}\n\nif (process.env.ANAGINE_PORT) {\n    config.port = process.env.ANAGINE_PORT;\n}\n\nconst allowedTierAccessLevels = ['private', 'regular', 'libre'];\n\nif (process.env.TIER_ACCESS_LEVEL) {\n    if (!allowedTierAccessLevels.includes(process.env.TIER_ACCESS_LEVEL)) {\n        throw new Error(`Invalid TIER_ACCESS_LEVEL \"${process.env.TIER_ACCESS_LEVEL}\"`);\n    }\n    config.tierAccessLevel = process.env.TIER_ACCESS_LEVEL;\n}\n\nif (process.env.TIER_ACCESS_LIMIT) {\n    config.tierAccessLimit = process.env.TIER_ACCESS_LIMIT;\n}\n\nif (process.env.INTERNAL_LOCAL_TEST) {\n    config.internalLocalTest = process.env.INTERNAL_LOCAL_TEST;\n}\n\nif (process.env.LOG_LEVEL) {\n    config.logLevel = process.env.LOG_LEVEL;\n}\n\nif (process.env.ANALYZED_TEXT_FIELD_SUFFIX) {\n    config.analyzedTextFieldSuffix = process.env.ANALYZED_TEXT_FIELD_SUFFIX;\n}\n\n// Either all indices should have explicit index-scoped tiered-access values or\n// the manifest should have a site-wide TIER_ACCESS_LEVEL value.\n// This approach is backwards-compatible with commons configured for past versions of tiered-access.\nlet allIndicesHaveTierAccessSettings = true;\n\n// If the indices all have settings, empty out the default\n// site-wide TIER_ACCESS_LEVEL from the config.\nif (allIndicesHaveTierAccessSettings) {\n    delete config.tierAccessLevel;\n}\n\n// check whitelist is enabled\nif (config.enableEncryptWhiteList) {\n    if (typeof config.encryptWhitelist !== 'object') {\n        config.encryptWhitelist = [config.encryptWhitelist];\n    }\n} else {\n    config.encryptWhitelist = [];\n}\n\nlog.setLogLevel(config.logLevel);\nlog.info('[config] starting server using config', JSON.stringify(config, null, 4));\n\nexport default config;\n"],"mappings":"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","ignoreList":[]}},"mtime":1745556616599},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\nvar _reduce = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"));\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\nconst originalFactory = _loglevel.default.methodFactory;\n_loglevel.default.methodFactory = (methodName, logLevel, loggerName) => {\n  const rawMethod = originalFactory(methodName, logLevel, loggerName);\n  return (message, ...args) => {\n    let timeStr = new Date().toTimeString();\n    timeStr = timeStr.substring(0, (0, _indexOf.default)(timeStr).call(timeStr, ' '));\n    const combinedMsg = (0, _reduce.default)(args).call(args, (acc, cur) => {\n      if (typeof cur === 'string') {\n        return `${acc} ${cur}`;\n      }\n      return `${acc} ${(0, _stringify.default)(cur, null, 4)}`;\n    }, message);\n    rawMethod(`[${timeStr}] ${methodName.toUpperCase()}: ${combinedMsg}`);\n  };\n};\nconst numLevels = {\n  0: 'TRACE',\n  1: 'DEBUG',\n  2: 'INFO',\n  3: 'WARN',\n  4: 'ERROR',\n  5: 'SILENT'\n};\n_loglevel.default.levelEnums = {\n  TRACE: 0,\n  DEBUG: 1,\n  INFO: 2,\n  WARN: 3,\n  ERROR: 4,\n  SILENT: 5\n};\n_loglevel.default.setLevel('INFO');\n_loglevel.default.setLogLevel = level => {\n  var _context, _context2;\n  if (!(0, _includes.default)(_context = (0, _keys.default)(numLevels)).call(_context, level) && !(0, _includes.default)(_context2 = (0, _keys.default)(_loglevel.default.levelEnums)).call(_context2, level)) {\n    throw new Error(`Invalid log level ${level}`);\n  }\n  _loglevel.default.setLevel(level);\n  _loglevel.default.info('log level set to', numLevels[_loglevel.default.getLevel()]);\n};\n_loglevel.default.rawOutput = (level, msg) => {\n  let parsedLevel = level;\n  if (typeof level === 'string') {\n    var _context3;\n    if (!(0, _includes.default)(_context3 = (0, _keys.default)(_loglevel.default.levelEnums)).call(_context3, level)) {\n      throw new Error(`Invalid log level ${level}`);\n    }\n    parsedLevel = _loglevel.default.levelEnums[level];\n  }\n  if (parsedLevel >= _loglevel.default.getLevel()) {\n    console.log(msg); // eslint-disable-line no-console\n  }\n};\nvar _default = exports.default = _loglevel.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nbGV2ZWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm9yaWdpbmFsRmFjdG9yeSIsImxvZyIsIm1ldGhvZEZhY3RvcnkiLCJtZXRob2ROYW1lIiwibG9nTGV2ZWwiLCJsb2dnZXJOYW1lIiwicmF3TWV0aG9kIiwibWVzc2FnZSIsImFyZ3MiLCJ0aW1lU3RyIiwiRGF0ZSIsInRvVGltZVN0cmluZyIsInN1YnN0cmluZyIsIl9pbmRleE9mIiwiZGVmYXVsdCIsImNhbGwiLCJjb21iaW5lZE1zZyIsIl9yZWR1Y2UiLCJhY2MiLCJjdXIiLCJfc3RyaW5naWZ5IiwidG9VcHBlckNhc2UiLCJudW1MZXZlbHMiLCJsZXZlbEVudW1zIiwiVFJBQ0UiLCJERUJVRyIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJzZXRMZXZlbCIsInNldExvZ0xldmVsIiwibGV2ZWwiLCJfY29udGV4dCIsIl9jb250ZXh0MiIsIl9pbmNsdWRlcyIsIl9rZXlzIiwiRXJyb3IiLCJpbmZvIiwiZ2V0TGV2ZWwiLCJyYXdPdXRwdXQiLCJtc2ciLCJwYXJzZWRMZXZlbCIsIl9jb250ZXh0MyIsImNvbnNvbGUiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2V4b3VzZXIvRG9jdW1lbnRzL1Byb2plY3RzL2FuYWdpbmUvc3JjL3NlcnZlci8iLCJzb3VyY2VzIjpbImxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nIGZyb20gJ2xvZ2xldmVsJztcblxuY29uc3Qgb3JpZ2luYWxGYWN0b3J5ID0gbG9nLm1ldGhvZEZhY3Rvcnk7XG5sb2cubWV0aG9kRmFjdG9yeSA9IChtZXRob2ROYW1lLCBsb2dMZXZlbCwgbG9nZ2VyTmFtZSkgPT4ge1xuICAgIGNvbnN0IHJhd01ldGhvZCA9IG9yaWdpbmFsRmFjdG9yeShtZXRob2ROYW1lLCBsb2dMZXZlbCwgbG9nZ2VyTmFtZSk7XG5cbiAgICByZXR1cm4gKG1lc3NhZ2UsIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgbGV0IHRpbWVTdHIgPSAobmV3IERhdGUoKSkudG9UaW1lU3RyaW5nKCk7XG4gICAgICAgIHRpbWVTdHIgPSB0aW1lU3RyLnN1YnN0cmluZygwLCB0aW1lU3RyLmluZGV4T2YoJyAnKSk7XG4gICAgICAgIGNvbnN0IGNvbWJpbmVkTXNnID0gYXJncy5yZWR1Y2UoKGFjYywgY3VyKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgY3VyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIGAke2FjY30gJHtjdXJ9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7YWNjfSAke0pTT04uc3RyaW5naWZ5KGN1ciwgbnVsbCwgNCl9YDtcbiAgICAgICAgfSwgbWVzc2FnZSk7XG4gICAgICAgIHJhd01ldGhvZChgWyR7dGltZVN0cn1dICR7bWV0aG9kTmFtZS50b1VwcGVyQ2FzZSgpfTogJHtjb21iaW5lZE1zZ31gKTtcbiAgICB9O1xufTtcblxuY29uc3QgbnVtTGV2ZWxzID0ge1xuICAgIDA6ICdUUkFDRScsXG4gICAgMTogJ0RFQlVHJyxcbiAgICAyOiAnSU5GTycsXG4gICAgMzogJ1dBUk4nLFxuICAgIDQ6ICdFUlJPUicsXG4gICAgNTogJ1NJTEVOVCcsXG59O1xubG9nLmxldmVsRW51bXMgPSB7XG4gICAgVFJBQ0U6IDAsXG4gICAgREVCVUc6IDEsXG4gICAgSU5GTzogMixcbiAgICBXQVJOOiAzLFxuICAgIEVSUk9SOiA0LFxuICAgIFNJTEVOVDogNSxcbn07XG5cbmxvZy5zZXRMZXZlbCgnSU5GTycpO1xubG9nLnNldExvZ0xldmVsID0gKGxldmVsKSA9PiB7XG4gICAgaWYgKCFPYmplY3Qua2V5cyhudW1MZXZlbHMpLmluY2x1ZGVzKGxldmVsKSAmJiAhT2JqZWN0LmtleXMobG9nLmxldmVsRW51bXMpLmluY2x1ZGVzKGxldmVsKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbG9nIGxldmVsICR7bGV2ZWx9YCk7XG4gICAgfVxuICAgIGxvZy5zZXRMZXZlbChsZXZlbCk7XG4gICAgbG9nLmluZm8oJ2xvZyBsZXZlbCBzZXQgdG8nLCBudW1MZXZlbHNbbG9nLmdldExldmVsKCldKTtcbn07XG5cbmxvZy5yYXdPdXRwdXQgPSAobGV2ZWwsIG1zZykgPT4ge1xuICAgIGxldCBwYXJzZWRMZXZlbCA9IGxldmVsO1xuICAgIGlmICh0eXBlb2YgbGV2ZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICghT2JqZWN0LmtleXMobG9nLmxldmVsRW51bXMpLmluY2x1ZGVzKGxldmVsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGxvZyBsZXZlbCAke2xldmVsfWApO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlZExldmVsID0gbG9nLmxldmVsRW51bXNbbGV2ZWxdO1xuICAgIH1cbiAgICBpZiAocGFyc2VkTGV2ZWwgPj0gbG9nLmdldExldmVsKCkpIHtcbiAgICAgICAgY29uc29sZS5sb2cobXNnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgbG9nO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTUMsZUFBZSxHQUFHQyxpQkFBRyxDQUFDQyxhQUFhO0FBQ3pDRCxpQkFBRyxDQUFDQyxhQUFhLEdBQUcsQ0FBQ0MsVUFBVSxFQUFFQyxRQUFRLEVBQUVDLFVBQVUsS0FBSztFQUN0RCxNQUFNQyxTQUFTLEdBQUdOLGVBQWUsQ0FBQ0csVUFBVSxFQUFFQyxRQUFRLEVBQUVDLFVBQVUsQ0FBQztFQUVuRSxPQUFPLENBQUNFLE9BQU8sRUFBRSxHQUFHQyxJQUFJLEtBQUs7SUFDekIsSUFBSUMsT0FBTyxHQUFJLElBQUlDLElBQUksQ0FBQyxDQUFDLENBQUVDLFlBQVksQ0FBQyxDQUFDO0lBQ3pDRixPQUFPLEdBQUdBLE9BQU8sQ0FBQ0csU0FBUyxDQUFDLENBQUMsRUFBRSxJQUFBQyxRQUFBLENBQUFDLE9BQUEsRUFBQUwsT0FBTyxFQUFBTSxJQUFBLENBQVBOLE9BQU8sRUFBUyxHQUFHLENBQUMsQ0FBQztJQUNwRCxNQUFNTyxXQUFXLEdBQUcsSUFBQUMsT0FBQSxDQUFBSCxPQUFBLEVBQUFOLElBQUksRUFBQU8sSUFBQSxDQUFKUCxJQUFJLEVBQVEsQ0FBQ1UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7TUFDOUMsSUFBSSxPQUFPQSxHQUFHLEtBQUssUUFBUSxFQUFFO1FBQ3pCLE9BQU8sR0FBR0QsR0FBRyxJQUFJQyxHQUFHLEVBQUU7TUFDMUI7TUFDQSxPQUFPLEdBQUdELEdBQUcsSUFBSSxJQUFBRSxVQUFBLENBQUFOLE9BQUEsRUFBZUssR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRTtJQUMvQyxDQUFDLEVBQUVaLE9BQU8sQ0FBQztJQUNYRCxTQUFTLENBQUMsSUFBSUcsT0FBTyxLQUFLTixVQUFVLENBQUNrQixXQUFXLENBQUMsQ0FBQyxLQUFLTCxXQUFXLEVBQUUsQ0FBQztFQUN6RSxDQUFDO0FBQ0wsQ0FBQztBQUVELE1BQU1NLFNBQVMsR0FBRztFQUNkLENBQUMsRUFBRSxPQUFPO0VBQ1YsQ0FBQyxFQUFFLE9BQU87RUFDVixDQUFDLEVBQUUsTUFBTTtFQUNULENBQUMsRUFBRSxNQUFNO0VBQ1QsQ0FBQyxFQUFFLE9BQU87RUFDVixDQUFDLEVBQUU7QUFDUCxDQUFDO0FBQ0RyQixpQkFBRyxDQUFDc0IsVUFBVSxHQUFHO0VBQ2JDLEtBQUssRUFBRSxDQUFDO0VBQ1JDLEtBQUssRUFBRSxDQUFDO0VBQ1JDLElBQUksRUFBRSxDQUFDO0VBQ1BDLElBQUksRUFBRSxDQUFDO0VBQ1BDLEtBQUssRUFBRSxDQUFDO0VBQ1JDLE1BQU0sRUFBRTtBQUNaLENBQUM7QUFFRDVCLGlCQUFHLENBQUM2QixRQUFRLENBQUMsTUFBTSxDQUFDO0FBQ3BCN0IsaUJBQUcsQ0FBQzhCLFdBQVcsR0FBSUMsS0FBSyxJQUFLO0VBQUEsSUFBQUMsUUFBQSxFQUFBQyxTQUFBO0VBQ3pCLElBQUksQ0FBQyxJQUFBQyxTQUFBLENBQUFyQixPQUFBLEVBQUFtQixRQUFBLE9BQUFHLEtBQUEsQ0FBQXRCLE9BQUEsRUFBWVEsU0FBUyxDQUFDLEVBQUFQLElBQUEsQ0FBQWtCLFFBQUEsRUFBVUQsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFBRyxTQUFBLENBQUFyQixPQUFBLEVBQUFvQixTQUFBLE9BQUFFLEtBQUEsQ0FBQXRCLE9BQUEsRUFBWWIsaUJBQUcsQ0FBQ3NCLFVBQVUsQ0FBQyxFQUFBUixJQUFBLENBQUFtQixTQUFBLEVBQVVGLEtBQUssQ0FBQyxFQUFFO0lBQ3pGLE1BQU0sSUFBSUssS0FBSyxDQUFDLHFCQUFxQkwsS0FBSyxFQUFFLENBQUM7RUFDakQ7RUFDQS9CLGlCQUFHLENBQUM2QixRQUFRLENBQUNFLEtBQUssQ0FBQztFQUNuQi9CLGlCQUFHLENBQUNxQyxJQUFJLENBQUMsa0JBQWtCLEVBQUVoQixTQUFTLENBQUNyQixpQkFBRyxDQUFDc0MsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNELENBQUM7QUFFRHRDLGlCQUFHLENBQUN1QyxTQUFTLEdBQUcsQ0FBQ1IsS0FBSyxFQUFFUyxHQUFHLEtBQUs7RUFDNUIsSUFBSUMsV0FBVyxHQUFHVixLQUFLO0VBQ3ZCLElBQUksT0FBT0EsS0FBSyxLQUFLLFFBQVEsRUFBRTtJQUFBLElBQUFXLFNBQUE7SUFDM0IsSUFBSSxDQUFDLElBQUFSLFNBQUEsQ0FBQXJCLE9BQUEsRUFBQTZCLFNBQUEsT0FBQVAsS0FBQSxDQUFBdEIsT0FBQSxFQUFZYixpQkFBRyxDQUFDc0IsVUFBVSxDQUFDLEVBQUFSLElBQUEsQ0FBQTRCLFNBQUEsRUFBVVgsS0FBSyxDQUFDLEVBQUU7TUFDOUMsTUFBTSxJQUFJSyxLQUFLLENBQUMscUJBQXFCTCxLQUFLLEVBQUUsQ0FBQztJQUNqRDtJQUNBVSxXQUFXLEdBQUd6QyxpQkFBRyxDQUFDc0IsVUFBVSxDQUFDUyxLQUFLLENBQUM7RUFDdkM7RUFDQSxJQUFJVSxXQUFXLElBQUl6QyxpQkFBRyxDQUFDc0MsUUFBUSxDQUFDLENBQUMsRUFBRTtJQUMvQkssT0FBTyxDQUFDM0MsR0FBRyxDQUFDd0MsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN0QjtBQUNKLENBQUM7QUFBQyxJQUFBSSxRQUFBLEdBQUFDLE9BQUEsQ0FBQWhDLE9BQUEsR0FFYWIsaUJBQUciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_loglevel","_interopRequireDefault","require","originalFactory","log","methodFactory","methodName","logLevel","loggerName","rawMethod","message","args","timeStr","Date","toTimeString","substring","_indexOf","default","call","combinedMsg","_reduce","acc","cur","_stringify","toUpperCase","numLevels","levelEnums","TRACE","DEBUG","INFO","WARN","ERROR","SILENT","setLevel","setLogLevel","level","_context","_context2","_includes","_keys","Error","info","getLevel","rawOutput","msg","parsedLevel","_context3","console","_default","exports"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["logger.js"],"sourcesContent":["import log from 'loglevel';\n\nconst originalFactory = log.methodFactory;\nlog.methodFactory = (methodName, logLevel, loggerName) => {\n    const rawMethod = originalFactory(methodName, logLevel, loggerName);\n\n    return (message, ...args) => {\n        let timeStr = (new Date()).toTimeString();\n        timeStr = timeStr.substring(0, timeStr.indexOf(' '));\n        const combinedMsg = args.reduce((acc, cur) => {\n        if (typeof cur === 'string') {\n            return `${acc} ${cur}`;\n        }\n        return `${acc} ${JSON.stringify(cur, null, 4)}`;\n        }, message);\n        rawMethod(`[${timeStr}] ${methodName.toUpperCase()}: ${combinedMsg}`);\n    };\n};\n\nconst numLevels = {\n    0: 'TRACE',\n    1: 'DEBUG',\n    2: 'INFO',\n    3: 'WARN',\n    4: 'ERROR',\n    5: 'SILENT',\n};\nlog.levelEnums = {\n    TRACE: 0,\n    DEBUG: 1,\n    INFO: 2,\n    WARN: 3,\n    ERROR: 4,\n    SILENT: 5,\n};\n\nlog.setLevel('INFO');\nlog.setLogLevel = (level) => {\n    if (!Object.keys(numLevels).includes(level) && !Object.keys(log.levelEnums).includes(level)) {\n        throw new Error(`Invalid log level ${level}`);\n    }\n    log.setLevel(level);\n    log.info('log level set to', numLevels[log.getLevel()]);\n};\n\nlog.rawOutput = (level, msg) => {\n    let parsedLevel = level;\n    if (typeof level === 'string') {\n        if (!Object.keys(log.levelEnums).includes(level)) {\n            throw new Error(`Invalid log level ${level}`);\n        }\n        parsedLevel = log.levelEnums[level];\n    }\n    if (parsedLevel >= log.getLevel()) {\n        console.log(msg); // eslint-disable-line no-console\n    }\n};\n\nexport default log;\n"],"mappings":"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","ignoreList":[]}},"mtime":1741362793290},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _startsWith = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/starts-with\"));\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\nvar _fs = require(\"fs\");\nvar _logger = _interopRequireDefault(require(\"./logger\"));\nvar _context, _context2;\nlet inputConfig = {};\nif (process.env.ANAGINE_CONFIG_FILEPATH) {\n  const configFilepath = process.env.ANAGINE_CONFIG_FILEPATH;\n  inputConfig = JSON.parse((0, _fs.readFileSync)(configFilepath).toString());\n  _logger.default.info('[config] read anagine config from', configFilepath, (0, _stringify.default)(inputConfig, null, 4));\n}\nconst config = {\n  esConfig: {\n    host: 'localhost:9200',\n    authFilterField: inputConfig.auth_filter_field || 'auth_resource_path'\n  },\n  guppyConfig: {\n    host: 'localhost:3010'\n  },\n  ollamaConfig: {\n    host: \"localhost:11434\",\n    model: \"llama3.2:1b\"\n  },\n  port: 3000,\n  path: '/graphql',\n  arboristEndpoint: 'http://arborist-service',\n  tierAccessLevel: 'private',\n  tierAccessLimit: 1000,\n  tierAccessSensitiveRecordExclusionField: inputConfig.tier_access_sensitive_record_exclusion_field,\n  logLevel: inputConfig.log_level || 'INFO',\n  enableEncryptWhiteList: typeof inputConfig.enable_encrypt_whitelist === 'undefined' ? false : inputConfig.enable_encrypt_whitelist,\n  encryptWhitelist: inputConfig.encrypt_whitelist || ['__missing__', 'unknown', 'not reported', 'no data'],\n  analyzedTextFieldSuffix: '.analyzed',\n  matchedTextHighlightTagName: 'em',\n  allowedMinimumSearchLen: 2\n};\nif (process.env.GEN3_ES_ENDPOINT) {\n  config.esConfig.host = process.env.GEN3_ES_ENDPOINT;\n}\nif (!(0, _startsWith.default)(_context = config.esConfig.host).call(_context, 'http')) {\n  config.esConfig.host = `http://${config.esConfig.host}`;\n}\nif (!(0, _startsWith.default)(_context2 = config.guppyConfig.host).call(_context2, 'http')) {\n  config.guppyConfig.host = `http://${config.guppyConfig.host}`;\n}\nif (process.env.GEN3_ARBORIST_ENDPOINT) {\n  config.arboristEndpoint = process.env.GEN3_ARBORIST_ENDPOINT;\n}\nif (process.env.ANAGINE_PORT) {\n  config.port = process.env.ANAGINE_PORT;\n}\nconst allowedTierAccessLevels = ['private', 'regular', 'libre'];\nif (process.env.TIER_ACCESS_LEVEL) {\n  if (!(0, _includes.default)(allowedTierAccessLevels).call(allowedTierAccessLevels, process.env.TIER_ACCESS_LEVEL)) {\n    throw new Error(`Invalid TIER_ACCESS_LEVEL \"${process.env.TIER_ACCESS_LEVEL}\"`);\n  }\n  config.tierAccessLevel = process.env.TIER_ACCESS_LEVEL;\n}\nif (process.env.TIER_ACCESS_LIMIT) {\n  config.tierAccessLimit = process.env.TIER_ACCESS_LIMIT;\n}\nif (process.env.INTERNAL_LOCAL_TEST) {\n  config.internalLocalTest = process.env.INTERNAL_LOCAL_TEST;\n}\nif (process.env.LOG_LEVEL) {\n  config.logLevel = process.env.LOG_LEVEL;\n}\nif (process.env.ANALYZED_TEXT_FIELD_SUFFIX) {\n  config.analyzedTextFieldSuffix = process.env.ANALYZED_TEXT_FIELD_SUFFIX;\n}\n\n// Either all indices should have explicit index-scoped tiered-access values or\n// the manifest should have a site-wide TIER_ACCESS_LEVEL value.\n// This approach is backwards-compatible with commons configured for past versions of tiered-access.\nlet allIndicesHaveTierAccessSettings = true;\n\n// If the indices all have settings, empty out the default\n// site-wide TIER_ACCESS_LEVEL from the config.\nif (allIndicesHaveTierAccessSettings) {\n  delete config.tierAccessLevel;\n}\n\n// check whitelist is enabled\nif (config.enableEncryptWhiteList) {\n  if (typeof config.encryptWhitelist !== 'object') {\n    config.encryptWhitelist = [config.encryptWhitelist];\n  }\n} else {\n  config.encryptWhitelist = [];\n}\n_logger.default.setLogLevel(config.logLevel);\n_logger.default.info('[config] starting server using config', (0, _stringify.default)(config, null, 4));\nvar _default = exports.default = config;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZnMiLCJyZXF1aXJlIiwiX2xvZ2dlciIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfY29udGV4dCIsIl9jb250ZXh0MiIsImlucHV0Q29uZmlnIiwicHJvY2VzcyIsImVudiIsIkFOQUdJTkVfQ09ORklHX0ZJTEVQQVRIIiwiY29uZmlnRmlsZXBhdGgiLCJKU09OIiwicGFyc2UiLCJyZWFkRmlsZVN5bmMiLCJ0b1N0cmluZyIsImxvZyIsImluZm8iLCJfc3RyaW5naWZ5IiwiZGVmYXVsdCIsImNvbmZpZyIsImVzQ29uZmlnIiwiaG9zdCIsImF1dGhGaWx0ZXJGaWVsZCIsImF1dGhfZmlsdGVyX2ZpZWxkIiwiZ3VwcHlDb25maWciLCJvbGxhbWFDb25maWciLCJtb2RlbCIsInBvcnQiLCJwYXRoIiwiYXJib3Jpc3RFbmRwb2ludCIsInRpZXJBY2Nlc3NMZXZlbCIsInRpZXJBY2Nlc3NMaW1pdCIsInRpZXJBY2Nlc3NTZW5zaXRpdmVSZWNvcmRFeGNsdXNpb25GaWVsZCIsInRpZXJfYWNjZXNzX3NlbnNpdGl2ZV9yZWNvcmRfZXhjbHVzaW9uX2ZpZWxkIiwibG9nTGV2ZWwiLCJsb2dfbGV2ZWwiLCJlbmFibGVFbmNyeXB0V2hpdGVMaXN0IiwiZW5hYmxlX2VuY3J5cHRfd2hpdGVsaXN0IiwiZW5jcnlwdFdoaXRlbGlzdCIsImVuY3J5cHRfd2hpdGVsaXN0IiwiYW5hbHl6ZWRUZXh0RmllbGRTdWZmaXgiLCJtYXRjaGVkVGV4dEhpZ2hsaWdodFRhZ05hbWUiLCJhbGxvd2VkTWluaW11bVNlYXJjaExlbiIsIkdFTjNfRVNfRU5EUE9JTlQiLCJfc3RhcnRzV2l0aCIsImNhbGwiLCJHRU4zX0FSQk9SSVNUX0VORFBPSU5UIiwiQU5BR0lORV9QT1JUIiwiYWxsb3dlZFRpZXJBY2Nlc3NMZXZlbHMiLCJUSUVSX0FDQ0VTU19MRVZFTCIsIl9pbmNsdWRlcyIsIkVycm9yIiwiVElFUl9BQ0NFU1NfTElNSVQiLCJJTlRFUk5BTF9MT0NBTF9URVNUIiwiaW50ZXJuYWxMb2NhbFRlc3QiLCJMT0dfTEVWRUwiLCJBTkFMWVpFRF9URVhUX0ZJRUxEX1NVRkZJWCIsImFsbEluZGljZXNIYXZlVGllckFjY2Vzc1NldHRpbmdzIiwic2V0TG9nTGV2ZWwiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2V4b3VzZXIvRG9jdW1lbnRzL1Byb2plY3RzL2FuYWdpbmUvc3JjL3NlcnZlci8iLCJzb3VyY2VzIjpbImNvbmZpZy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZWFkRmlsZVN5bmMgfSBmcm9tICdmcyc7XG5pbXBvcnQgbG9nIGZyb20gJy4vbG9nZ2VyJztcblxubGV0IGlucHV0Q29uZmlnID0ge307XG5pZiAocHJvY2Vzcy5lbnYuQU5BR0lORV9DT05GSUdfRklMRVBBVEgpIHtcbiAgY29uc3QgY29uZmlnRmlsZXBhdGggPSBwcm9jZXNzLmVudi5BTkFHSU5FX0NPTkZJR19GSUxFUEFUSDtcbiAgaW5wdXRDb25maWcgPSBKU09OLnBhcnNlKHJlYWRGaWxlU3luYyhjb25maWdGaWxlcGF0aCkudG9TdHJpbmcoKSk7XG4gIGxvZy5pbmZvKCdbY29uZmlnXSByZWFkIGFuYWdpbmUgY29uZmlnIGZyb20nLCBjb25maWdGaWxlcGF0aCwgSlNPTi5zdHJpbmdpZnkoaW5wdXRDb25maWcsIG51bGwsIDQpKTtcbn1cblxuY29uc3QgY29uZmlnID0ge1xuICAgIGVzQ29uZmlnOiB7XG4gICAgICAgIGhvc3Q6ICdsb2NhbGhvc3Q6OTIwMCcsXG4gICAgICAgIGF1dGhGaWx0ZXJGaWVsZDogaW5wdXRDb25maWcuYXV0aF9maWx0ZXJfZmllbGQgfHwgJ2F1dGhfcmVzb3VyY2VfcGF0aCcsXG4gICAgfSxcbiAgICBndXBweUNvbmZpZzoge1xuICAgICAgICBob3N0OiAnbG9jYWxob3N0OjMwMTAnLFxuICAgIH0sXG4gICAgb2xsYW1hQ29uZmlnOiB7XG4gICAgICAgIGhvc3Q6IFwibG9jYWxob3N0OjExNDM0XCIsXG4gICAgICAgIG1vZGVsOiBcImxsYW1hMy4yOjFiXCIsXG4gICAgfSxcbiAgICBwb3J0OiAzMDAwLFxuICAgIHBhdGg6ICcvZ3JhcGhxbCcsXG4gICAgYXJib3Jpc3RFbmRwb2ludDogJ2h0dHA6Ly9hcmJvcmlzdC1zZXJ2aWNlJyxcbiAgICB0aWVyQWNjZXNzTGV2ZWw6ICdwcml2YXRlJyxcbiAgICB0aWVyQWNjZXNzTGltaXQ6IDEwMDAsXG4gICAgdGllckFjY2Vzc1NlbnNpdGl2ZVJlY29yZEV4Y2x1c2lvbkZpZWxkOiBpbnB1dENvbmZpZy50aWVyX2FjY2Vzc19zZW5zaXRpdmVfcmVjb3JkX2V4Y2x1c2lvbl9maWVsZCxcbiAgICBsb2dMZXZlbDogaW5wdXRDb25maWcubG9nX2xldmVsIHx8ICdJTkZPJyxcbiAgICBlbmFibGVFbmNyeXB0V2hpdGVMaXN0OiB0eXBlb2YgaW5wdXRDb25maWcuZW5hYmxlX2VuY3J5cHRfd2hpdGVsaXN0ID09PSAndW5kZWZpbmVkJyA/IGZhbHNlIDogaW5wdXRDb25maWcuZW5hYmxlX2VuY3J5cHRfd2hpdGVsaXN0LFxuICAgIGVuY3J5cHRXaGl0ZWxpc3Q6IGlucHV0Q29uZmlnLmVuY3J5cHRfd2hpdGVsaXN0IHx8IFsnX19taXNzaW5nX18nLCAndW5rbm93bicsICdub3QgcmVwb3J0ZWQnLCAnbm8gZGF0YSddLFxuICAgIGFuYWx5emVkVGV4dEZpZWxkU3VmZml4OiAnLmFuYWx5emVkJyxcbiAgICBtYXRjaGVkVGV4dEhpZ2hsaWdodFRhZ05hbWU6ICdlbScsXG4gICAgYWxsb3dlZE1pbmltdW1TZWFyY2hMZW46IDIsXG59O1xuXG5pZiAocHJvY2Vzcy5lbnYuR0VOM19FU19FTkRQT0lOVCkge1xuICAgIGNvbmZpZy5lc0NvbmZpZy5ob3N0ID0gcHJvY2Vzcy5lbnYuR0VOM19FU19FTkRQT0lOVDtcbn1cbmlmICghY29uZmlnLmVzQ29uZmlnLmhvc3Quc3RhcnRzV2l0aCgnaHR0cCcpKSB7XG4gICAgY29uZmlnLmVzQ29uZmlnLmhvc3QgPSBgaHR0cDovLyR7Y29uZmlnLmVzQ29uZmlnLmhvc3R9YDtcbn1cblxuaWYgKCFjb25maWcuZ3VwcHlDb25maWcuaG9zdC5zdGFydHNXaXRoKCdodHRwJykpIHtcbiAgICBjb25maWcuZ3VwcHlDb25maWcuaG9zdCA9IGBodHRwOi8vJHtjb25maWcuZ3VwcHlDb25maWcuaG9zdH1gO1xufVxuXG5pZiAocHJvY2Vzcy5lbnYuR0VOM19BUkJPUklTVF9FTkRQT0lOVCkge1xuICAgIGNvbmZpZy5hcmJvcmlzdEVuZHBvaW50ID0gcHJvY2Vzcy5lbnYuR0VOM19BUkJPUklTVF9FTkRQT0lOVDtcbn1cblxuaWYgKHByb2Nlc3MuZW52LkFOQUdJTkVfUE9SVCkge1xuICAgIGNvbmZpZy5wb3J0ID0gcHJvY2Vzcy5lbnYuQU5BR0lORV9QT1JUO1xufVxuXG5jb25zdCBhbGxvd2VkVGllckFjY2Vzc0xldmVscyA9IFsncHJpdmF0ZScsICdyZWd1bGFyJywgJ2xpYnJlJ107XG5cbmlmIChwcm9jZXNzLmVudi5USUVSX0FDQ0VTU19MRVZFTCkge1xuICAgIGlmICghYWxsb3dlZFRpZXJBY2Nlc3NMZXZlbHMuaW5jbHVkZXMocHJvY2Vzcy5lbnYuVElFUl9BQ0NFU1NfTEVWRUwpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBUSUVSX0FDQ0VTU19MRVZFTCBcIiR7cHJvY2Vzcy5lbnYuVElFUl9BQ0NFU1NfTEVWRUx9XCJgKTtcbiAgICB9XG4gICAgY29uZmlnLnRpZXJBY2Nlc3NMZXZlbCA9IHByb2Nlc3MuZW52LlRJRVJfQUNDRVNTX0xFVkVMO1xufVxuXG5pZiAocHJvY2Vzcy5lbnYuVElFUl9BQ0NFU1NfTElNSVQpIHtcbiAgICBjb25maWcudGllckFjY2Vzc0xpbWl0ID0gcHJvY2Vzcy5lbnYuVElFUl9BQ0NFU1NfTElNSVQ7XG59XG5cbmlmIChwcm9jZXNzLmVudi5JTlRFUk5BTF9MT0NBTF9URVNUKSB7XG4gICAgY29uZmlnLmludGVybmFsTG9jYWxUZXN0ID0gcHJvY2Vzcy5lbnYuSU5URVJOQUxfTE9DQUxfVEVTVDtcbn1cblxuaWYgKHByb2Nlc3MuZW52LkxPR19MRVZFTCkge1xuICAgIGNvbmZpZy5sb2dMZXZlbCA9IHByb2Nlc3MuZW52LkxPR19MRVZFTDtcbn1cblxuaWYgKHByb2Nlc3MuZW52LkFOQUxZWkVEX1RFWFRfRklFTERfU1VGRklYKSB7XG4gICAgY29uZmlnLmFuYWx5emVkVGV4dEZpZWxkU3VmZml4ID0gcHJvY2Vzcy5lbnYuQU5BTFlaRURfVEVYVF9GSUVMRF9TVUZGSVg7XG59XG5cbi8vIEVpdGhlciBhbGwgaW5kaWNlcyBzaG91bGQgaGF2ZSBleHBsaWNpdCBpbmRleC1zY29wZWQgdGllcmVkLWFjY2VzcyB2YWx1ZXMgb3Jcbi8vIHRoZSBtYW5pZmVzdCBzaG91bGQgaGF2ZSBhIHNpdGUtd2lkZSBUSUVSX0FDQ0VTU19MRVZFTCB2YWx1ZS5cbi8vIFRoaXMgYXBwcm9hY2ggaXMgYmFja3dhcmRzLWNvbXBhdGlibGUgd2l0aCBjb21tb25zIGNvbmZpZ3VyZWQgZm9yIHBhc3QgdmVyc2lvbnMgb2YgdGllcmVkLWFjY2Vzcy5cbmxldCBhbGxJbmRpY2VzSGF2ZVRpZXJBY2Nlc3NTZXR0aW5ncyA9IHRydWU7XG5cbi8vIElmIHRoZSBpbmRpY2VzIGFsbCBoYXZlIHNldHRpbmdzLCBlbXB0eSBvdXQgdGhlIGRlZmF1bHRcbi8vIHNpdGUtd2lkZSBUSUVSX0FDQ0VTU19MRVZFTCBmcm9tIHRoZSBjb25maWcuXG5pZiAoYWxsSW5kaWNlc0hhdmVUaWVyQWNjZXNzU2V0dGluZ3MpIHtcbiAgICBkZWxldGUgY29uZmlnLnRpZXJBY2Nlc3NMZXZlbDtcbn1cblxuLy8gY2hlY2sgd2hpdGVsaXN0IGlzIGVuYWJsZWRcbmlmIChjb25maWcuZW5hYmxlRW5jcnlwdFdoaXRlTGlzdCkge1xuICAgIGlmICh0eXBlb2YgY29uZmlnLmVuY3J5cHRXaGl0ZWxpc3QgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIGNvbmZpZy5lbmNyeXB0V2hpdGVsaXN0ID0gW2NvbmZpZy5lbmNyeXB0V2hpdGVsaXN0XTtcbiAgICB9XG59IGVsc2Uge1xuICAgIGNvbmZpZy5lbmNyeXB0V2hpdGVsaXN0ID0gW107XG59XG5cbmxvZy5zZXRMb2dMZXZlbChjb25maWcubG9nTGV2ZWwpO1xubG9nLmluZm8oJ1tjb25maWddIHN0YXJ0aW5nIHNlcnZlciB1c2luZyBjb25maWcnLCBKU09OLnN0cmluZ2lmeShjb25maWcsIG51bGwsIDQpKTtcblxuZXhwb3J0IGRlZmF1bHQgY29uZmlnO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBLElBQUFBLEdBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUYsT0FBQTtBQUEyQixJQUFBRyxRQUFBLEVBQUFDLFNBQUE7QUFFM0IsSUFBSUMsV0FBVyxHQUFHLENBQUMsQ0FBQztBQUNwQixJQUFJQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsdUJBQXVCLEVBQUU7RUFDdkMsTUFBTUMsY0FBYyxHQUFHSCxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsdUJBQXVCO0VBQzFESCxXQUFXLEdBQUdLLElBQUksQ0FBQ0MsS0FBSyxDQUFDLElBQUFDLGdCQUFZLEVBQUNILGNBQWMsQ0FBQyxDQUFDSSxRQUFRLENBQUMsQ0FBQyxDQUFDO0VBQ2pFQyxlQUFHLENBQUNDLElBQUksQ0FBQyxtQ0FBbUMsRUFBRU4sY0FBYyxFQUFFLElBQUFPLFVBQUEsQ0FBQUMsT0FBQSxFQUFlWixXQUFXLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0FBQ3JHO0FBRUEsTUFBTWEsTUFBTSxHQUFHO0VBQ1hDLFFBQVEsRUFBRTtJQUNOQyxJQUFJLEVBQUUsZ0JBQWdCO0lBQ3RCQyxlQUFlLEVBQUVoQixXQUFXLENBQUNpQixpQkFBaUIsSUFBSTtFQUN0RCxDQUFDO0VBQ0RDLFdBQVcsRUFBRTtJQUNUSCxJQUFJLEVBQUU7RUFDVixDQUFDO0VBQ0RJLFlBQVksRUFBRTtJQUNWSixJQUFJLEVBQUUsaUJBQWlCO0lBQ3ZCSyxLQUFLLEVBQUU7RUFDWCxDQUFDO0VBQ0RDLElBQUksRUFBRSxJQUFJO0VBQ1ZDLElB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","map":{"version":3,"names":["_fs","require","_logger","_interopRequireDefault","_context","_context2","inputConfig","process","env","ANAGINE_CONFIG_FILEPATH","configFilepath","JSON","parse","readFileSync","toString","log","info","_stringify","default","config","esConfig","host","authFilterField","auth_filter_field","guppyConfig","ollamaConfig","model","port","path","arboristEndpoint","tierAccessLevel","tierAccessLimit","tierAccessSensitiveRecordExclusionField","tier_access_sensitive_record_exclusion_field","logLevel","log_level","enableEncryptWhiteList","enable_encrypt_whitelist","encryptWhitelist","encrypt_whitelist","analyzedTextFieldSuffix","matchedTextHighlightTagName","allowedMinimumSearchLen","GEN3_ES_ENDPOINT","_startsWith","call","GEN3_ARBORIST_ENDPOINT","ANAGINE_PORT","allowedTierAccessLevels","TIER_ACCESS_LEVEL","_includes","Error","TIER_ACCESS_LIMIT","INTERNAL_LOCAL_TEST","internalLocalTest","LOG_LEVEL","ANALYZED_TEXT_FIELD_SUFFIX","allIndicesHaveTierAccessSettings","setLogLevel","_default","exports"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["config.js"],"sourcesContent":["import { readFileSync } from 'fs';\nimport log from './logger';\n\nlet inputConfig = {};\nif (process.env.ANAGINE_CONFIG_FILEPATH) {\n  const configFilepath = process.env.ANAGINE_CONFIG_FILEPATH;\n  inputConfig = JSON.parse(readFileSync(configFilepath).toString());\n  log.info('[config] read anagine config from', configFilepath, JSON.stringify(inputConfig, null, 4));\n}\n\nconst config = {\n    esConfig: {\n        host: 'localhost:9200',\n        authFilterField: inputConfig.auth_filter_field || 'auth_resource_path',\n    },\n    guppyConfig: {\n        host: 'localhost:3010',\n    },\n    ollamaConfig: {\n        host: \"localhost:11434\",\n        model: \"llama3.2:1b\",\n    },\n    port: 3000,\n    path: '/graphql',\n    arboristEndpoint: 'http://arborist-service',\n    tierAccessLevel: 'private',\n    tierAccessLimit: 1000,\n    tierAccessSensitiveRecordExclusionField: inputConfig.tier_access_sensitive_record_exclusion_field,\n    logLevel: inputConfig.log_level || 'INFO',\n    enableEncryptWhiteList: typeof inputConfig.enable_encrypt_whitelist === 'undefined' ? false : inputConfig.enable_encrypt_whitelist,\n    encryptWhitelist: inputConfig.encrypt_whitelist || ['__missing__', 'unknown', 'not reported', 'no data'],\n    analyzedTextFieldSuffix: '.analyzed',\n    matchedTextHighlightTagName: 'em',\n    allowedMinimumSearchLen: 2,\n};\n\nif (process.env.GEN3_ES_ENDPOINT) {\n    config.esConfig.host = process.env.GEN3_ES_ENDPOINT;\n}\nif (!config.esConfig.host.startsWith('http')) {\n    config.esConfig.host = `http://${config.esConfig.host}`;\n}\n\nif (!config.guppyConfig.host.startsWith('http')) {\n    config.guppyConfig.host = `http://${config.guppyConfig.host}`;\n}\n\nif (process.env.GEN3_ARBORIST_ENDPOINT) {\n    config.arboristEndpoint = process.env.GEN3_ARBORIST_ENDPOINT;\n}\n\nif (process.env.ANAGINE_PORT) {\n    config.port = process.env.ANAGINE_PORT;\n}\n\nconst allowedTierAccessLevels = ['private', 'regular', 'libre'];\n\nif (process.env.TIER_ACCESS_LEVEL) {\n    if (!allowedTierAccessLevels.includes(process.env.TIER_ACCESS_LEVEL)) {\n        throw new Error(`Invalid TIER_ACCESS_LEVEL \"${process.env.TIER_ACCESS_LEVEL}\"`);\n    }\n    config.tierAccessLevel = process.env.TIER_ACCESS_LEVEL;\n}\n\nif (process.env.TIER_ACCESS_LIMIT) {\n    config.tierAccessLimit = process.env.TIER_ACCESS_LIMIT;\n}\n\nif (process.env.INTERNAL_LOCAL_TEST) {\n    config.internalLocalTest = process.env.INTERNAL_LOCAL_TEST;\n}\n\nif (process.env.LOG_LEVEL) {\n    config.logLevel = process.env.LOG_LEVEL;\n}\n\nif (process.env.ANALYZED_TEXT_FIELD_SUFFIX) {\n    config.analyzedTextFieldSuffix = process.env.ANALYZED_TEXT_FIELD_SUFFIX;\n}\n\n// Either all indices should have explicit index-scoped tiered-access values or\n// the manifest should have a site-wide TIER_ACCESS_LEVEL value.\n// This approach is backwards-compatible with commons configured for past versions of tiered-access.\nlet allIndicesHaveTierAccessSettings = true;\n\n// If the indices all have settings, empty out the default\n// site-wide TIER_ACCESS_LEVEL from the config.\nif (allIndicesHaveTierAccessSettings) {\n    delete config.tierAccessLevel;\n}\n\n// check whitelist is enabled\nif (config.enableEncryptWhiteList) {\n    if (typeof config.encryptWhitelist !== 'object') {\n        config.encryptWhitelist = [config.encryptWhitelist];\n    }\n} else {\n    config.encryptWhitelist = [];\n}\n\nlog.setLogLevel(config.logLevel);\nlog.info('[config] starting server using config', JSON.stringify(config, null, 4));\n\nexport default config;\n"],"mappings":"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","ignoreList":[]}},"mtime":1745556616599},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/logger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\nvar _reduce = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/reduce\"));\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\nvar _loglevel = _interopRequireDefault(require(\"loglevel\"));\nconst originalFactory = _loglevel.default.methodFactory;\n_loglevel.default.methodFactory = (methodName, logLevel, loggerName) => {\n  const rawMethod = originalFactory(methodName, logLevel, loggerName);\n  return (message, ...args) => {\n    let timeStr = new Date().toTimeString();\n    timeStr = timeStr.substring(0, (0, _indexOf.default)(timeStr).call(timeStr, ' '));\n    const combinedMsg = (0, _reduce.default)(args).call(args, (acc, cur) => {\n      if (typeof cur === 'string') {\n        return `${acc} ${cur}`;\n      }\n      return `${acc} ${(0, _stringify.default)(cur, null, 4)}`;\n    }, message);\n    rawMethod(`[${timeStr}] ${methodName.toUpperCase()}: ${combinedMsg}`);\n  };\n};\nconst numLevels = {\n  0: 'TRACE',\n  1: 'DEBUG',\n  2: 'INFO',\n  3: 'WARN',\n  4: 'ERROR',\n  5: 'SILENT'\n};\n_loglevel.default.levelEnums = {\n  TRACE: 0,\n  DEBUG: 1,\n  INFO: 2,\n  WARN: 3,\n  ERROR: 4,\n  SILENT: 5\n};\n_loglevel.default.setLevel('INFO');\n_loglevel.default.setLogLevel = level => {\n  var _context, _context2;\n  if (!(0, _includes.default)(_context = (0, _keys.default)(numLevels)).call(_context, level) && !(0, _includes.default)(_context2 = (0, _keys.default)(_loglevel.default.levelEnums)).call(_context2, level)) {\n    throw new Error(`Invalid log level ${level}`);\n  }\n  _loglevel.default.setLevel(level);\n  _loglevel.default.info('log level set to', numLevels[_loglevel.default.getLevel()]);\n};\n_loglevel.default.rawOutput = (level, msg) => {\n  let parsedLevel = level;\n  if (typeof level === 'string') {\n    var _context3;\n    if (!(0, _includes.default)(_context3 = (0, _keys.default)(_loglevel.default.levelEnums)).call(_context3, level)) {\n      throw new Error(`Invalid log level ${level}`);\n    }\n    parsedLevel = _loglevel.default.levelEnums[level];\n  }\n  if (parsedLevel >= _loglevel.default.getLevel()) {\n    console.log(msg); // eslint-disable-line no-console\n  }\n};\nvar _default = exports.default = _loglevel.default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9nbGV2ZWwiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIm9yaWdpbmFsRmFjdG9yeSIsImxvZyIsIm1ldGhvZEZhY3RvcnkiLCJtZXRob2ROYW1lIiwibG9nTGV2ZWwiLCJsb2dnZXJOYW1lIiwicmF3TWV0aG9kIiwibWVzc2FnZSIsImFyZ3MiLCJ0aW1lU3RyIiwiRGF0ZSIsInRvVGltZVN0cmluZyIsInN1YnN0cmluZyIsIl9pbmRleE9mIiwiZGVmYXVsdCIsImNhbGwiLCJjb21iaW5lZE1zZyIsIl9yZWR1Y2UiLCJhY2MiLCJjdXIiLCJfc3RyaW5naWZ5IiwidG9VcHBlckNhc2UiLCJudW1MZXZlbHMiLCJsZXZlbEVudW1zIiwiVFJBQ0UiLCJERUJVRyIsIklORk8iLCJXQVJOIiwiRVJST1IiLCJTSUxFTlQiLCJzZXRMZXZlbCIsInNldExvZ0xldmVsIiwibGV2ZWwiLCJfY29udGV4dCIsIl9jb250ZXh0MiIsIl9pbmNsdWRlcyIsIl9rZXlzIiwiRXJyb3IiLCJpbmZvIiwiZ2V0TGV2ZWwiLCJyYXdPdXRwdXQiLCJtc2ciLCJwYXJzZWRMZXZlbCIsIl9jb250ZXh0MyIsImNvbnNvbGUiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2V4b3VzZXIvRG9jdW1lbnRzL1Byb2plY3RzL2FuYWdpbmUvc3JjL3NlcnZlci8iLCJzb3VyY2VzIjpbImxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbG9nIGZyb20gJ2xvZ2xldmVsJztcblxuY29uc3Qgb3JpZ2luYWxGYWN0b3J5ID0gbG9nLm1ldGhvZEZhY3Rvcnk7XG5sb2cubWV0aG9kRmFjdG9yeSA9IChtZXRob2ROYW1lLCBsb2dMZXZlbCwgbG9nZ2VyTmFtZSkgPT4ge1xuICAgIGNvbnN0IHJhd01ldGhvZCA9IG9yaWdpbmFsRmFjdG9yeShtZXRob2ROYW1lLCBsb2dMZXZlbCwgbG9nZ2VyTmFtZSk7XG5cbiAgICByZXR1cm4gKG1lc3NhZ2UsIC4uLmFyZ3MpID0+IHtcbiAgICAgICAgbGV0IHRpbWVTdHIgPSAobmV3IERhdGUoKSkudG9UaW1lU3RyaW5nKCk7XG4gICAgICAgIHRpbWVTdHIgPSB0aW1lU3RyLnN1YnN0cmluZygwLCB0aW1lU3RyLmluZGV4T2YoJyAnKSk7XG4gICAgICAgIGNvbnN0IGNvbWJpbmVkTXNnID0gYXJncy5yZWR1Y2UoKGFjYywgY3VyKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgY3VyID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcmV0dXJuIGAke2FjY30gJHtjdXJ9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7YWNjfSAke0pTT04uc3RyaW5naWZ5KGN1ciwgbnVsbCwgNCl9YDtcbiAgICAgICAgfSwgbWVzc2FnZSk7XG4gICAgICAgIHJhd01ldGhvZChgWyR7dGltZVN0cn1dICR7bWV0aG9kTmFtZS50b1VwcGVyQ2FzZSgpfTogJHtjb21iaW5lZE1zZ31gKTtcbiAgICB9O1xufTtcblxuY29uc3QgbnVtTGV2ZWxzID0ge1xuICAgIDA6ICdUUkFDRScsXG4gICAgMTogJ0RFQlVHJyxcbiAgICAyOiAnSU5GTycsXG4gICAgMzogJ1dBUk4nLFxuICAgIDQ6ICdFUlJPUicsXG4gICAgNTogJ1NJTEVOVCcsXG59O1xubG9nLmxldmVsRW51bXMgPSB7XG4gICAgVFJBQ0U6IDAsXG4gICAgREVCVUc6IDEsXG4gICAgSU5GTzogMixcbiAgICBXQVJOOiAzLFxuICAgIEVSUk9SOiA0LFxuICAgIFNJTEVOVDogNSxcbn07XG5cbmxvZy5zZXRMZXZlbCgnSU5GTycpO1xubG9nLnNldExvZ0xldmVsID0gKGxldmVsKSA9PiB7XG4gICAgaWYgKCFPYmplY3Qua2V5cyhudW1MZXZlbHMpLmluY2x1ZGVzKGxldmVsKSAmJiAhT2JqZWN0LmtleXMobG9nLmxldmVsRW51bXMpLmluY2x1ZGVzKGxldmVsKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgbG9nIGxldmVsICR7bGV2ZWx9YCk7XG4gICAgfVxuICAgIGxvZy5zZXRMZXZlbChsZXZlbCk7XG4gICAgbG9nLmluZm8oJ2xvZyBsZXZlbCBzZXQgdG8nLCBudW1MZXZlbHNbbG9nLmdldExldmVsKCldKTtcbn07XG5cbmxvZy5yYXdPdXRwdXQgPSAobGV2ZWwsIG1zZykgPT4ge1xuICAgIGxldCBwYXJzZWRMZXZlbCA9IGxldmVsO1xuICAgIGlmICh0eXBlb2YgbGV2ZWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICghT2JqZWN0LmtleXMobG9nLmxldmVsRW51bXMpLmluY2x1ZGVzKGxldmVsKSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGxvZyBsZXZlbCAke2xldmVsfWApO1xuICAgICAgICB9XG4gICAgICAgIHBhcnNlZExldmVsID0gbG9nLmxldmVsRW51bXNbbGV2ZWxdO1xuICAgIH1cbiAgICBpZiAocGFyc2VkTGV2ZWwgPj0gbG9nLmdldExldmVsKCkpIHtcbiAgICAgICAgY29uc29sZS5sb2cobXNnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlXG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgbG9nO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTUMsZUFBZSxHQUFHQyxpQkFBRyxDQUFDQyxhQUFhO0FBQ3pDRCxpQkFBRyxDQUFDQyxhQUFhLEdBQUcsQ0FBQ0MsVUFBVSxFQUFFQyxRQUFRLEVBQUVDLFVBQVUsS0FBSztFQUN0RCxNQUFNQyxTQUFTLEdBQUdOLGVBQWUsQ0FBQ0csVUFBVSxFQUFFQyxRQUFRLEVBQUVDLFVBQVUsQ0FBQztFQUVuRSxPQUFPLENBQUNFLE9BQU8sRUFBRSxHQUFHQyxJQUFJLEtBQUs7SUFDekIsSUFBSUMsT0FBTyxHQUFJLElBQUlDLElBQUksQ0FBQyxDQUFDLENBQUVDLFlBQVksQ0FBQyxDQUFDO0lBQ3pDRixPQUFPLEdBQUdBLE9BQU8sQ0FBQ0csU0FBUyxDQUFDLENBQUMsRUFBRSxJQUFBQyxRQUFBLENBQUFDLE9BQUEsRUFBQUwsT0FBTyxFQUFBTSxJQUFBLENBQVBOLE9BQU8sRUFBUyxHQUFHLENBQUMsQ0FBQztJQUNwRCxNQUFNTyxXQUFXLEdBQUcsSUFBQUMsT0FBQSxDQUFBSCxPQUFBLEVBQUFOLElBQUksRUFBQU8sSUFBQSxDQUFKUCxJQUFJLEVBQVEsQ0FBQ1UsR0FBRyxFQUFFQyxHQUFHLEtBQUs7TUFDOUMsSUFBSSxPQUFPQSxHQUFHLEtBQUssUUFBUSxFQUFFO1FBQ3pCLE9BQU8sR0FBR0QsR0FBRyxJQUFJQyxHQUFHLEVBQUU7TUFDMUI7TUFDQSxPQUFPLEdBQUdELEdBQUcsSUFBSSxJQUFBRSxVQUFBLENBQUFOLE9BQUEsRUFBZUssR0FBRyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRTtJQUMvQyxDQUFDLEVBQUVaLE9BQU8sQ0FBQztJQUNYRCxTQUFTLENBQUMsSUFBSUcsT0FBTyxLQUFLTixVQUFVLENBQUNrQixXQUFXLENBQUMsQ0FBQyxLQUFLTCxXQUFXLEVBQUUsQ0FBQztFQUN6RSxDQUFDO0FBQ0wsQ0FBQztBQUVELE1BQU1NLFNBQVMsR0FBRztFQUNkLENBQUMsRUFBRSxPQUFPO0VBQ1YsQ0FBQyxFQUFFLE9BQU87RUFDVixDQUFDLEVBQUUsTUFBTTtFQUNULENBQUMsRUFBRSxNQUFNO0VBQ1QsQ0FBQyxFQUFFLE9BQU87RUFDVixDQUFDLEVBQUU7QUFDUCxDQUFDO0FBQ0RyQixpQkFBRyxDQUFDc0IsVUFBVSxHQUFHO0VBQ2JDLEtBQUssRUFBRSxDQUFDO0VBQ1JDLEtBQUssRUFBRSxDQUFDO0VBQ1JDLElBQUksRUFBRSxDQUFDO0VBQ1BDLElBQUksRUFBRSxDQUFDO0VBQ1BDLEtBQUssRUFBRSxDQUFDO0VBQ1JDLE1BQU0sRUFBRTtBQUNaLENBQUM7QUFFRDVCLGlCQUFHLENBQUM2QixRQUFRLENBQUMsTUFBTSxDQUFDO0FBQ3BCN0IsaUJBQUcsQ0FBQzhCLFdBQVcsR0FBSUMsS0FBSyxJQUFLO0VBQUEsSUFBQUMsUUFBQSxFQUFBQyxTQUFBO0VBQ3pCLElBQUksQ0FBQyxJQUFBQyxTQUFBLENBQUFyQixPQUFBLEVBQUFtQixRQUFBLE9BQUFHLEtBQUEsQ0FBQXRCLE9BQUEsRUFBWVEsU0FBUyxDQUFDLEVBQUFQLElBQUEsQ0FBQWtCLFFBQUEsRUFBVUQsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFBRyxTQUFBLENBQUFyQixPQUFBLEVBQUFvQixTQUFBLE9BQUFFLEtBQUEsQ0FBQXRCLE9BQUEsRUFBWWIsaUJBQUcsQ0FBQ3NCLFVBQVUsQ0FBQyxFQUFBUixJQUFBLENBQUFtQixTQUFBLEVBQVVGLEtBQUssQ0FBQyxFQUFFO0lBQ3pGLE1BQU0sSUFBSUssS0FBSyxDQUFDLHFCQUFxQkwsS0FBSyxFQUFFLENBQUM7RUFDakQ7RUFDQS9CLGlCQUFHLENBQUM2QixRQUFRLENBQUNFLEtBQUssQ0FBQztFQUNuQi9CLGlCQUFHLENBQUNxQyxJQUFJLENBQUMsa0JBQWtCLEVBQUVoQixTQUFTLENBQUNyQixpQkFBRyxDQUFDc0MsUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzNELENBQUM7QUFFRHRDLGlCQUFHLENBQUN1QyxTQUFTLEdBQUcsQ0FBQ1IsS0FBSyxFQUFFUyxHQUFHLEtBQUs7RUFDNUIsSUFBSUMsV0FBVyxHQUFHVixLQUFLO0VBQ3ZCLElBQUksT0FBT0EsS0FBSyxLQUFLLFFBQVEsRUFBRTtJQUFBLElBQUFXLFNBQUE7SUFDM0IsSUFBSSxDQUFDLElBQUFSLFNBQUEsQ0FBQXJCLE9BQUEsRUFBQTZCLFNBQUEsT0FBQVAsS0FBQSxDQUFBdEIsT0FBQSxFQUFZYixpQkFBRyxDQUFDc0IsVUFBVSxDQUFDLEVBQUFSLElBQUEsQ0FBQTRCLFNBQUEsRUFBVVgsS0FBSyxDQUFDLEVBQUU7TUFDOUMsTUFBTSxJQUFJSyxLQUFLLENBQUMscUJBQXFCTCxLQUFLLEVBQUUsQ0FBQztJQUNqRDtJQUNBVSxXQUFXLEdBQUd6QyxpQkFBRyxDQUFDc0IsVUFBVSxDQUFDUyxLQUFLLENBQUM7RUFDdkM7RUFDQSxJQUFJVSxXQUFXLElBQUl6QyxpQkFBRyxDQUFDc0MsUUFBUSxDQUFDLENBQUMsRUFBRTtJQUMvQkssT0FBTyxDQUFDM0MsR0FBRyxDQUFDd0MsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN0QjtBQUNKLENBQUM7QUFBQyxJQUFBSSxRQUFBLEdBQUFDLE9BQUEsQ0FBQWhDLE9BQUEsR0FFYWIsaUJBQUciLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_loglevel","_interopRequireDefault","require","originalFactory","log","methodFactory","methodName","logLevel","loggerName","rawMethod","message","args","timeStr","Date","toTimeString","substring","_indexOf","default","call","combinedMsg","_reduce","acc","cur","_stringify","toUpperCase","numLevels","levelEnums","TRACE","DEBUG","INFO","WARN","ERROR","SILENT","setLevel","setLogLevel","level","_context","_context2","_includes","_keys","Error","info","getLevel","rawOutput","msg","parsedLevel","_context3","console","_default","exports"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["logger.js"],"sourcesContent":["import log from 'loglevel';\n\nconst originalFactory = log.methodFactory;\nlog.methodFactory = (methodName, logLevel, loggerName) => {\n    const rawMethod = originalFactory(methodName, logLevel, loggerName);\n\n    return (message, ...args) => {\n        let timeStr = (new Date()).toTimeString();\n        timeStr = timeStr.substring(0, timeStr.indexOf(' '));\n        const combinedMsg = args.reduce((acc, cur) => {\n        if (typeof cur === 'string') {\n            return `${acc} ${cur}`;\n        }\n        return `${acc} ${JSON.stringify(cur, null, 4)}`;\n        }, message);\n        rawMethod(`[${timeStr}] ${methodName.toUpperCase()}: ${combinedMsg}`);\n    };\n};\n\nconst numLevels = {\n    0: 'TRACE',\n    1: 'DEBUG',\n    2: 'INFO',\n    3: 'WARN',\n    4: 'ERROR',\n    5: 'SILENT',\n};\nlog.levelEnums = {\n    TRACE: 0,\n    DEBUG: 1,\n    INFO: 2,\n    WARN: 3,\n    ERROR: 4,\n    SILENT: 5,\n};\n\nlog.setLevel('INFO');\nlog.setLogLevel = (level) => {\n    if (!Object.keys(numLevels).includes(level) && !Object.keys(log.levelEnums).includes(level)) {\n        throw new Error(`Invalid log level ${level}`);\n    }\n    log.setLevel(level);\n    log.info('log level set to', numLevels[log.getLevel()]);\n};\n\nlog.rawOutput = (level, msg) => {\n    let parsedLevel = level;\n    if (typeof level === 'string') {\n        if (!Object.keys(log.levelEnums).includes(level)) {\n            throw new Error(`Invalid log level ${level}`);\n        }\n        parsedLevel = log.levelEnums[level];\n    }\n    if (parsedLevel >= log.getLevel()) {\n        console.log(msg); // eslint-disable-line no-console\n    }\n};\n\nexport default log;\n"],"mappings":"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","ignoreList":[]}},"mtime":1741362793290},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/headerParser.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst parseJWT = req => {\n  const authHeader = req.headers.authorization || null;\n  let jwt = null;\n  if (authHeader != null) {\n    const parts = authHeader.split(' ');\n    if (parts.length === 2) {\n      if (parts[0].toLowerCase() === 'bearer') {\n        jwt = parts[1]; // eslint-disable-line\n      }\n    }\n  }\n  return jwt;\n};\nvar _default = exports.default = {\n  parseJWT\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYXJzZUpXVCIsInJlcSIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImp3dCIsInBhcnRzIiwic3BsaXQiLCJsZW5ndGgiLCJ0b0xvd2VyQ2FzZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9ob21lL2V4b3VzZXIvRG9jdW1lbnRzL1Byb2plY3RzL2FuYWdpbmUvc3JjL3NlcnZlci91dGlscy8iLCJzb3VyY2VzIjpbImhlYWRlclBhcnNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwYXJzZUpXVCA9IChyZXEpID0+IHtcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbiB8fCBudWxsO1xuICAgIGxldCBqd3QgPSBudWxsO1xuICAgIGlmIChhdXRoSGVhZGVyICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBhdXRoSGVhZGVyLnNwbGl0KCcgJyk7XG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0c1swXS50b0xvd2VyQ2FzZSgpID09PSAnYmVhcmVyJykge1xuICAgICAgICAgICAgICAgIGp3dCA9IHBhcnRzWzFdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGp3dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBwYXJzZUpXVCxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxNQUFNQSxRQUFRLEdBQUlDLEdBQUcsSUFBSztFQUN0QixNQUFNQyxVQUFVLEdBQUdELEdBQUcsQ0FBQ0UsT0FBTyxDQUFDQyxhQUFhLElBQUksSUFBSTtFQUNwRCxJQUFJQyxHQUFHLEdBQUcsSUFBSTtFQUNkLElBQUlILFVBQVUsSUFBSSxJQUFJLEVBQUU7SUFDcEIsTUFBTUksS0FBSyxHQUFHSixVQUFVLENBQUNLLEtBQUssQ0FBQyxHQUFHLENBQUM7SUFDbkMsSUFBSUQsS0FBSyxDQUFDRSxNQUFNLEtBQUssQ0FBQyxFQUFFO01BQ3BCLElBQUlGLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQ0csV0FBVyxDQUFDLENBQUMsS0FBSyxRQUFRLEVBQUU7UUFDckNKLEdBQUcsR0FBR0MsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDcEI7SUFDSjtFQUNKO0VBQ0EsT0FBT0QsR0FBRztBQUNkLENBQUM7QUFBQyxJQUFBSyxRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUVhO0VBQ1haO0FBQ0osQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["parseJWT","req","authHeader","headers","authorization","jwt","parts","split","length","toLowerCase","_default","exports","default"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/utils/","sources":["headerParser.js"],"sourcesContent":["const parseJWT = (req) => {\n    const authHeader = req.headers.authorization || null;\n    let jwt = null;\n    if (authHeader != null) {\n        const parts = authHeader.split(' ');\n        if (parts.length === 2) {\n            if (parts[0].toLowerCase() === 'bearer') {\n                jwt = parts[1]; // eslint-disable-line\n            }\n        }\n    }\n    return jwt;\n};\n\nexport default {\n    parseJWT,\n};\n"],"mappings":";;;;;;;AAAA,MAAMA,QAAQ,GAAIC,GAAG,IAAK;EACtB,MAAMC,UAAU,GAAGD,GAAG,CAACE,OAAO,CAACC,aAAa,IAAI,IAAI;EACpD,IAAIC,GAAG,GAAG,IAAI;EACd,IAAIH,UAAU,IAAI,IAAI,EAAE;IACpB,MAAMI,KAAK,GAAGJ,UAAU,CAACK,KAAK,CAAC,GAAG,CAAC;IACnC,IAAID,KAAK,CAACE,MAAM,KAAK,CAAC,EAAE;MACpB,IAAIF,KAAK,CAAC,CAAC,CAAC,CAACG,WAAW,CAAC,CAAC,KAAK,QAAQ,EAAE;QACrCJ,GAAG,GAAGC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;MACpB;IACJ;EACJ;EACA,OAAOD,GAAG;AACd,CAAC;AAAC,IAAAK,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEa;EACXZ;AACJ,CAAC","ignoreList":[]}},"mtime":1741363353336},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/headerParser.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nconst parseJWT = req => {\n  const authHeader = req.headers.authorization || null;\n  let jwt = null;\n  if (authHeader != null) {\n    const parts = authHeader.split(' ');\n    if (parts.length === 2) {\n      if (parts[0].toLowerCase() === 'bearer') {\n        jwt = parts[1]; // eslint-disable-line\n      }\n    }\n  }\n  return jwt;\n};\nvar _default = exports.default = {\n  parseJWT\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwYXJzZUpXVCIsInJlcSIsImF1dGhIZWFkZXIiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImp3dCIsInBhcnRzIiwic3BsaXQiLCJsZW5ndGgiLCJ0b0xvd2VyQ2FzZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9ob21lL2V4b3VzZXIvRG9jdW1lbnRzL1Byb2plY3RzL2FuYWdpbmUvc3JjL3NlcnZlci91dGlscy8iLCJzb3VyY2VzIjpbImhlYWRlclBhcnNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwYXJzZUpXVCA9IChyZXEpID0+IHtcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbiB8fCBudWxsO1xuICAgIGxldCBqd3QgPSBudWxsO1xuICAgIGlmIChhdXRoSGVhZGVyICE9IG51bGwpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBhdXRoSGVhZGVyLnNwbGl0KCcgJyk7XG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICAgIGlmIChwYXJ0c1swXS50b0xvd2VyQ2FzZSgpID09PSAnYmVhcmVyJykge1xuICAgICAgICAgICAgICAgIGp3dCA9IHBhcnRzWzFdOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGp3dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBwYXJzZUpXVCxcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxNQUFNQSxRQUFRLEdBQUlDLEdBQUcsSUFBSztFQUN0QixNQUFNQyxVQUFVLEdBQUdELEdBQUcsQ0FBQ0UsT0FBTyxDQUFDQyxhQUFhLElBQUksSUFBSTtFQUNwRCxJQUFJQyxHQUFHLEdBQUcsSUFBSTtFQUNkLElBQUlILFVBQVUsSUFBSSxJQUFJLEVBQUU7SUFDcEIsTUFBTUksS0FBSyxHQUFHSixVQUFVLENBQUNLLEtBQUssQ0FBQyxHQUFHLENBQUM7SUFDbkMsSUFBSUQsS0FBSyxDQUFDRSxNQUFNLEtBQUssQ0FBQyxFQUFFO01BQ3BCLElBQUlGLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQ0csV0FBVyxDQUFDLENBQUMsS0FBSyxRQUFRLEVBQUU7UUFDckNKLEdBQUcsR0FBR0MsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDcEI7SUFDSjtFQUNKO0VBQ0EsT0FBT0QsR0FBRztBQUNkLENBQUM7QUFBQyxJQUFBSyxRQUFBLEdBQUFDLE9BQUEsQ0FBQUMsT0FBQSxHQUVhO0VBQ1haO0FBQ0osQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["parseJWT","req","authHeader","headers","authorization","jwt","parts","split","length","toLowerCase","_default","exports","default"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/utils/","sources":["headerParser.js"],"sourcesContent":["const parseJWT = (req) => {\n    const authHeader = req.headers.authorization || null;\n    let jwt = null;\n    if (authHeader != null) {\n        const parts = authHeader.split(' ');\n        if (parts.length === 2) {\n            if (parts[0].toLowerCase() === 'bearer') {\n                jwt = parts[1]; // eslint-disable-line\n            }\n        }\n    }\n    return jwt;\n};\n\nexport default {\n    parseJWT,\n};\n"],"mappings":";;;;;;;AAAA,MAAMA,QAAQ,GAAIC,GAAG,IAAK;EACtB,MAAMC,UAAU,GAAGD,GAAG,CAACE,OAAO,CAACC,aAAa,IAAI,IAAI;EACpD,IAAIC,GAAG,GAAG,IAAI;EACd,IAAIH,UAAU,IAAI,IAAI,EAAE;IACpB,MAAMI,KAAK,GAAGJ,UAAU,CAACK,KAAK,CAAC,GAAG,CAAC;IACnC,IAAID,KAAK,CAACE,MAAM,KAAK,CAAC,EAAE;MACpB,IAAIF,KAAK,CAAC,CAAC,CAAC,CAACG,WAAW,CAAC,CAAC,KAAK,QAAQ,EAAE;QACrCJ,GAAG,GAAGC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;MACpB;IACJ;EACJ;EACA,OAAOD,GAAG;AACd,CAAC;AAAC,IAAAK,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEa;EACXZ;AACJ,CAAC","ignoreList":[]}},"mtime":1741363353336},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/auth/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/auth/authHelper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.AuthHelper = void 0;\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\nvar _utils = require(\"../utils/utils\");\nvar _logger = _interopRequireDefault(require(\"../logger\"));\nvar _utils2 = require(\"./utils\");\nvar _config = _interopRequireDefault(require(\"../config\"));\nclass AuthHelper {\n  constructor(jwt) {\n    this._jwt = jwt;\n  }\n  async initialize() {\n    try {\n      var _context;\n      this._accessibleResourceList = await (0, _utils2.getAccessibleResourcesFromArboristasync)(this._jwt);\n      _logger.default.debug('[AuthHelper] accessible resources:', this._accessibleResourceList);\n      const promiseList = [];\n      (0, _forEach.default)(_context = _config.default.esConfig.indices).call(_context, ({\n        index,\n        type\n      }) => {\n        const subListPromise = this.getOutOfScopeResourceList(index, type);\n        promiseList.push(subListPromise);\n      });\n      const listResult = await _promise.default.all(promiseList);\n      this._unaccessibleResourceList = [];\n      (0, _forEach.default)(listResult).call(listResult, list => {\n        this._unaccessibleResourceList = _lodash.default.union(this._unaccessibleResourceList, list);\n      });\n      _logger.default.debug('[AuthHelper] unaccessible resources:', this._unaccessibleResourceList);\n    } catch (err) {\n      _logger.default.error('[AuthHelper] error when initializing:', err);\n    }\n  }\n  getAccessibleResources() {\n    return this._accessibleResourceList;\n  }\n  getUnaccessibleResources() {\n    return this._unaccessibleResourceList;\n  }\n  async getOutOfScopeResourceList(esIndex, esType, filter, filterSelf) {\n    const requestResourceList = await (0, _utils2.getRequestResourceListFromFilter)(esIndex, esType, filter, filterSelf);\n    _logger.default.debug('[AuthHelper] filter:', filter);\n    _logger.default.debug(`[AuthHelper] request resource list: [${requestResourceList.join(', ')}]`);\n    const outOfScopeResourceList = _lodash.default.difference(requestResourceList, this._accessibleResourceList);\n    _logger.default.debug(`[AuthHelper] out-of-scope resource list: [${outOfScopeResourceList.join(', ')}]`);\n    return outOfScopeResourceList;\n  }\n  applyAccessibleFilter(filter) {\n    const accessiblePart = (0, _utils2.buildFilterWithResourceList)(this._accessibleResourceList);\n    const appliedFilter = (0, _utils.addTwoFilters)(filter, accessiblePart);\n    return appliedFilter;\n  }\n  applyUnaccessibleFilter(filter) {\n    const unaccessiblePart = (0, _utils2.buildFilterWithResourceList)(this._unaccessibleResourceList);\n    const appliedFilter = (0, _utils.addTwoFilters)(filter, unaccessiblePart);\n    return appliedFilter;\n  }\n  getDefaultFilter(accessibility) {\n    if (accessibility === 'all') {\n      return {};\n    }\n    if (accessibility === 'accessible') {\n      return this.applyAccessibleFilter();\n    }\n    if (accessibility === 'unaccessible') {\n      return this.applyUnaccessibleFilter();\n    }\n    throw new Error(`Invalid accessibility argument: ${accessibility}`);\n  }\n}\nexports.AuthHelper = AuthHelper;\nconst getAuthHelperInstance = async jwt => {\n  const authHelper = new AuthHelper(jwt);\n  await authHelper.initialize();\n  return authHelper;\n};\nvar _default = exports.default = getAuthHelperInstance;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9kYXNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXRpbHMiLCJfbG9nZ2VyIiwiX3V0aWxzMiIsIl9jb25maWciLCJBdXRoSGVscGVyIiwiY29uc3RydWN0b3IiLCJqd3QiLCJfand0IiwiaW5pdGlhbGl6ZSIsIl9jb250ZXh0IiwiX2FjY2Vzc2libGVSZXNvdXJjZUxpc3QiLCJnZXRBY2Nlc3NpYmxlUmVzb3VyY2VzRnJvbUFyYm9yaXN0YXN5bmMiLCJsb2ciLCJkZWJ1ZyIsInByb21pc2VMaXN0IiwiX2ZvckVhY2giLCJkZWZhdWx0IiwiY29uZmlnIiwiZXNDb25maWciLCJpbmRpY2VzIiwiY2FsbCIsImluZGV4IiwidHlwZSIsInN1Ykxpc3RQcm9taXNlIiwiZ2V0T3V0T2ZTY29wZVJlc291cmNlTGlzdCIsInB1c2giLCJsaXN0UmVzdWx0IiwiX3Byb21pc2UiLCJhbGwiLCJfdW5hY2Nlc3NpYmxlUmVzb3VyY2VMaXN0IiwibGlzdCIsIl8iLCJ1bmlvbiIsImVyciIsImVycm9yIiwiZ2V0QWNjZXNzaWJsZVJlc291cmNlcyIsImdldFVuYWNjZXNzaWJsZVJlc291cmNlcyIsImVzSW5kZXgiLCJlc1R5cGUiLCJmaWx0ZXIiLCJmaWx0ZXJTZWxmIiwicmVxdWVzdFJlc291cmNlTGlzdCIsImdldFJlcXVlc3RSZXNvdXJjZUxpc3RGcm9tRmlsdGVyIiwiam9pbiIsIm91dE9mU2NvcGVSZXNvdXJjZUxpc3QiLCJkaWZmZXJlbmNlIiwiYXBwbHlBY2Nlc3NpYmxlRmlsdGVyIiwiYWNjZXNzaWJsZVBhcnQiLCJidWlsZEZpbHRlcldpdGhSZXNvdXJjZUxpc3QiLCJhcHBsaWVkRmlsdGVyIiwiYWRkVHdvRmlsdGVycyIsImFwcGx5VW5hY2Nlc3NpYmxlRmlsdGVyIiwidW5hY2Nlc3NpYmxlUGFydCIsImdldERlZmF1bHRGaWx0ZXIiLCJhY2Nlc3NpYmlsaXR5IiwiRXJyb3IiLCJleHBvcnRzIiwiZ2V0QXV0aEhlbHBlckluc3RhbmNlIiwiYXV0aEhlbHBlciIsIl9kZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9leG91c2VyL0RvY3VtZW50cy9Qcm9qZWN0cy9hbmFnaW5lL3NyYy9zZXJ2ZXIvYXV0aC8iLCJzb3VyY2VzIjpbImF1dGhIZWxwZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGFkZFR3b0ZpbHRlcnMgfSBmcm9tICcuLi91dGlscy91dGlscyc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQge1xuICAgIGdldFJlcXVlc3RSZXNvdXJjZUxpc3RGcm9tRmlsdGVyLFxuICAgIGJ1aWxkRmlsdGVyV2l0aFJlc291cmNlTGlzdCxcbiAgICBnZXRBY2Nlc3NpYmxlUmVzb3VyY2VzRnJvbUFyYm9yaXN0YXN5bmMsXG59IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xuXG5leHBvcnQgY2xhc3MgQXV0aEhlbHBlciB7XG4gICAgY29uc3RydWN0b3Ioand0KSB7XG4gICAgICAgIHRoaXMuX2p3dCA9IGp3dDtcbiAgICB9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fYWNjZXNzaWJsZVJlc291cmNlTGlzdCA9IGF3YWl0IGdldEFjY2Vzc2libGVSZXNvdXJjZXNGcm9tQXJib3Jpc3Rhc3luYyh0aGlzLl9qd3QpO1xuICAgICAgICAgICAgbG9nLmRlYnVnKCdbQXV0aEhlbHBlcl0gYWNjZXNzaWJsZSByZXNvdXJjZXM6JywgdGhpcy5fYWNjZXNzaWJsZVJlc291cmNlTGlzdCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHByb21pc2VMaXN0ID0gW107XG4gICAgICAgICAgICBjb25maWcuZXNDb25maWcuaW5kaWNlcy5mb3JFYWNoKCh7IGluZGV4LCB0eXBlIH0pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJMaXN0UHJvbWlzZSA9IHRoaXMuZ2V0T3V0T2ZTY29wZVJlc291cmNlTGlzdChpbmRleCwgdHlwZSk7XG4gICAgICAgICAgICAgICAgcHJvbWlzZUxpc3QucHVzaChzdWJMaXN0UHJvbWlzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RSZXN1bHQgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlTGlzdCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3VuYWNjZXNzaWJsZVJlc291cmNlTGlzdCA9IFtdO1xuICAgICAgICAgICAgbGlzdFJlc3VsdC5mb3JFYWNoKChsaXN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdW5hY2Nlc3NpYmxlUmVzb3VyY2VMaXN0ID0gXy51bmlvbih0aGlzLl91bmFjY2Vzc2libGVSZXNvdXJjZUxpc3QsIGxpc3QpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsb2cuZGVidWcoJ1tBdXRoSGVscGVyXSB1bmFjY2Vzc2libGUgcmVzb3VyY2VzOicsIHRoaXMuX3VuYWNjZXNzaWJsZVJlc291cmNlTGlzdCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgbG9nLmVycm9yKCdbQXV0aEhlbHBlcl0gZXJyb3Igd2hlbiBpbml0aWFsaXppbmc6JywgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEFjY2Vzc2libGVSZXNvdXJjZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hY2Nlc3NpYmxlUmVzb3VyY2VMaXN0O1xuICAgIH1cblxuICAgIGdldFVuYWNjZXNzaWJsZVJlc291cmNlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VuYWNjZXNzaWJsZVJlc291cmNlTGlzdDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRPdXRPZlNjb3BlUmVzb3VyY2VMaXN0KGVzSW5kZXgsIGVzVHlwZSwgZmlsdGVyLCBmaWx0ZXJTZWxmKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RSZXNvdXJjZUxpc3QgPSBhd2FpdCBnZXRSZXF1ZXN0UmVzb3VyY2VMaXN0RnJvbUZpbHRlcihcbiAgICAgICAgICAgIGVzSW5kZXgsXG4gICAgICAgICAgICBlc1R5cGUsXG4gICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICBmaWx0ZXJTZWxmLFxuICAgICAgICApO1xuICAgICAgICBsb2cuZGVidWcoJ1tBdXRoSGVscGVyXSBmaWx0ZXI6JywgZmlsdGVyKTtcbiAgICAgICAgbG9nLmRlYnVnKGBbQXV0aEhlbHBlcl0gcmVxdWVzdCByZXNvdXJjZSBsaXN0OiBbJHtyZXF1ZXN0UmVzb3VyY2VMaXN0LmpvaW4oJywgJyl9XWApO1xuICAgICAgICBjb25zdCBvdXRPZlNjb3BlUmVzb3VyY2VMaXN0ID0gXy5kaWZmZXJlbmNlKHJlcXVlc3RSZXNvdXJjZUxpc3QsIHRoaXMuX2FjY2Vzc2libGVSZXNvdXJjZUxpc3QpO1xuICAgICAgICBsb2cuZGVidWcoYFtBdXRoSGVscGVyXSBvdXQtb2Ytc2NvcGUgcmVzb3VyY2UgbGlzdDogWyR7b3V0T2ZTY29wZVJlc291cmNlTGlzdC5qb2luKCcsICcpfV1gKTtcbiAgICAgICAgcmV0dXJuIG91dE9mU2NvcGVSZXNvdXJjZUxpc3Q7XG4gICAgfVxuXG4gICAgYXBwbHlBY2Nlc3NpYmxlRmlsdGVyKGZpbHRlcikge1xuICAgICAgICBjb25zdCBhY2Nlc3NpYmxlUGFydCA9IGJ1aWxkRmlsdGVyV2l0aFJlc291cmNlTGlzdCh0aGlzLl9hY2Nlc3NpYmxlUmVzb3VyY2VMaXN0KTtcbiAgICAgICAgY29uc3QgYXBwbGllZEZpbHRlciA9IGFkZFR3b0ZpbHRlcnMoZmlsdGVyLCBhY2Nlc3NpYmxlUGFydCk7XG4gICAgICAgIHJldHVybiBhcHBsaWVkRmlsdGVyO1xuICAgIH1cblxuICAgIGFwcGx5VW5hY2Nlc3NpYmxlRmlsdGVyKGZpbHRlcikge1xuICAgICAgICBjb25zdCB1bmFjY2Vzc2libGVQYXJ0ID0gYnVpbGRGaWx0ZXJXaXRoUmVzb3VyY2VMaXN0KHRoaXMuX3VuYWNjZXNzaWJsZVJlc291cmNlTGlzdCk7XG4gICAgICAgIGNvbnN0IGFwcGxpZWRGaWx0ZXIgPSBhZGRUd29GaWx0ZXJzKGZpbHRlciwgdW5hY2Nlc3NpYmxlUGFydCk7XG4gICAgICAgIHJldHVybiBhcHBsaWVkRmlsdGVyO1xuICAgIH1cblxuICAgIGdldERlZmF1bHRGaWx0ZXIoYWNjZXNzaWJpbGl0eSkge1xuICAgICAgICBpZiAoYWNjZXNzaWJpbGl0eSA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWNjZXNzaWJpbGl0eSA9PT0gJ2FjY2Vzc2libGUnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcHBseUFjY2Vzc2libGVGaWx0ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWNjZXNzaWJpbGl0eSA9PT0gJ3VuYWNjZXNzaWJsZScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFwcGx5VW5hY2Nlc3NpYmxlRmlsdGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFjY2Vzc2liaWxpdHkgYXJndW1lbnQ6ICR7YWNjZXNzaWJpbGl0eX1gKTtcbiAgICB9XG59XG5cbiAgICBjb25zdCBnZXRBdXRoSGVscGVySW5zdGFuY2UgPSBhc3luYyAoand0KSA9PiB7XG4gICAgY29uc3QgYXV0aEhlbHBlciA9IG5ldyBBdXRoSGVscGVyKGp3dCk7XG4gICAgYXdhaXQgYXV0aEhlbHBlci5pbml0aWFsaXplKCk7XG4gICAgcmV0dXJuIGF1dGhIZWxwZXI7XG4gICAgfTtcblxuZXhwb3J0IGRlZmF1bHQgZ2V0QXV0aEhlbHBlckluc3RhbmNlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsT0FBQSxHQUFB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","map":{"version":3,"names":["_lodash","_interopRequireDefault","require","_utils","_logger","_utils2","_config","AuthHelper","constructor","jwt","_jwt","initialize","_context","_accessibleResourceList","getAccessibleResourcesFromArboristasync","log","debug","promiseList","_forEach","default","config","esConfig","indices","call","index","type","subListPromise","getOutOfScopeResourceList","push","listResult","_promise","all","_unaccessibleResourceList","list","_","union","err","error","getAccessibleResources","getUnaccessibleResources","esIndex","esType","filter","filterSelf","requestResourceList","getRequestResourceListFromFilter","join","outOfScopeResourceList","difference","applyAccessibleFilter","accessiblePart","buildFilterWithResourceList","appliedFilter","addTwoFilters","applyUnaccessibleFilter","unaccessiblePart","getDefaultFilter","accessibility","Error","exports","getAuthHelperInstance","authHelper","_default"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/auth/","sources":["authHelper.js"],"sourcesContent":["import _ from 'lodash';\nimport { addTwoFilters } from '../utils/utils';\nimport log from '../logger';\nimport {\n    getRequestResourceListFromFilter,\n    buildFilterWithResourceList,\n    getAccessibleResourcesFromArboristasync,\n} from './utils';\nimport config from '../config';\n\nexport class AuthHelper {\n    constructor(jwt) {\n        this._jwt = jwt;\n    }\n\n    async initialize() {\n        try {\n            this._accessibleResourceList = await getAccessibleResourcesFromArboristasync(this._jwt);\n            log.debug('[AuthHelper] accessible resources:', this._accessibleResourceList);\n\n            const promiseList = [];\n            config.esConfig.indices.forEach(({ index, type }) => {\n                const subListPromise = this.getOutOfScopeResourceList(index, type);\n                promiseList.push(subListPromise);\n            });\n            const listResult = await Promise.all(promiseList);\n\n            this._unaccessibleResourceList = [];\n            listResult.forEach((list) => {\n                this._unaccessibleResourceList = _.union(this._unaccessibleResourceList, list);\n            });\n            log.debug('[AuthHelper] unaccessible resources:', this._unaccessibleResourceList);\n        } catch (err) {\n            log.error('[AuthHelper] error when initializing:', err);\n        }\n    }\n\n    getAccessibleResources() {\n        return this._accessibleResourceList;\n    }\n\n    getUnaccessibleResources() {\n        return this._unaccessibleResourceList;\n    }\n\n    async getOutOfScopeResourceList(esIndex, esType, filter, filterSelf) {\n        const requestResourceList = await getRequestResourceListFromFilter(\n            esIndex,\n            esType,\n            filter,\n            filterSelf,\n        );\n        log.debug('[AuthHelper] filter:', filter);\n        log.debug(`[AuthHelper] request resource list: [${requestResourceList.join(', ')}]`);\n        const outOfScopeResourceList = _.difference(requestResourceList, this._accessibleResourceList);\n        log.debug(`[AuthHelper] out-of-scope resource list: [${outOfScopeResourceList.join(', ')}]`);\n        return outOfScopeResourceList;\n    }\n\n    applyAccessibleFilter(filter) {\n        const accessiblePart = buildFilterWithResourceList(this._accessibleResourceList);\n        const appliedFilter = addTwoFilters(filter, accessiblePart);\n        return appliedFilter;\n    }\n\n    applyUnaccessibleFilter(filter) {\n        const unaccessiblePart = buildFilterWithResourceList(this._unaccessibleResourceList);\n        const appliedFilter = addTwoFilters(filter, unaccessiblePart);\n        return appliedFilter;\n    }\n\n    getDefaultFilter(accessibility) {\n        if (accessibility === 'all') {\n            return {};\n        }\n        if (accessibility === 'accessible') {\n            return this.applyAccessibleFilter();\n        }\n        if (accessibility === 'unaccessible') {\n            return this.applyUnaccessibleFilter();\n        }\n        throw new Error(`Invalid accessibility argument: ${accessibility}`);\n    }\n}\n\n    const getAuthHelperInstance = async (jwt) => {\n    const authHelper = new AuthHelper(jwt);\n    await authHelper.initialize();\n    return authHelper;\n    };\n\nexport default getAuthHelperInstance;\n"],"mappings":"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","ignoreList":[]}},"mtime":1741363181274},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.transferSlashStyleToDashStyle = exports.processNestedFieldNames = exports.isWhitelisted = exports.fromFieldsToSource = exports.firstLetterUpperCase = exports.filterFieldMapping = exports.buildNestedFieldMapping = exports.buildNestedField = exports.addTwoFilters = void 0;\nvar _slice = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/slice\"));\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\nvar _values = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/values\"));\nvar _lastIndexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/last-index-of\"));\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\nvar _assign = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/assign\"));\nvar _config = _interopRequireDefault(require(\"../config\"));\nvar _logger = _interopRequireDefault(require(\"../logger\"));\nconst firstLetterUpperCase = str => str.charAt(0).toUpperCase() + (0, _slice.default)(str).call(str, 1);\n\n/**\n * transfer '/programs/DEV/projects/test' to 'DEV-test'\n */\nexports.firstLetterUpperCase = firstLetterUpperCase;\nconst transferSlashStyleToDashStyle = str => {\n  const reg = /^\\/programs\\/(.*)\\/projects\\/(.*)$/;\n  const matchResult = str.match(reg);\n  if (!matchResult) return null;\n  if (matchResult.length !== 3 || matchResult[0] !== str) return null;\n  const programName = matchResult[1];\n  const projectName = matchResult[2];\n  return `${programName}-${projectName}`;\n};\nexports.transferSlashStyleToDashStyle = transferSlashStyleToDashStyle;\nconst addTwoFilters = (filter1, filter2) => {\n  if (!filter1 && !filter2) return {};\n  if (!filter1) return filter2;\n  if (!filter2) return filter1;\n  const appliedFilter = {\n    AND: [filter1, filter2]\n  };\n  return appliedFilter;\n};\nexports.addTwoFilters = addTwoFilters;\nconst isWhitelisted = key => {\n  var _context;\n  const lowerCasedWhitelist = (0, _map.default)(_context = _config.default.encryptWhitelist).call(_context, w => {\n    if (typeof w === 'string') {\n      return w.toLowerCase();\n    }\n    return w;\n  });\n  const lowerCasedKey = typeof key === 'string' ? key.toLowerCase() : key;\n  return (0, _includes.default)(lowerCasedWhitelist).call(lowerCasedWhitelist, lowerCasedKey);\n};\n\n/**\n * Convert from fields of graphql query produced by graphql library to list of querying fields\n * This list will be put to _source fields of the ES query\n * @param parsedInfo: parsing information from graphql library\n * @returns: list of selected fields.\n */\nexports.isWhitelisted = isWhitelisted;\nconst fromFieldsToSource = parsedInfo => {\n  let stack = (0, _values.default)(parsedInfo.fieldsByTypeName[firstLetterUpperCase(parsedInfo.name)]);\n  const levels = {\n    0: stack.length\n  };\n  const fields = [];\n  let curNodeName = '';\n  let currentLevel = 0;\n  while (stack.length > 0) {\n    if (levels[currentLevel] === 0) {\n      currentLevel -= 1;\n      const lastPeriod = (0, _lastIndexOf.default)(curNodeName).call(curNodeName, '.');\n      curNodeName = (0, _slice.default)(curNodeName).call(curNodeName, 0, lastPeriod !== -1 ? lastPeriod : 0);\n    } else {\n      var _context2;\n      const cur = stack.pop();\n      const newTypeName = cur.name;\n      const fieldName = (0, _filter.default)(_context2 = [curNodeName, newTypeName]).call(_context2, s => s.length > 0).join('.');\n      if (newTypeName in cur.fieldsByTypeName) {\n        const children = (0, _values.default)(cur.fieldsByTypeName[newTypeName]);\n        curNodeName = fieldName;\n        levels[currentLevel] -= 1;\n        currentLevel += 1;\n        levels[currentLevel] = children.length;\n        stack = (0, _concat.default)(stack).call(stack, children);\n      } else {\n        fields.push(fieldName);\n        levels[currentLevel] -= 1;\n      }\n    }\n  }\n  return fields;\n};\nexports.fromFieldsToSource = fromFieldsToSource;\nconst buildNestedField = (key, value) => {\n  let builtObj = {};\n  if (value.type === 'nested') {\n    var _context3;\n    const nestedProps = [];\n    (0, _forEach.default)(_context3 = (0, _keys.default)(value.properties)).call(_context3, propsKey => {\n      nestedProps.push(buildNestedField(propsKey, value.properties[propsKey]));\n    });\n    builtObj = {\n      name: key,\n      type: value.type,\n      nestedProps\n    };\n  } else {\n    builtObj = {\n      name: key,\n      type: value.type\n    };\n  }\n  return builtObj;\n};\n\n/**\n * This function takes a nested field object and parses names of each field\n * by concatenating `.` to parent and child field names recursively.\n * The returned object is a nested array, which will be deeply flattened later.\n * @param field: a nested field object (with `nestedProps`)\n */\nexports.buildNestedField = buildNestedField;\nconst processNestedFieldNames = field => {\n  var _context4;\n  const resultArray = [];\n  (0, _forEach.default)(_context4 = field.nestedProps).call(_context4, prop => {\n    if (prop.nestedProps) {\n      const newField = (0, _assign.default)({}, prop);\n      newField.name = `${field.name}.${prop.name}`;\n      resultArray.push(processNestedFieldNames(newField));\n    } else {\n      resultArray.push(`${field.name}.${prop.name}`);\n    }\n  });\n  return resultArray;\n};\nexports.processNestedFieldNames = processNestedFieldNames;\nconst buildNestedFieldMapping = (field, parent) => {\n  var _context5;\n  if (!field.nestedProps) {\n    return parent ? `${parent}.${field.name}` : field.name;\n  }\n  const newParent = parent ? `${parent}.${field.name}` : field.name;\n  const resultArray = (0, _map.default)(_context5 = field.nestedProps).call(_context5, nestedFields => buildNestedFieldMapping(nestedFields, newParent));\n  return resultArray;\n};\nexports.buildNestedFieldMapping = buildNestedFieldMapping;\nconst filterFieldMapping = fieldArray => (parent, args) => {\n  const {\n    searchInput\n  } = args;\n  const regEx = new RegExp(searchInput);\n  _logger.default.debug('utils [filterFieldMapping] searchInput', searchInput);\n  const resultArray = (0, _filter.default)(fieldArray).call(fieldArray, field => regEx.test(field));\n  return resultArray;\n};\nexports.filterFieldMapping = filterFieldMapping;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29uZmlnIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbG9nZ2VyIiwiZmlyc3RMZXR0ZXJVcHBlckNhc2UiLCJzdHIiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsIl9zbGljZSIsImRlZmF1bHQiLCJjYWxsIiwiZXhwb3J0cyIsInRyYW5zZmVyU2xhc2hTdHlsZVRvRGFzaFN0eWxlIiwicmVnIiwibWF0Y2hSZXN1bHQiLCJtYXRjaCIsImxlbmd0aCIsInByb2dyYW1OYW1lIiwicHJvamVjdE5hbWUiLCJhZGRUd29GaWx0ZXJzIiwiZmlsdGVyMSIsImZpbHRlcjIiLCJhcHBsaWVkRmlsdGVyIiwiQU5EIiwiaXNXaGl0ZWxpc3RlZCIsImtleSIsIl9jb250ZXh0IiwibG93ZXJDYXNlZFdoaXRlbGlzdCIsIl9tYXAiLCJjb25maWciLCJlbmNyeXB0V2hpdGVsaXN0IiwidyIsInRvTG93ZXJDYXNlIiwibG93ZXJDYXNlZEtleSIsIl9pbmNsdWRlcyIsImZyb21GaWVsZHNUb1NvdXJjZSIsInBhcnNlZEluZm8iLCJzdGFjayIsIl92YWx1ZXMiLCJmaWVsZHNCeVR5cGVOYW1lIiwibmFtZSIsImxldmVscyIsImZpZWxkcyIsImN1ck5vZGVOYW1lIiwiY3VycmVudExldmVsIiwibGFzdFBlcmlvZCIsIl9sYXN0SW5kZXhPZiIsIl9jb250ZXh0MiIsImN1ciIsInBvcCIsIm5ld1R5cGVOYW1lIiwiZmllbGROYW1lIiwiX2ZpbHRlciIsInMiLCJqb2luIiwiY2hpbGRyZW4iLCJfY29uY2F0IiwicHVzaCIsImJ1aWxkTmVzdGVkRmllbGQiLCJ2YWx1ZSIsImJ1aWx0T2JqIiwidHlwZSIsIl9jb250ZXh0MyIsIm5lc3RlZFByb3BzIiwiX2ZvckVhY2giLCJfa2V5cyIsInByb3BlcnRpZXMiLCJwcm9wc0tleSIsInByb2Nlc3NOZXN0ZWRGaWVsZE5hbWVzIiwiZmllbGQiLCJfY29udGV4dDQiLCJyZXN1bHRBcnJheSIsInByb3AiLCJuZXdGaWVsZCIsIl9hc3NpZ24iLCJidWlsZE5lc3RlZEZpZWxkTWFwcGluZyIsInBhcmVudCIsIl9jb250ZXh0NSIsIm5ld1BhcmVudCIsIm5lc3RlZEZpZWxkcyIsImZpbHRlckZpZWxkTWFwcGluZyIsImZpZWxkQXJyYXkiLCJhcmdzIiwic2VhcmNoSW5wdXQiLCJyZWdFeCIsIlJlZ0V4cCIsImxvZyIsImRlYnVnIiwidGVzdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvZXhvdXNlci9Eb2N1bWVudHMvUHJvamVjdHMvYW5hZ2luZS9zcmMvc2VydmVyL3V0aWxzLyIsInNvdXJjZXMiOlsidXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IGxvZyBmcm9tICcuLi9sb2dnZXInO1xuXG5leHBvcnQgY29uc3QgZmlyc3RMZXR0ZXJVcHBlckNhc2UgPSAoc3RyKSA9PiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG5cbi8qKlxuICogdHJhbnNmZXIgJy9wcm9ncmFtcy9ERVYvcHJvamVjdHMvdGVzdCcgdG8gJ0RFVi10ZXN0J1xuICovXG5leHBvcnQgY29uc3QgdHJhbnNmZXJTbGFzaFN0eWxlVG9EYXNoU3R5bGUgPSAoc3RyKSA9PiB7XG4gICAgY29uc3QgcmVnID0gL15cXC9wcm9ncmFtc1xcLyguKilcXC9wcm9qZWN0c1xcLyguKikkLztcbiAgICBjb25zdCBtYXRjaFJlc3VsdCA9IHN0ci5tYXRjaChyZWcpO1xuICAgIGlmICghbWF0Y2hSZXN1bHQpIHJldHVybiBudWxsO1xuICAgIGlmIChtYXRjaFJlc3VsdC5sZW5ndGggIT09IDMgfHwgbWF0Y2hSZXN1bHRbMF0gIT09IHN0cikgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgcHJvZ3JhbU5hbWUgPSBtYXRjaFJlc3VsdFsxXTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IG1hdGNoUmVzdWx0WzJdO1xuICAgIHJldHVybiBgJHtwcm9ncmFtTmFtZX0tJHtwcm9qZWN0TmFtZX1gO1xufTtcblxuZXhwb3J0IGNvbnN0IGFkZFR3b0ZpbHRlcnMgPSAoZmlsdGVyMSwgZmlsdGVyMikgPT4ge1xuICAgIGlmICghZmlsdGVyMSAmJiAhZmlsdGVyMikgcmV0dXJuIHt9O1xuICAgIGlmICghZmlsdGVyMSkgcmV0dXJuIGZpbHRlcjI7XG4gICAgaWYgKCFmaWx0ZXIyKSByZXR1cm4gZmlsdGVyMTtcbiAgICBjb25zdCBhcHBsaWVkRmlsdGVyID0ge1xuICAgICAgICBBTkQ6IFtcbiAgICAgICAgZmlsdGVyMSxcbiAgICAgICAgZmlsdGVyMixcbiAgICAgICAgXSxcbiAgICB9O1xuICAgIHJldHVybiBhcHBsaWVkRmlsdGVyO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzV2hpdGVsaXN0ZWQgPSAoa2V5KSA9PiB7XG4gICAgY29uc3QgbG93ZXJDYXNlZFdoaXRlbGlzdCA9IGNvbmZpZy5lbmNyeXB0V2hpdGVsaXN0Lm1hcCgodykgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB3LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHc7XG4gICAgfSk7XG4gICAgY29uc3QgbG93ZXJDYXNlZEtleSA9ICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykgPyBrZXkudG9Mb3dlckNhc2UoKSA6IGtleTtcbiAgICByZXR1cm4gbG93ZXJDYXNlZFdoaXRlbGlzdC5pbmNsdWRlcyhsb3dlckNhc2VkS2V5KTtcbn07XG5cbi8qKlxuICogQ29udmVydCBmcm9tIGZpZWxkcyBvZiBncmFwaHFsIHF1ZXJ5IHByb2R1Y2VkIGJ5IGdyYXBocWwgbGlicmFyeSB0byBsaXN0IG9mIHF1ZXJ5aW5nIGZpZWxkc1xuICogVGhpcyBsaXN0IHdpbGwgYmUgcHV0IHRvIF9zb3VyY2UgZmllbGRzIG9mIHRoZSBFUyBxdWVyeVxuICogQHBhcmFtIHBhcnNlZEluZm86IHBhcnNpbmcgaW5mb3JtYXRpb24gZnJvbSBncmFwaHFsIGxpYnJhcnlcbiAqIEByZXR1cm5zOiBsaXN0IG9mIHNlbGVjdGVkIGZpZWxkcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGZyb21GaWVsZHNUb1NvdXJjZSA9IChwYXJzZWRJbmZvKSA9PiB7XG4gICAgbGV0IHN0YWNrID0gT2JqZWN0LnZhbHVlcyhwYXJzZWRJbmZvLmZpZWxkc0J5VHlwZU5hbWVbZmlyc3RMZXR0ZXJVcHBlckNhc2UocGFyc2VkSW5mby5uYW1lKV0pO1xuICAgIGNvbnN0IGxldmVscyA9IHsgMDogc3RhY2subGVuZ3RoIH07XG4gICAgY29uc3QgZmllbGRzID0gW107XG4gICAgbGV0IGN1ck5vZGVOYW1lID0gJyc7XG4gICAgbGV0IGN1cnJlbnRMZXZlbCA9IDA7XG5cbiAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAobGV2ZWxzW2N1cnJlbnRMZXZlbF0gPT09IDApIHtcbiAgICAgICAgICAgIGN1cnJlbnRMZXZlbCAtPSAxO1xuICAgICAgICAgICAgY29uc3QgbGFzdFBlcmlvZCA9IGN1ck5vZGVOYW1lLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICAgICAgICBjdXJOb2RlTmFtZSA9IGN1ck5vZGVOYW1lLnNsaWNlKDAsIChsYXN0UGVyaW9kICE9PSAtMSkgPyBsYXN0UGVyaW9kIDogMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjdXIgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1R5cGVOYW1lID0gY3VyLm5hbWU7XG4gICAgICAgICAgICBjb25zdCBmaWVsZE5hbWUgPSBbY3VyTm9kZU5hbWUsIG5ld1R5cGVOYW1lXS5maWx0ZXIoKHMpID0+IHMubGVuZ3RoID4gMCkuam9pbignLicpO1xuICAgICAgICAgICAgaWYgKG5ld1R5cGVOYW1lIGluIGN1ci5maWVsZHNCeVR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBPYmplY3QudmFsdWVzKGN1ci5maWVsZHNCeVR5cGVOYW1lW25ld1R5cGVOYW1lXSk7XG4gICAgICAgICAgICAgICAgY3VyTm9kZU5hbWUgPSBmaWVsZE5hbWU7XG4gICAgICAgICAgICAgICAgbGV2ZWxzW2N1cnJlbnRMZXZlbF0gLT0gMTtcbiAgICAgICAgICAgICAgICBjdXJyZW50TGV2ZWwgKz0gMTtcbiAgICAgICAgICAgICAgICBsZXZlbHNbY3VycmVudExldmVsXSA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBzdGFjayA9IHN0YWNrLmNvbmNhdChjaGlsZHJlbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpZWxkcy5wdXNoKGZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgbGV2ZWxzW2N1cnJlbnRMZXZlbF0gLT0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmllbGRzO1xufTtcblxuZXhwb3J0IGNvbnN0IGJ1aWxkTmVzdGVkRmllbGQgPSAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgIGxldCBidWlsdE9iaiA9IHt9O1xuICAgIGlmICh2YWx1ZS50eXBlID09PSAnbmVzdGVkJykge1xuICAgICAgICBjb25zdCBuZXN0ZWRQcm9wcyA9IFtdO1xuICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZS5wcm9wZXJ0aWVzKS5mb3JFYWNoKChwcm9wc0tleSkgPT4ge1xuICAgICAgICAgICAgbmVzdGVkUHJvcHMucHVzaChidWlsZE5lc3RlZEZpZWxkKHByb3BzS2V5LCB2YWx1ZS5wcm9wZXJ0aWVzW3Byb3BzS2V5XSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnVpbHRPYmogPSB7XG4gICAgICAgICAgICBuYW1lOiBrZXksXG4gICAgICAgICAgICB0eXBlOiB2YWx1ZS50eXBlLFxuICAgICAgICAgICAgbmVzdGVkUHJvcHMsXG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYnVpbHRPYmogPSB7XG4gICAgICAgICAgICBuYW1lOiBrZXksXG4gICAgICAgICAgICB0eXBlOiB2YWx1ZS50eXBlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gYnVpbHRPYmo7XG59O1xuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYSBuZXN0ZWQgZmllbGQgb2JqZWN0IGFuZCBwYXJzZXMgbmFtZXMgb2YgZWFjaCBmaWVsZFxuICogYnkgY29uY2F0ZW5hdGluZyBgLmAgdG8gcGFyZW50IGFuZCBjaGlsZCBmaWVsZCBuYW1lcyByZWN1cnNpdmVseS5cbiAqIFRoZSByZXR1cm5lZCBvYmplY3QgaXMgYSBuZXN0ZWQgYXJyYXksIHdoaWNoIHdpbGwgYmUgZGVlcGx5IGZsYXR0ZW5lZCBsYXRlci5cbiAqIEBwYXJhbSBmaWVsZDogYSBuZXN0ZWQgZmllbGQgb2JqZWN0ICh3aXRoIGBuZXN0ZWRQcm9wc2ApXG4gKi9cbmV4cG9ydCBjb25zdCBwcm9jZXNzTmVzdGVkRmllbGROYW1lcyA9IChmaWVsZCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdEFycmF5ID0gW107XG4gICAgZmllbGQubmVzdGVkUHJvcHMuZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb3AubmVzdGVkUHJvcHMpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0ZpZWxkID0geyAuLi5wcm9wIH07XG4gICAgICAgICAgICBuZXdGaWVsZC5uYW1lID0gYCR7ZmllbGQubmFtZX0uJHtwcm9wLm5hbWV9YDtcbiAgICAgICAgICAgIHJlc3VsdEFycmF5LnB1c2gocHJvY2Vzc05lc3RlZEZpZWxkTmFtZXMobmV3RmllbGQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdEFycmF5LnB1c2goYCR7ZmllbGQubmFtZX0uJHtwcm9wLm5hbWV9YCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0QXJyYXk7XG59O1xuXG5leHBvcnQgY29uc3QgYnVpbGROZXN0ZWRGaWVsZE1hcHBpbmcgPSAoZmllbGQsIHBhcmVudCkgPT4ge1xuICAgIGlmICghZmllbGQubmVzdGVkUHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIChwYXJlbnQpID8gYCR7cGFyZW50fS4ke2ZpZWxkLm5hbWV9YCA6IGZpZWxkLm5hbWU7XG4gICAgfVxuICAgIGNvbnN0IG5ld1BhcmVudCA9IChwYXJlbnQpID8gYCR7cGFyZW50fS4ke2ZpZWxkLm5hbWV9YCA6IGZpZWxkLm5hbWU7XG4gICAgY29uc3QgcmVzdWx0QXJyYXkgPSBmaWVsZC5uZXN0ZWRQcm9wcy5tYXAoKG5lc3RlZEZpZWxkcykgPT4gYnVpbGROZXN0ZWRGaWVsZE1hcHBpbmcoXG4gICAgICAgIG5lc3RlZEZpZWxkcyxcbiAgICAgICAgbmV3UGFyZW50LFxuICAgICkpO1xuICAgIHJldHVybiByZXN1bHRBcnJheTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaWx0ZXJGaWVsZE1hcHBpbmcgPSAoZmllbGRBcnJheSkgPT4gKHBhcmVudCwgYXJncykgPT4ge1xuICAgIGNvbnN0IHsgc2VhcmNoSW5wdXQgfSA9IGFyZ3M7XG4gICAgY29uc3QgcmVnRXggPSBuZXcgUmVnRXhwKHNlYXJjaElucHV0KTtcbiAgICBsb2cuZGVidWcoJ3V0aWxzIFtmaWx0ZXJGaWVsZE1hcHBpbmddIHNlYXJjaElucHV0Jywgc2VhcmNoSW5wdXQpO1xuICAgIGNvbnN0IHJlc3VsdEFycmF5ID0gZmllbGRBcnJheS5maWx0ZXIoKGZpZWxkKSA9PiByZWdFeC50ZXN0KGZpZWxkKSk7XG4gICAgcmV0dXJuIHJlc3VsdEFycmF5O1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBRU8sTUFBTUUsb0JBQW9CLEdBQUlDLEdBQUcsSUFBS0EsR0FBRyxDQUFDQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsSUFBQUMsTUFBQSxDQUFBQyxPQUFBLEVBQUFKLEdB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","map":{"version":3,"names":["_config","_interopRequireDefault","require","_logger","firstLetterUpperCase","str","charAt","toUpperCase","_slice","default","call","exports","transferSlashStyleToDashStyle","reg","matchResult","match","length","programName","projectName","addTwoFilters","filter1","filter2","appliedFilter","AND","isWhitelisted","key","_context","lowerCasedWhitelist","_map","config","encryptWhitelist","w","toLowerCase","lowerCasedKey","_includes","fromFieldsToSource","parsedInfo","stack","_values","fieldsByTypeName","name","levels","fields","curNodeName","currentLevel","lastPeriod","_lastIndexOf","_context2","cur","pop","newTypeName","fieldName","_filter","s","join","children","_concat","push","buildNestedField","value","builtObj","type","_context3","nestedProps","_forEach","_keys","properties","propsKey","processNestedFieldNames","field","_context4","resultArray","prop","newField","_assign","buildNestedFieldMapping","parent","_context5","newParent","nestedFields","filterFieldMapping","fieldArray","args","searchInput","regEx","RegExp","log","debug","test"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/utils/","sources":["utils.js"],"sourcesContent":["import config from '../config';\nimport log from '../logger';\n\nexport const firstLetterUpperCase = (str) => str.charAt(0).toUpperCase() + str.slice(1);\n\n/**\n * transfer '/programs/DEV/projects/test' to 'DEV-test'\n */\nexport const transferSlashStyleToDashStyle = (str) => {\n    const reg = /^\\/programs\\/(.*)\\/projects\\/(.*)$/;\n    const matchResult = str.match(reg);\n    if (!matchResult) return null;\n    if (matchResult.length !== 3 || matchResult[0] !== str) return null;\n    const programName = matchResult[1];\n    const projectName = matchResult[2];\n    return `${programName}-${projectName}`;\n};\n\nexport const addTwoFilters = (filter1, filter2) => {\n    if (!filter1 && !filter2) return {};\n    if (!filter1) return filter2;\n    if (!filter2) return filter1;\n    const appliedFilter = {\n        AND: [\n        filter1,\n        filter2,\n        ],\n    };\n    return appliedFilter;\n};\n\nexport const isWhitelisted = (key) => {\n    const lowerCasedWhitelist = config.encryptWhitelist.map((w) => {\n        if (typeof w === 'string') {\n        return w.toLowerCase();\n        }\n        return w;\n    });\n    const lowerCasedKey = (typeof key === 'string') ? key.toLowerCase() : key;\n    return lowerCasedWhitelist.includes(lowerCasedKey);\n};\n\n/**\n * Convert from fields of graphql query produced by graphql library to list of querying fields\n * This list will be put to _source fields of the ES query\n * @param parsedInfo: parsing information from graphql library\n * @returns: list of selected fields.\n */\nexport const fromFieldsToSource = (parsedInfo) => {\n    let stack = Object.values(parsedInfo.fieldsByTypeName[firstLetterUpperCase(parsedInfo.name)]);\n    const levels = { 0: stack.length };\n    const fields = [];\n    let curNodeName = '';\n    let currentLevel = 0;\n\n    while (stack.length > 0) {\n        if (levels[currentLevel] === 0) {\n            currentLevel -= 1;\n            const lastPeriod = curNodeName.lastIndexOf('.');\n            curNodeName = curNodeName.slice(0, (lastPeriod !== -1) ? lastPeriod : 0);\n        } else {\n            const cur = stack.pop();\n            const newTypeName = cur.name;\n            const fieldName = [curNodeName, newTypeName].filter((s) => s.length > 0).join('.');\n            if (newTypeName in cur.fieldsByTypeName) {\n                const children = Object.values(cur.fieldsByTypeName[newTypeName]);\n                curNodeName = fieldName;\n                levels[currentLevel] -= 1;\n                currentLevel += 1;\n                levels[currentLevel] = children.length;\n                stack = stack.concat(children);\n            } else {\n                fields.push(fieldName);\n                levels[currentLevel] -= 1;\n            }\n        }\n    }\n    return fields;\n};\n\nexport const buildNestedField = (key, value) => {\n    let builtObj = {};\n    if (value.type === 'nested') {\n        const nestedProps = [];\n        Object.keys(value.properties).forEach((propsKey) => {\n            nestedProps.push(buildNestedField(propsKey, value.properties[propsKey]));\n        });\n        builtObj = {\n            name: key,\n            type: value.type,\n            nestedProps,\n        };\n    } else {\n        builtObj = {\n            name: key,\n            type: value.type,\n        };\n    }\n    return builtObj;\n};\n\n/**\n * This function takes a nested field object and parses names of each field\n * by concatenating `.` to parent and child field names recursively.\n * The returned object is a nested array, which will be deeply flattened later.\n * @param field: a nested field object (with `nestedProps`)\n */\nexport const processNestedFieldNames = (field) => {\n    const resultArray = [];\n    field.nestedProps.forEach((prop) => {\n            if (prop.nestedProps) {\n            const newField = { ...prop };\n            newField.name = `${field.name}.${prop.name}`;\n            resultArray.push(processNestedFieldNames(newField));\n        } else {\n            resultArray.push(`${field.name}.${prop.name}`);\n        }\n    });\n    return resultArray;\n};\n\nexport const buildNestedFieldMapping = (field, parent) => {\n    if (!field.nestedProps) {\n        return (parent) ? `${parent}.${field.name}` : field.name;\n    }\n    const newParent = (parent) ? `${parent}.${field.name}` : field.name;\n    const resultArray = field.nestedProps.map((nestedFields) => buildNestedFieldMapping(\n        nestedFields,\n        newParent,\n    ));\n    return resultArray;\n};\n\nexport const filterFieldMapping = (fieldArray) => (parent, args) => {\n    const { searchInput } = args;\n    const regEx = new RegExp(searchInput);\n    log.debug('utils [filterFieldMapping] searchInput', searchInput);\n    const resultArray = fieldArray.filter((field) => regEx.test(field));\n    return resultArray;\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1741363330020},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/auth/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/auth/utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAccessibleResourcesFromArboristasync = exports.buildFilterWithResourceList = void 0;\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\nvar _logger = _interopRequireDefault(require(\"../logger\"));\nvar _arboristClient = _interopRequireDefault(require(\"./arboristClient\"));\nvar _error = _interopRequireDefault(require(\"../utils/error\"));\nvar _config = _interopRequireDefault(require(\"../config\"));\nconst getAccessibleResourcesFromArboristasync = async jwt => {\n  let data;\n  if (_config.default.internalLocalTest) {\n    data = {\n      resources: [\n      // these are just for testing\n      '/programs/DEV/projects/test', '/programs/jnkns/projects/jenkins']\n    };\n  } else {\n    data = await _arboristClient.default.listAuthorizedResources(jwt);\n  }\n  _logger.default.debug('[authMiddleware] list resources: ', (0, _stringify.default)(data, null, 4));\n  if (data && data.error) {\n    // if user is not in arborist db, assume has no access to any\n    if (data.error.code === 404) {\n      return [];\n    }\n    throw new _error.default(data.error.code, data.error.message);\n  }\n  const resources = data.resources ? _lodash.default.uniq(data.resources) : [];\n  return resources;\n};\nexports.getAccessibleResourcesFromArboristasync = getAccessibleResourcesFromArboristasync;\nconst buildFilterWithResourceList = (resourceList = []) => {\n  const filter = {\n    IN: {\n      [_config.default.esConfig.authFilterField]: [...resourceList]\n    }\n  };\n  return filter;\n};\nexports.buildFilterWithResourceList = buildFilterWithResourceList;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9kYXNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbG9nZ2VyIiwiX2FyYm9yaXN0Q2xpZW50IiwiX2Vycm9yIiwiX2NvbmZpZyIsImdldEFjY2Vzc2libGVSZXNvdXJjZXNGcm9tQXJib3Jpc3Rhc3luYyIsImp3dCIsImRhdGEiLCJjb25maWciLCJpbnRlcm5hbExvY2FsVGVzdCIsInJlc291cmNlcyIsImFyYm9yaXN0Q2xpZW50IiwibGlzdEF1dGhvcml6ZWRSZXNvdXJjZXMiLCJsb2ciLCJkZWJ1ZyIsIl9zdHJpbmdpZnkiLCJkZWZhdWx0IiwiZXJyb3IiLCJjb2RlIiwiQ29kZWRFcnJvciIsIm1lc3NhZ2UiLCJfIiwidW5pcSIsImV4cG9ydHMiLCJidWlsZEZpbHRlcldpdGhSZXNvdXJjZUxpc3QiLCJyZXNvdXJjZUxpc3QiLCJmaWx0ZXIiLCJJTiIsImVzQ29uZmlnIiwiYXV0aEZpbHRlckZpZWxkIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9leG91c2VyL0RvY3VtZW50cy9Qcm9qZWN0cy9hbmFnaW5lL3NyYy9zZXJ2ZXIvYXV0aC8iLCJzb3VyY2VzIjpbInV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgYXJib3Jpc3RDbGllbnQgZnJvbSAnLi9hcmJvcmlzdENsaWVudCc7XG5pbXBvcnQgQ29kZWRFcnJvciBmcm9tICcuLi91dGlscy9lcnJvcic7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZyc7XG5cbmV4cG9ydCBjb25zdCBnZXRBY2Nlc3NpYmxlUmVzb3VyY2VzRnJvbUFyYm9yaXN0YXN5bmMgPSBhc3luYyAoand0KSA9PiB7XG4gICAgbGV0IGRhdGE7XG4gICAgaWYgKGNvbmZpZy5pbnRlcm5hbExvY2FsVGVzdCkge1xuICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgcmVzb3VyY2VzOiBbIC8vIHRoZXNlIGFyZSBqdXN0IGZvciB0ZXN0aW5nXG4gICAgICAgICAgICAgICAgJy9wcm9ncmFtcy9ERVYvcHJvamVjdHMvdGVzdCcsXG4gICAgICAgICAgICAgICAgJy9wcm9ncmFtcy9qbmtucy9wcm9qZWN0cy9qZW5raW5zJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IGF3YWl0IGFyYm9yaXN0Q2xpZW50Lmxpc3RBdXRob3JpemVkUmVzb3VyY2VzKGp3dCk7XG4gICAgfVxuXG4gICAgbG9nLmRlYnVnKCdbYXV0aE1pZGRsZXdhcmVdIGxpc3QgcmVzb3VyY2VzOiAnLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCA0KSk7XG4gICAgaWYgKGRhdGEgJiYgZGF0YS5lcnJvcikge1xuICAgICAgICAvLyBpZiB1c2VyIGlzIG5vdCBpbiBhcmJvcmlzdCBkYiwgYXNzdW1lIGhhcyBubyBhY2Nlc3MgdG8gYW55XG4gICAgICAgIGlmIChkYXRhLmVycm9yLmNvZGUgPT09IDQwNCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBDb2RlZEVycm9yKGRhdGEuZXJyb3IuY29kZSwgZGF0YS5lcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gICAgY29uc3QgcmVzb3VyY2VzID0gZGF0YS5yZXNvdXJjZXMgPyBfLnVuaXEoZGF0YS5yZXNvdXJjZXMpIDogW107XG4gICAgcmV0dXJuIHJlc291cmNlcztcbn07XG5cbmV4cG9ydCBjb25zdCBidWlsZEZpbHRlcldpdGhSZXNvdXJjZUxpc3QgPSAocmVzb3VyY2VMaXN0ID0gW10pID0+IHtcbiAgICBjb25zdCBmaWx0ZXIgPSB7XG4gICAgICAgIElOOiB7XG4gICAgICAgICAgICBbY29uZmlnLmVzQ29uZmlnLmF1dGhGaWx0ZXJGaWVsZF06IFsuLi5yZXNvdXJjZUxpc3RdLFxuICAgICAgICB9LFxuICAgIH07XG4gICAgcmV0dXJuIGZpbHRlcjtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGVBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLE1BQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLE9BQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUVPLE1BQU1LLHVDQUF1QyxHQUFHLE1BQU9DLEdBQUcsSUFBSztFQUNsRSxJQUFJQyxJQUFJO0VBQ1IsSUFBSUMsZUFBTSxDQUFDQyxpQkFBaUIsRUFBRTtJQUMxQkYsSUFBSSxHQUFHO01BQ0hHLFNBQVMsRUFBRTtNQUFFO01BQ1QsNkJBQTZCLEVBQzdCLGtDQUFrQztJQUUxQyxDQUFDO0VBQ0wsQ0FBQyxNQUFNO0lBQ0hILElBQUksR0FBRyxNQUFNSSx1QkFBYyxDQUFDQyx1QkFBdUIsQ0FBQ04sR0FBRyxDQUFDO0VBQzVEO0VBRUFPLGVBQUcsQ0FBQ0MsS0FBSyxDQUFDLG1DQUFtQyxFQUFFLElBQUFDLFVBQUEsQ0FBQUMsT0FBQSxFQUFlVCxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQzdFLElBQUlBLElBQUksSUFBSUEsSUFBSSxDQUFDVSxLQUFLLEVBQUU7SUFDcEI7SUFDQSxJQUFJVixJQUFJLENBQUNVLEtBQUssQ0FBQ0MsSUFBSSxLQUFLLEdBQUcsRUFBRTtNQUN6QixPQUFPLEVBQUU7SUFDYjtJQUNBLE1BQU0sSUFBSUMsY0FBVSxDQUFDWixJQUFJLENBQUNVLEtBQUssQ0FBQ0MsSUFBSSxFQUFFWCxJQUFJLENBQUNVLEtBQUssQ0FBQ0csT0FBTyxDQUFDO0VBQzdEO0VBQ0EsTUFBTVYsU0FBUyxHQUFHSCxJQUFJLENBQUNHLFNBQVMsR0FBR1csZUFBQyxDQUFDQyxJQUFJLENBQUNmLElBQUksQ0FBQ0csU0FBUyxDQUFDLEdBQUcsRUFBRTtFQUM5RCxPQUFPQSxTQUFTO0FBQ3BCLENBQUM7QUFBQ2EsT0FBQSxDQUFBbEIsdUNBQUEsR0FBQUEsdUNBQUE7QUFFSyxNQUFNbUIsMkJBQTJCLEdBQUdBLENBQUNDLFlBQVksR0FBRyxFQUFFLEtBQUs7RUFDOUQsTUFBTUMsTUFBTSxHQUFHO0lBQ1hDLEVBQUUsRUFBRTtNQUNBLENBQUNuQixlQUFNLENBQUNvQixRQUFRLENBQUNDLGVBQWUsR0FBRyxDQUFDLEdBQUdKLFlBQVk7SUFDdkQ7RUFDSixDQUFDO0VBQ0QsT0FBT0MsTUFBTTtBQUNqQixDQUFDO0FBQUNILE9BQUEsQ0FBQUMsMkJBQUEsR0FBQUEsMkJBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_lodash","_interopRequireDefault","require","_logger","_arboristClient","_error","_config","getAccessibleResourcesFromArboristasync","jwt","data","config","internalLocalTest","resources","arboristClient","listAuthorizedResources","log","debug","_stringify","default","error","code","CodedError","message","_","uniq","exports","buildFilterWithResourceList","resourceList","filter","IN","esConfig","authFilterField"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/auth/","sources":["utils.js"],"sourcesContent":["import _ from 'lodash';\nimport log from '../logger';\nimport arboristClient from './arboristClient';\nimport CodedError from '../utils/error';\nimport config from '../config';\n\nexport const getAccessibleResourcesFromArboristasync = async (jwt) => {\n    let data;\n    if (config.internalLocalTest) {\n        data = {\n            resources: [ // these are just for testing\n                '/programs/DEV/projects/test',\n                '/programs/jnkns/projects/jenkins',\n            ],\n        };\n    } else {\n        data = await arboristClient.listAuthorizedResources(jwt);\n    }\n\n    log.debug('[authMiddleware] list resources: ', JSON.stringify(data, null, 4));\n    if (data && data.error) {\n        // if user is not in arborist db, assume has no access to any\n        if (data.error.code === 404) {\n            return [];\n        }\n        throw new CodedError(data.error.code, data.error.message);\n    }\n    const resources = data.resources ? _.uniq(data.resources) : [];\n    return resources;\n};\n\nexport const buildFilterWithResourceList = (resourceList = []) => {\n    const filter = {\n        IN: {\n            [config.esConfig.authFilterField]: [...resourceList],\n        },\n    };\n    return filter;\n};\n"],"mappings":";;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,eAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,MAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,OAAA,GAAAL,sBAAA,CAAAC,OAAA;AAEO,MAAMK,uCAAuC,GAAG,MAAOC,GAAG,IAAK;EAClE,IAAIC,IAAI;EACR,IAAIC,eAAM,CAACC,iBAAiB,EAAE;IAC1BF,IAAI,GAAG;MACHG,SAAS,EAAE;MAAE;MACT,6BAA6B,EAC7B,kCAAkC;IAE1C,CAAC;EACL,CAAC,MAAM;IACHH,IAAI,GAAG,MAAMI,uBAAc,CAACC,uBAAuB,CAACN,GAAG,CAAC;EAC5D;EAEAO,eAAG,CAACC,KAAK,CAAC,mCAAmC,EAAE,IAAAC,UAAA,CAAAC,OAAA,EAAeT,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;EAC7E,IAAIA,IAAI,IAAIA,IAAI,CAACU,KAAK,EAAE;IACpB;IACA,IAAIV,IAAI,CAACU,KAAK,CAACC,IAAI,KAAK,GAAG,EAAE;MACzB,OAAO,EAAE;IACb;IACA,MAAM,IAAIC,cAAU,CAACZ,IAAI,CAACU,KAAK,CAACC,IAAI,EAAEX,IAAI,CAACU,KAAK,CAACG,OAAO,CAAC;EAC7D;EACA,MAAMV,SAAS,GAAGH,IAAI,CAACG,SAAS,GAAGW,eAAC,CAACC,IAAI,CAACf,IAAI,CAACG,SAAS,CAAC,GAAG,EAAE;EAC9D,OAAOA,SAAS;AACpB,CAAC;AAACa,OAAA,CAAAlB,uCAAA,GAAAA,uCAAA;AAEK,MAAMmB,2BAA2B,GAAGA,CAACC,YAAY,GAAG,EAAE,KAAK;EAC9D,MAAMC,MAAM,GAAG;IACXC,EAAE,EAAE;MACA,CAACnB,eAAM,CAACoB,QAAQ,CAACC,eAAe,GAAG,CAAC,GAAGJ,YAAY;IACvD;EACJ,CAAC;EACD,OAAOC,MAAM;AACjB,CAAC;AAACH,OAAA,CAAAC,2BAAA,GAAAA,2BAAA","ignoreList":[]}},"mtime":1741362950908},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/auth/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/auth/authHelper.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.AuthHelper = void 0;\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\nvar _utils = require(\"../utils/utils\");\nvar _logger = _interopRequireDefault(require(\"../logger\"));\nvar _utils2 = require(\"./utils\");\nvar _config = _interopRequireDefault(require(\"../config\"));\nclass AuthHelper {\n  constructor(jwt) {\n    this._jwt = jwt;\n  }\n  async initialize() {\n    try {\n      var _context;\n      this._accessibleResourceList = await (0, _utils2.getAccessibleResourcesFromArboristasync)(this._jwt);\n      _logger.default.debug('[AuthHelper] accessible resources:', this._accessibleResourceList);\n      const promiseList = [];\n      (0, _forEach.default)(_context = _config.default.esConfig.indices).call(_context, ({\n        index,\n        type\n      }) => {\n        const subListPromise = this.getOutOfScopeResourceList(index, type);\n        promiseList.push(subListPromise);\n      });\n      const listResult = await _promise.default.all(promiseList);\n      this._unaccessibleResourceList = [];\n      (0, _forEach.default)(listResult).call(listResult, list => {\n        this._unaccessibleResourceList = _lodash.default.union(this._unaccessibleResourceList, list);\n      });\n      _logger.default.debug('[AuthHelper] unaccessible resources:', this._unaccessibleResourceList);\n    } catch (err) {\n      _logger.default.error('[AuthHelper] error when initializing:', err);\n    }\n  }\n  getAccessibleResources() {\n    return this._accessibleResourceList;\n  }\n  getUnaccessibleResources() {\n    return this._unaccessibleResourceList;\n  }\n  async getOutOfScopeResourceList(esIndex, esType, filter, filterSelf) {\n    const requestResourceList = await (0, _utils2.getRequestResourceListFromFilter)(esIndex, esType, filter, filterSelf);\n    _logger.default.debug('[AuthHelper] filter:', filter);\n    _logger.default.debug(`[AuthHelper] request resource list: [${requestResourceList.join(', ')}]`);\n    const outOfScopeResourceList = _lodash.default.difference(requestResourceList, this._accessibleResourceList);\n    _logger.default.debug(`[AuthHelper] out-of-scope resource list: [${outOfScopeResourceList.join(', ')}]`);\n    return outOfScopeResourceList;\n  }\n  applyAccessibleFilter(filter) {\n    const accessiblePart = (0, _utils2.buildFilterWithResourceList)(this._accessibleResourceList);\n    const appliedFilter = (0, _utils.addTwoFilters)(filter, accessiblePart);\n    return appliedFilter;\n  }\n  applyUnaccessibleFilter(filter) {\n    const unaccessiblePart = (0, _utils2.buildFilterWithResourceList)(this._unaccessibleResourceList);\n    const appliedFilter = (0, _utils.addTwoFilters)(filter, unaccessiblePart);\n    return appliedFilter;\n  }\n  getDefaultFilter(accessibility) {\n    if (accessibility === 'all') {\n      return {};\n    }\n    if (accessibility === 'accessible') {\n      return this.applyAccessibleFilter();\n    }\n    if (accessibility === 'unaccessible') {\n      return this.applyUnaccessibleFilter();\n    }\n    throw new Error(`Invalid accessibility argument: ${accessibility}`);\n  }\n}\nexports.AuthHelper = AuthHelper;\nconst getAuthHelperInstance = async jwt => {\n  const authHelper = new AuthHelper(jwt);\n  await authHelper.initialize();\n  return authHelper;\n};\nvar _default = exports.default = getAuthHelperInstance;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9kYXNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfdXRpbHMiLCJfbG9nZ2VyIiwiX3V0aWxzMiIsIl9jb25maWciLCJBdXRoSGVscGVyIiwiY29uc3RydWN0b3IiLCJqd3QiLCJfand0IiwiaW5pdGlhbGl6ZSIsIl9jb250ZXh0IiwiX2FjY2Vzc2libGVSZXNvdXJjZUxpc3QiLCJnZXRBY2Nlc3NpYmxlUmVzb3VyY2VzRnJvbUFyYm9yaXN0YXN5bmMiLCJsb2ciLCJkZWJ1ZyIsInByb21pc2VMaXN0IiwiX2ZvckVhY2giLCJkZWZhdWx0IiwiY29uZmlnIiwiZXNDb25maWciLCJpbmRpY2VzIiwiY2FsbCIsImluZGV4IiwidHlwZSIsInN1Ykxpc3RQcm9taXNlIiwiZ2V0T3V0T2ZTY29wZVJlc291cmNlTGlzdCIsInB1c2giLCJsaXN0UmVzdWx0IiwiX3Byb21pc2UiLCJhbGwiLCJfdW5hY2Nlc3NpYmxlUmVzb3VyY2VMaXN0IiwibGlzdCIsIl8iLCJ1bmlvbiIsImVyciIsImVycm9yIiwiZ2V0QWNjZXNzaWJsZVJlc291cmNlcyIsImdldFVuYWNjZXNzaWJsZVJlc291cmNlcyIsImVzSW5kZXgiLCJlc1R5cGUiLCJmaWx0ZXIiLCJmaWx0ZXJTZWxmIiwicmVxdWVzdFJlc291cmNlTGlzdCIsImdldFJlcXVlc3RSZXNvdXJjZUxpc3RGcm9tRmlsdGVyIiwiam9pbiIsIm91dE9mU2NvcGVSZXNvdXJjZUxpc3QiLCJkaWZmZXJlbmNlIiwiYXBwbHlBY2Nlc3NpYmxlRmlsdGVyIiwiYWNjZXNzaWJsZVBhcnQiLCJidWlsZEZpbHRlcldpdGhSZXNvdXJjZUxpc3QiLCJhcHBsaWVkRmlsdGVyIiwiYWRkVHdvRmlsdGVycyIsImFwcGx5VW5hY2Nlc3NpYmxlRmlsdGVyIiwidW5hY2Nlc3NpYmxlUGFydCIsImdldERlZmF1bHRGaWx0ZXIiLCJhY2Nlc3NpYmlsaXR5IiwiRXJyb3IiLCJleHBvcnRzIiwiZ2V0QXV0aEhlbHBlckluc3RhbmNlIiwiYXV0aEhlbHBlciIsIl9kZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9leG91c2VyL0RvY3VtZW50cy9Qcm9qZWN0cy9hbmFnaW5lL3NyYy9zZXJ2ZXIvYXV0aC8iLCJzb3VyY2VzIjpbImF1dGhIZWxwZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCB7IGFkZFR3b0ZpbHRlcnMgfSBmcm9tICcuLi91dGlscy91dGlscyc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQge1xuICAgIGdldFJlcXVlc3RSZXNvdXJjZUxpc3RGcm9tRmlsdGVyLFxuICAgIGJ1aWxkRmlsdGVyV2l0aFJlc291cmNlTGlzdCxcbiAgICBnZXRBY2Nlc3NpYmxlUmVzb3VyY2VzRnJvbUFyYm9yaXN0YXN5bmMsXG59IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xuXG5leHBvcnQgY2xhc3MgQXV0aEhlbHBlciB7XG4gICAgY29uc3RydWN0b3Ioand0KSB7XG4gICAgICAgIHRoaXMuX2p3dCA9IGp3dDtcbiAgICB9XG5cbiAgICBhc3luYyBpbml0aWFsaXplKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5fYWNjZXNzaWJsZVJlc291cmNlTGlzdCA9IGF3YWl0IGdldEFjY2Vzc2libGVSZXNvdXJjZXNGcm9tQXJib3Jpc3Rhc3luYyh0aGlzLl9qd3QpO1xuICAgICAgICAgICAgbG9nLmRlYnVnKCdbQXV0aEhlbHBlcl0gYWNjZXNzaWJsZSByZXNvdXJjZXM6JywgdGhpcy5fYWNjZXNzaWJsZVJlc291cmNlTGlzdCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHByb21pc2VMaXN0ID0gW107XG4gICAgICAgICAgICBjb25maWcuZXNDb25maWcuaW5kaWNlcy5mb3JFYWNoKCh7IGluZGV4LCB0eXBlIH0pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdWJMaXN0UHJvbWlzZSA9IHRoaXMuZ2V0T3V0T2ZTY29wZVJlc291cmNlTGlzdChpbmRleCwgdHlwZSk7XG4gICAgICAgICAgICAgICAgcHJvbWlzZUxpc3QucHVzaChzdWJMaXN0UHJvbWlzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RSZXN1bHQgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlTGlzdCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3VuYWNjZXNzaWJsZVJlc291cmNlTGlzdCA9IFtdO1xuICAgICAgICAgICAgbGlzdFJlc3VsdC5mb3JFYWNoKChsaXN0KSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdW5hY2Nlc3NpYmxlUmVzb3VyY2VMaXN0ID0gXy51bmlvbih0aGlzLl91bmFjY2Vzc2libGVSZXNvdXJjZUxpc3QsIGxpc3QpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsb2cuZGVidWcoJ1tBdXRoSGVscGVyXSB1bmFjY2Vzc2libGUgcmVzb3VyY2VzOicsIHRoaXMuX3VuYWNjZXNzaWJsZVJlc291cmNlTGlzdCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgbG9nLmVycm9yKCdbQXV0aEhlbHBlcl0gZXJyb3Igd2hlbiBpbml0aWFsaXppbmc6JywgZXJyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGdldEFjY2Vzc2libGVSZXNvdXJjZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hY2Nlc3NpYmxlUmVzb3VyY2VMaXN0O1xuICAgIH1cblxuICAgIGdldFVuYWNjZXNzaWJsZVJlc291cmNlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VuYWNjZXNzaWJsZVJlc291cmNlTGlzdDtcbiAgICB9XG5cbiAgICBhc3luYyBnZXRPdXRPZlNjb3BlUmVzb3VyY2VMaXN0KGVzSW5kZXgsIGVzVHlwZSwgZmlsdGVyLCBmaWx0ZXJTZWxmKSB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3RSZXNvdXJjZUxpc3QgPSBhd2FpdCBnZXRSZXF1ZXN0UmVzb3VyY2VMaXN0RnJvbUZpbHRlcihcbiAgICAgICAgICAgIGVzSW5kZXgsXG4gICAgICAgICAgICBlc1R5cGUsXG4gICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICBmaWx0ZXJTZWxmLFxuICAgICAgICApO1xuICAgICAgICBsb2cuZGVidWcoJ1tBdXRoSGVscGVyXSBmaWx0ZXI6JywgZmlsdGVyKTtcbiAgICAgICAgbG9nLmRlYnVnKGBbQXV0aEhlbHBlcl0gcmVxdWVzdCByZXNvdXJjZSBsaXN0OiBbJHtyZXF1ZXN0UmVzb3VyY2VMaXN0LmpvaW4oJywgJyl9XWApO1xuICAgICAgICBjb25zdCBvdXRPZlNjb3BlUmVzb3VyY2VMaXN0ID0gXy5kaWZmZXJlbmNlKHJlcXVlc3RSZXNvdXJjZUxpc3QsIHRoaXMuX2FjY2Vzc2libGVSZXNvdXJjZUxpc3QpO1xuICAgICAgICBsb2cuZGVidWcoYFtBdXRoSGVscGVyXSBvdXQtb2Ytc2NvcGUgcmVzb3VyY2UgbGlzdDogWyR7b3V0T2ZTY29wZVJlc291cmNlTGlzdC5qb2luKCcsICcpfV1gKTtcbiAgICAgICAgcmV0dXJuIG91dE9mU2NvcGVSZXNvdXJjZUxpc3Q7XG4gICAgfVxuXG4gICAgYXBwbHlBY2Nlc3NpYmxlRmlsdGVyKGZpbHRlcikge1xuICAgICAgICBjb25zdCBhY2Nlc3NpYmxlUGFydCA9IGJ1aWxkRmlsdGVyV2l0aFJlc291cmNlTGlzdCh0aGlzLl9hY2Nlc3NpYmxlUmVzb3VyY2VMaXN0KTtcbiAgICAgICAgY29uc3QgYXBwbGllZEZpbHRlciA9IGFkZFR3b0ZpbHRlcnMoZmlsdGVyLCBhY2Nlc3NpYmxlUGFydCk7XG4gICAgICAgIHJldHVybiBhcHBsaWVkRmlsdGVyO1xuICAgIH1cblxuICAgIGFwcGx5VW5hY2Nlc3NpYmxlRmlsdGVyKGZpbHRlcikge1xuICAgICAgICBjb25zdCB1bmFjY2Vzc2libGVQYXJ0ID0gYnVpbGRGaWx0ZXJXaXRoUmVzb3VyY2VMaXN0KHRoaXMuX3VuYWNjZXNzaWJsZVJlc291cmNlTGlzdCk7XG4gICAgICAgIGNvbnN0IGFwcGxpZWRGaWx0ZXIgPSBhZGRUd29GaWx0ZXJzKGZpbHRlciwgdW5hY2Nlc3NpYmxlUGFydCk7XG4gICAgICAgIHJldHVybiBhcHBsaWVkRmlsdGVyO1xuICAgIH1cblxuICAgIGdldERlZmF1bHRGaWx0ZXIoYWNjZXNzaWJpbGl0eSkge1xuICAgICAgICBpZiAoYWNjZXNzaWJpbGl0eSA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICAgIHJldHVybiB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWNjZXNzaWJpbGl0eSA9PT0gJ2FjY2Vzc2libGUnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcHBseUFjY2Vzc2libGVGaWx0ZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYWNjZXNzaWJpbGl0eSA9PT0gJ3VuYWNjZXNzaWJsZScpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFwcGx5VW5hY2Nlc3NpYmxlRmlsdGVyKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGFjY2Vzc2liaWxpdHkgYXJndW1lbnQ6ICR7YWNjZXNzaWJpbGl0eX1gKTtcbiAgICB9XG59XG5cbiAgICBjb25zdCBnZXRBdXRoSGVscGVySW5zdGFuY2UgPSBhc3luYyAoand0KSA9PiB7XG4gICAgY29uc3QgYXV0aEhlbHBlciA9IG5ldyBBdXRoSGVscGVyKGp3dCk7XG4gICAgYXdhaXQgYXV0aEhlbHBlci5pbml0aWFsaXplKCk7XG4gICAgcmV0dXJuIGF1dGhIZWxwZXI7XG4gICAgfTtcblxuZXhwb3J0IGRlZmF1bHQgZ2V0QXV0aEhlbHBlckluc3RhbmNlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsT0FBQSxHQUFB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","map":{"version":3,"names":["_lodash","_interopRequireDefault","require","_utils","_logger","_utils2","_config","AuthHelper","constructor","jwt","_jwt","initialize","_context","_accessibleResourceList","getAccessibleResourcesFromArboristasync","log","debug","promiseList","_forEach","default","config","esConfig","indices","call","index","type","subListPromise","getOutOfScopeResourceList","push","listResult","_promise","all","_unaccessibleResourceList","list","_","union","err","error","getAccessibleResources","getUnaccessibleResources","esIndex","esType","filter","filterSelf","requestResourceList","getRequestResourceListFromFilter","join","outOfScopeResourceList","difference","applyAccessibleFilter","accessiblePart","buildFilterWithResourceList","appliedFilter","addTwoFilters","applyUnaccessibleFilter","unaccessiblePart","getDefaultFilter","accessibility","Error","exports","getAuthHelperInstance","authHelper","_default"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/auth/","sources":["authHelper.js"],"sourcesContent":["import _ from 'lodash';\nimport { addTwoFilters } from '../utils/utils';\nimport log from '../logger';\nimport {\n    getRequestResourceListFromFilter,\n    buildFilterWithResourceList,\n    getAccessibleResourcesFromArboristasync,\n} from './utils';\nimport config from '../config';\n\nexport class AuthHelper {\n    constructor(jwt) {\n        this._jwt = jwt;\n    }\n\n    async initialize() {\n        try {\n            this._accessibleResourceList = await getAccessibleResourcesFromArboristasync(this._jwt);\n            log.debug('[AuthHelper] accessible resources:', this._accessibleResourceList);\n\n            const promiseList = [];\n            config.esConfig.indices.forEach(({ index, type }) => {\n                const subListPromise = this.getOutOfScopeResourceList(index, type);\n                promiseList.push(subListPromise);\n            });\n            const listResult = await Promise.all(promiseList);\n\n            this._unaccessibleResourceList = [];\n            listResult.forEach((list) => {\n                this._unaccessibleResourceList = _.union(this._unaccessibleResourceList, list);\n            });\n            log.debug('[AuthHelper] unaccessible resources:', this._unaccessibleResourceList);\n        } catch (err) {\n            log.error('[AuthHelper] error when initializing:', err);\n        }\n    }\n\n    getAccessibleResources() {\n        return this._accessibleResourceList;\n    }\n\n    getUnaccessibleResources() {\n        return this._unaccessibleResourceList;\n    }\n\n    async getOutOfScopeResourceList(esIndex, esType, filter, filterSelf) {\n        const requestResourceList = await getRequestResourceListFromFilter(\n            esIndex,\n            esType,\n            filter,\n            filterSelf,\n        );\n        log.debug('[AuthHelper] filter:', filter);\n        log.debug(`[AuthHelper] request resource list: [${requestResourceList.join(', ')}]`);\n        const outOfScopeResourceList = _.difference(requestResourceList, this._accessibleResourceList);\n        log.debug(`[AuthHelper] out-of-scope resource list: [${outOfScopeResourceList.join(', ')}]`);\n        return outOfScopeResourceList;\n    }\n\n    applyAccessibleFilter(filter) {\n        const accessiblePart = buildFilterWithResourceList(this._accessibleResourceList);\n        const appliedFilter = addTwoFilters(filter, accessiblePart);\n        return appliedFilter;\n    }\n\n    applyUnaccessibleFilter(filter) {\n        const unaccessiblePart = buildFilterWithResourceList(this._unaccessibleResourceList);\n        const appliedFilter = addTwoFilters(filter, unaccessiblePart);\n        return appliedFilter;\n    }\n\n    getDefaultFilter(accessibility) {\n        if (accessibility === 'all') {\n            return {};\n        }\n        if (accessibility === 'accessible') {\n            return this.applyAccessibleFilter();\n        }\n        if (accessibility === 'unaccessible') {\n            return this.applyUnaccessibleFilter();\n        }\n        throw new Error(`Invalid accessibility argument: ${accessibility}`);\n    }\n}\n\n    const getAuthHelperInstance = async (jwt) => {\n    const authHelper = new AuthHelper(jwt);\n    await authHelper.initialize();\n    return authHelper;\n    };\n\nexport default getAuthHelperInstance;\n"],"mappings":"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","ignoreList":[]}},"mtime":1741363181274},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.transferSlashStyleToDashStyle = exports.processNestedFieldNames = exports.isWhitelisted = exports.fromFieldsToSource = exports.firstLetterUpperCase = exports.filterFieldMapping = exports.buildNestedFieldMapping = exports.buildNestedField = exports.addTwoFilters = void 0;\nvar _slice = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/slice\"));\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\nvar _values = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/values\"));\nvar _lastIndexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/last-index-of\"));\nvar _filter = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\"));\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\nvar _assign = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/assign\"));\nvar _config = _interopRequireDefault(require(\"../config\"));\nvar _logger = _interopRequireDefault(require(\"../logger\"));\nconst firstLetterUpperCase = str => str.charAt(0).toUpperCase() + (0, _slice.default)(str).call(str, 1);\n\n/**\n * transfer '/programs/DEV/projects/test' to 'DEV-test'\n */\nexports.firstLetterUpperCase = firstLetterUpperCase;\nconst transferSlashStyleToDashStyle = str => {\n  const reg = /^\\/programs\\/(.*)\\/projects\\/(.*)$/;\n  const matchResult = str.match(reg);\n  if (!matchResult) return null;\n  if (matchResult.length !== 3 || matchResult[0] !== str) return null;\n  const programName = matchResult[1];\n  const projectName = matchResult[2];\n  return `${programName}-${projectName}`;\n};\nexports.transferSlashStyleToDashStyle = transferSlashStyleToDashStyle;\nconst addTwoFilters = (filter1, filter2) => {\n  if (!filter1 && !filter2) return {};\n  if (!filter1) return filter2;\n  if (!filter2) return filter1;\n  const appliedFilter = {\n    AND: [filter1, filter2]\n  };\n  return appliedFilter;\n};\nexports.addTwoFilters = addTwoFilters;\nconst isWhitelisted = key => {\n  var _context;\n  const lowerCasedWhitelist = (0, _map.default)(_context = _config.default.encryptWhitelist).call(_context, w => {\n    if (typeof w === 'string') {\n      return w.toLowerCase();\n    }\n    return w;\n  });\n  const lowerCasedKey = typeof key === 'string' ? key.toLowerCase() : key;\n  return (0, _includes.default)(lowerCasedWhitelist).call(lowerCasedWhitelist, lowerCasedKey);\n};\n\n/**\n * Convert from fields of graphql query produced by graphql library to list of querying fields\n * This list will be put to _source fields of the ES query\n * @param parsedInfo: parsing information from graphql library\n * @returns: list of selected fields.\n */\nexports.isWhitelisted = isWhitelisted;\nconst fromFieldsToSource = parsedInfo => {\n  let stack = (0, _values.default)(parsedInfo.fieldsByTypeName[firstLetterUpperCase(parsedInfo.name)]);\n  const levels = {\n    0: stack.length\n  };\n  const fields = [];\n  let curNodeName = '';\n  let currentLevel = 0;\n  while (stack.length > 0) {\n    if (levels[currentLevel] === 0) {\n      currentLevel -= 1;\n      const lastPeriod = (0, _lastIndexOf.default)(curNodeName).call(curNodeName, '.');\n      curNodeName = (0, _slice.default)(curNodeName).call(curNodeName, 0, lastPeriod !== -1 ? lastPeriod : 0);\n    } else {\n      var _context2;\n      const cur = stack.pop();\n      const newTypeName = cur.name;\n      const fieldName = (0, _filter.default)(_context2 = [curNodeName, newTypeName]).call(_context2, s => s.length > 0).join('.');\n      if (newTypeName in cur.fieldsByTypeName) {\n        const children = (0, _values.default)(cur.fieldsByTypeName[newTypeName]);\n        curNodeName = fieldName;\n        levels[currentLevel] -= 1;\n        currentLevel += 1;\n        levels[currentLevel] = children.length;\n        stack = (0, _concat.default)(stack).call(stack, children);\n      } else {\n        fields.push(fieldName);\n        levels[currentLevel] -= 1;\n      }\n    }\n  }\n  return fields;\n};\nexports.fromFieldsToSource = fromFieldsToSource;\nconst buildNestedField = (key, value) => {\n  let builtObj = {};\n  if (value.type === 'nested') {\n    var _context3;\n    const nestedProps = [];\n    (0, _forEach.default)(_context3 = (0, _keys.default)(value.properties)).call(_context3, propsKey => {\n      nestedProps.push(buildNestedField(propsKey, value.properties[propsKey]));\n    });\n    builtObj = {\n      name: key,\n      type: value.type,\n      nestedProps\n    };\n  } else {\n    builtObj = {\n      name: key,\n      type: value.type\n    };\n  }\n  return builtObj;\n};\n\n/**\n * This function takes a nested field object and parses names of each field\n * by concatenating `.` to parent and child field names recursively.\n * The returned object is a nested array, which will be deeply flattened later.\n * @param field: a nested field object (with `nestedProps`)\n */\nexports.buildNestedField = buildNestedField;\nconst processNestedFieldNames = field => {\n  var _context4;\n  const resultArray = [];\n  (0, _forEach.default)(_context4 = field.nestedProps).call(_context4, prop => {\n    if (prop.nestedProps) {\n      const newField = (0, _assign.default)({}, prop);\n      newField.name = `${field.name}.${prop.name}`;\n      resultArray.push(processNestedFieldNames(newField));\n    } else {\n      resultArray.push(`${field.name}.${prop.name}`);\n    }\n  });\n  return resultArray;\n};\nexports.processNestedFieldNames = processNestedFieldNames;\nconst buildNestedFieldMapping = (field, parent) => {\n  var _context5;\n  if (!field.nestedProps) {\n    return parent ? `${parent}.${field.name}` : field.name;\n  }\n  const newParent = parent ? `${parent}.${field.name}` : field.name;\n  const resultArray = (0, _map.default)(_context5 = field.nestedProps).call(_context5, nestedFields => buildNestedFieldMapping(nestedFields, newParent));\n  return resultArray;\n};\nexports.buildNestedFieldMapping = buildNestedFieldMapping;\nconst filterFieldMapping = fieldArray => (parent, args) => {\n  const {\n    searchInput\n  } = args;\n  const regEx = new RegExp(searchInput);\n  _logger.default.debug('utils [filterFieldMapping] searchInput', searchInput);\n  const resultArray = (0, _filter.default)(fieldArray).call(fieldArray, field => regEx.test(field));\n  return resultArray;\n};\nexports.filterFieldMapping = filterFieldMapping;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29uZmlnIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbG9nZ2VyIiwiZmlyc3RMZXR0ZXJVcHBlckNhc2UiLCJzdHIiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsIl9zbGljZSIsImRlZmF1bHQiLCJjYWxsIiwiZXhwb3J0cyIsInRyYW5zZmVyU2xhc2hTdHlsZVRvRGFzaFN0eWxlIiwicmVnIiwibWF0Y2hSZXN1bHQiLCJtYXRjaCIsImxlbmd0aCIsInByb2dyYW1OYW1lIiwicHJvamVjdE5hbWUiLCJhZGRUd29GaWx0ZXJzIiwiZmlsdGVyMSIsImZpbHRlcjIiLCJhcHBsaWVkRmlsdGVyIiwiQU5EIiwiaXNXaGl0ZWxpc3RlZCIsImtleSIsIl9jb250ZXh0IiwibG93ZXJDYXNlZFdoaXRlbGlzdCIsIl9tYXAiLCJjb25maWciLCJlbmNyeXB0V2hpdGVsaXN0IiwidyIsInRvTG93ZXJDYXNlIiwibG93ZXJDYXNlZEtleSIsIl9pbmNsdWRlcyIsImZyb21GaWVsZHNUb1NvdXJjZSIsInBhcnNlZEluZm8iLCJzdGFjayIsIl92YWx1ZXMiLCJmaWVsZHNCeVR5cGVOYW1lIiwibmFtZSIsImxldmVscyIsImZpZWxkcyIsImN1ck5vZGVOYW1lIiwiY3VycmVudExldmVsIiwibGFzdFBlcmlvZCIsIl9sYXN0SW5kZXhPZiIsIl9jb250ZXh0MiIsImN1ciIsInBvcCIsIm5ld1R5cGVOYW1lIiwiZmllbGROYW1lIiwiX2ZpbHRlciIsInMiLCJqb2luIiwiY2hpbGRyZW4iLCJfY29uY2F0IiwicHVzaCIsImJ1aWxkTmVzdGVkRmllbGQiLCJ2YWx1ZSIsImJ1aWx0T2JqIiwidHlwZSIsIl9jb250ZXh0MyIsIm5lc3RlZFByb3BzIiwiX2ZvckVhY2giLCJfa2V5cyIsInByb3BlcnRpZXMiLCJwcm9wc0tleSIsInByb2Nlc3NOZXN0ZWRGaWVsZE5hbWVzIiwiZmllbGQiLCJfY29udGV4dDQiLCJyZXN1bHRBcnJheSIsInByb3AiLCJuZXdGaWVsZCIsIl9hc3NpZ24iLCJidWlsZE5lc3RlZEZpZWxkTWFwcGluZyIsInBhcmVudCIsIl9jb250ZXh0NSIsIm5ld1BhcmVudCIsIm5lc3RlZEZpZWxkcyIsImZpbHRlckZpZWxkTWFwcGluZyIsImZpZWxkQXJyYXkiLCJhcmdzIiwic2VhcmNoSW5wdXQiLCJyZWdFeCIsIlJlZ0V4cCIsImxvZyIsImRlYnVnIiwidGVzdCJdLCJzb3VyY2VSb290IjoiL2hvbWUvZXhvdXNlci9Eb2N1bWVudHMvUHJvamVjdHMvYW5hZ2luZS9zcmMvc2VydmVyL3V0aWxzLyIsInNvdXJjZXMiOlsidXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xuaW1wb3J0IGxvZyBmcm9tICcuLi9sb2dnZXInO1xuXG5leHBvcnQgY29uc3QgZmlyc3RMZXR0ZXJVcHBlckNhc2UgPSAoc3RyKSA9PiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG5cbi8qKlxuICogdHJhbnNmZXIgJy9wcm9ncmFtcy9ERVYvcHJvamVjdHMvdGVzdCcgdG8gJ0RFVi10ZXN0J1xuICovXG5leHBvcnQgY29uc3QgdHJhbnNmZXJTbGFzaFN0eWxlVG9EYXNoU3R5bGUgPSAoc3RyKSA9PiB7XG4gICAgY29uc3QgcmVnID0gL15cXC9wcm9ncmFtc1xcLyguKilcXC9wcm9qZWN0c1xcLyguKikkLztcbiAgICBjb25zdCBtYXRjaFJlc3VsdCA9IHN0ci5tYXRjaChyZWcpO1xuICAgIGlmICghbWF0Y2hSZXN1bHQpIHJldHVybiBudWxsO1xuICAgIGlmIChtYXRjaFJlc3VsdC5sZW5ndGggIT09IDMgfHwgbWF0Y2hSZXN1bHRbMF0gIT09IHN0cikgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgcHJvZ3JhbU5hbWUgPSBtYXRjaFJlc3VsdFsxXTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IG1hdGNoUmVzdWx0WzJdO1xuICAgIHJldHVybiBgJHtwcm9ncmFtTmFtZX0tJHtwcm9qZWN0TmFtZX1gO1xufTtcblxuZXhwb3J0IGNvbnN0IGFkZFR3b0ZpbHRlcnMgPSAoZmlsdGVyMSwgZmlsdGVyMikgPT4ge1xuICAgIGlmICghZmlsdGVyMSAmJiAhZmlsdGVyMikgcmV0dXJuIHt9O1xuICAgIGlmICghZmlsdGVyMSkgcmV0dXJuIGZpbHRlcjI7XG4gICAgaWYgKCFmaWx0ZXIyKSByZXR1cm4gZmlsdGVyMTtcbiAgICBjb25zdCBhcHBsaWVkRmlsdGVyID0ge1xuICAgICAgICBBTkQ6IFtcbiAgICAgICAgZmlsdGVyMSxcbiAgICAgICAgZmlsdGVyMixcbiAgICAgICAgXSxcbiAgICB9O1xuICAgIHJldHVybiBhcHBsaWVkRmlsdGVyO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzV2hpdGVsaXN0ZWQgPSAoa2V5KSA9PiB7XG4gICAgY29uc3QgbG93ZXJDYXNlZFdoaXRlbGlzdCA9IGNvbmZpZy5lbmNyeXB0V2hpdGVsaXN0Lm1hcCgodykgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB3LnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHc7XG4gICAgfSk7XG4gICAgY29uc3QgbG93ZXJDYXNlZEtleSA9ICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykgPyBrZXkudG9Mb3dlckNhc2UoKSA6IGtleTtcbiAgICByZXR1cm4gbG93ZXJDYXNlZFdoaXRlbGlzdC5pbmNsdWRlcyhsb3dlckNhc2VkS2V5KTtcbn07XG5cbi8qKlxuICogQ29udmVydCBmcm9tIGZpZWxkcyBvZiBncmFwaHFsIHF1ZXJ5IHByb2R1Y2VkIGJ5IGdyYXBocWwgbGlicmFyeSB0byBsaXN0IG9mIHF1ZXJ5aW5nIGZpZWxkc1xuICogVGhpcyBsaXN0IHdpbGwgYmUgcHV0IHRvIF9zb3VyY2UgZmllbGRzIG9mIHRoZSBFUyBxdWVyeVxuICogQHBhcmFtIHBhcnNlZEluZm86IHBhcnNpbmcgaW5mb3JtYXRpb24gZnJvbSBncmFwaHFsIGxpYnJhcnlcbiAqIEByZXR1cm5zOiBsaXN0IG9mIHNlbGVjdGVkIGZpZWxkcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGZyb21GaWVsZHNUb1NvdXJjZSA9IChwYXJzZWRJbmZvKSA9PiB7XG4gICAgbGV0IHN0YWNrID0gT2JqZWN0LnZhbHVlcyhwYXJzZWRJbmZvLmZpZWxkc0J5VHlwZU5hbWVbZmlyc3RMZXR0ZXJVcHBlckNhc2UocGFyc2VkSW5mby5uYW1lKV0pO1xuICAgIGNvbnN0IGxldmVscyA9IHsgMDogc3RhY2subGVuZ3RoIH07XG4gICAgY29uc3QgZmllbGRzID0gW107XG4gICAgbGV0IGN1ck5vZGVOYW1lID0gJyc7XG4gICAgbGV0IGN1cnJlbnRMZXZlbCA9IDA7XG5cbiAgICB3aGlsZSAoc3RhY2subGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAobGV2ZWxzW2N1cnJlbnRMZXZlbF0gPT09IDApIHtcbiAgICAgICAgICAgIGN1cnJlbnRMZXZlbCAtPSAxO1xuICAgICAgICAgICAgY29uc3QgbGFzdFBlcmlvZCA9IGN1ck5vZGVOYW1lLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICAgICAgICBjdXJOb2RlTmFtZSA9IGN1ck5vZGVOYW1lLnNsaWNlKDAsIChsYXN0UGVyaW9kICE9PSAtMSkgPyBsYXN0UGVyaW9kIDogMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBjdXIgPSBzdGFjay5wb3AoKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1R5cGVOYW1lID0gY3VyLm5hbWU7XG4gICAgICAgICAgICBjb25zdCBmaWVsZE5hbWUgPSBbY3VyTm9kZU5hbWUsIG5ld1R5cGVOYW1lXS5maWx0ZXIoKHMpID0+IHMubGVuZ3RoID4gMCkuam9pbignLicpO1xuICAgICAgICAgICAgaWYgKG5ld1R5cGVOYW1lIGluIGN1ci5maWVsZHNCeVR5cGVOYW1lKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBPYmplY3QudmFsdWVzKGN1ci5maWVsZHNCeVR5cGVOYW1lW25ld1R5cGVOYW1lXSk7XG4gICAgICAgICAgICAgICAgY3VyTm9kZU5hbWUgPSBmaWVsZE5hbWU7XG4gICAgICAgICAgICAgICAgbGV2ZWxzW2N1cnJlbnRMZXZlbF0gLT0gMTtcbiAgICAgICAgICAgICAgICBjdXJyZW50TGV2ZWwgKz0gMTtcbiAgICAgICAgICAgICAgICBsZXZlbHNbY3VycmVudExldmVsXSA9IGNoaWxkcmVuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBzdGFjayA9IHN0YWNrLmNvbmNhdChjaGlsZHJlbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpZWxkcy5wdXNoKGZpZWxkTmFtZSk7XG4gICAgICAgICAgICAgICAgbGV2ZWxzW2N1cnJlbnRMZXZlbF0gLT0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmllbGRzO1xufTtcblxuZXhwb3J0IGNvbnN0IGJ1aWxkTmVzdGVkRmllbGQgPSAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgIGxldCBidWlsdE9iaiA9IHt9O1xuICAgIGlmICh2YWx1ZS50eXBlID09PSAnbmVzdGVkJykge1xuICAgICAgICBjb25zdCBuZXN0ZWRQcm9wcyA9IFtdO1xuICAgICAgICBPYmplY3Qua2V5cyh2YWx1ZS5wcm9wZXJ0aWVzKS5mb3JFYWNoKChwcm9wc0tleSkgPT4ge1xuICAgICAgICAgICAgbmVzdGVkUHJvcHMucHVzaChidWlsZE5lc3RlZEZpZWxkKHByb3BzS2V5LCB2YWx1ZS5wcm9wZXJ0aWVzW3Byb3BzS2V5XSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnVpbHRPYmogPSB7XG4gICAgICAgICAgICBuYW1lOiBrZXksXG4gICAgICAgICAgICB0eXBlOiB2YWx1ZS50eXBlLFxuICAgICAgICAgICAgbmVzdGVkUHJvcHMsXG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYnVpbHRPYmogPSB7XG4gICAgICAgICAgICBuYW1lOiBrZXksXG4gICAgICAgICAgICB0eXBlOiB2YWx1ZS50eXBlLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gYnVpbHRPYmo7XG59O1xuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYSBuZXN0ZWQgZmllbGQgb2JqZWN0IGFuZCBwYXJzZXMgbmFtZXMgb2YgZWFjaCBmaWVsZFxuICogYnkgY29uY2F0ZW5hdGluZyBgLmAgdG8gcGFyZW50IGFuZCBjaGlsZCBmaWVsZCBuYW1lcyByZWN1cnNpdmVseS5cbiAqIFRoZSByZXR1cm5lZCBvYmplY3QgaXMgYSBuZXN0ZWQgYXJyYXksIHdoaWNoIHdpbGwgYmUgZGVlcGx5IGZsYXR0ZW5lZCBsYXRlci5cbiAqIEBwYXJhbSBmaWVsZDogYSBuZXN0ZWQgZmllbGQgb2JqZWN0ICh3aXRoIGBuZXN0ZWRQcm9wc2ApXG4gKi9cbmV4cG9ydCBjb25zdCBwcm9jZXNzTmVzdGVkRmllbGROYW1lcyA9IChmaWVsZCkgPT4ge1xuICAgIGNvbnN0IHJlc3VsdEFycmF5ID0gW107XG4gICAgZmllbGQubmVzdGVkUHJvcHMuZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgICAgICAgICAgaWYgKHByb3AubmVzdGVkUHJvcHMpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0ZpZWxkID0geyAuLi5wcm9wIH07XG4gICAgICAgICAgICBuZXdGaWVsZC5uYW1lID0gYCR7ZmllbGQubmFtZX0uJHtwcm9wLm5hbWV9YDtcbiAgICAgICAgICAgIHJlc3VsdEFycmF5LnB1c2gocHJvY2Vzc05lc3RlZEZpZWxkTmFtZXMobmV3RmllbGQpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdEFycmF5LnB1c2goYCR7ZmllbGQubmFtZX0uJHtwcm9wLm5hbWV9YCk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0QXJyYXk7XG59O1xuXG5leHBvcnQgY29uc3QgYnVpbGROZXN0ZWRGaWVsZE1hcHBpbmcgPSAoZmllbGQsIHBhcmVudCkgPT4ge1xuICAgIGlmICghZmllbGQubmVzdGVkUHJvcHMpIHtcbiAgICAgICAgcmV0dXJuIChwYXJlbnQpID8gYCR7cGFyZW50fS4ke2ZpZWxkLm5hbWV9YCA6IGZpZWxkLm5hbWU7XG4gICAgfVxuICAgIGNvbnN0IG5ld1BhcmVudCA9IChwYXJlbnQpID8gYCR7cGFyZW50fS4ke2ZpZWxkLm5hbWV9YCA6IGZpZWxkLm5hbWU7XG4gICAgY29uc3QgcmVzdWx0QXJyYXkgPSBmaWVsZC5uZXN0ZWRQcm9wcy5tYXAoKG5lc3RlZEZpZWxkcykgPT4gYnVpbGROZXN0ZWRGaWVsZE1hcHBpbmcoXG4gICAgICAgIG5lc3RlZEZpZWxkcyxcbiAgICAgICAgbmV3UGFyZW50LFxuICAgICkpO1xuICAgIHJldHVybiByZXN1bHRBcnJheTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaWx0ZXJGaWVsZE1hcHBpbmcgPSAoZmllbGRBcnJheSkgPT4gKHBhcmVudCwgYXJncykgPT4ge1xuICAgIGNvbnN0IHsgc2VhcmNoSW5wdXQgfSA9IGFyZ3M7XG4gICAgY29uc3QgcmVnRXggPSBuZXcgUmVnRXhwKHNlYXJjaElucHV0KTtcbiAgICBsb2cuZGVidWcoJ3V0aWxzIFtmaWx0ZXJGaWVsZE1hcHBpbmddIHNlYXJjaElucHV0Jywgc2VhcmNoSW5wdXQpO1xuICAgIGNvbnN0IHJlc3VsdEFycmF5ID0gZmllbGRBcnJheS5maWx0ZXIoKGZpZWxkKSA9PiByZWdFeC50ZXN0KGZpZWxkKSk7XG4gICAgcmV0dXJuIHJlc3VsdEFycmF5O1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBRU8sTUFBTUUsb0JBQW9CLEdBQUlDLEdBQUcsSUFBS0EsR0FBRyxDQUFDQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDLEdBQUcsSUFBQUMsTUFBQSxDQUFBQyxPQUFBLEVBQUFKLEdB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","map":{"version":3,"names":["_config","_interopRequireDefault","require","_logger","firstLetterUpperCase","str","charAt","toUpperCase","_slice","default","call","exports","transferSlashStyleToDashStyle","reg","matchResult","match","length","programName","projectName","addTwoFilters","filter1","filter2","appliedFilter","AND","isWhitelisted","key","_context","lowerCasedWhitelist","_map","config","encryptWhitelist","w","toLowerCase","lowerCasedKey","_includes","fromFieldsToSource","parsedInfo","stack","_values","fieldsByTypeName","name","levels","fields","curNodeName","currentLevel","lastPeriod","_lastIndexOf","_context2","cur","pop","newTypeName","fieldName","_filter","s","join","children","_concat","push","buildNestedField","value","builtObj","type","_context3","nestedProps","_forEach","_keys","properties","propsKey","processNestedFieldNames","field","_context4","resultArray","prop","newField","_assign","buildNestedFieldMapping","parent","_context5","newParent","nestedFields","filterFieldMapping","fieldArray","args","searchInput","regEx","RegExp","log","debug","test"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/utils/","sources":["utils.js"],"sourcesContent":["import config from '../config';\nimport log from '../logger';\n\nexport const firstLetterUpperCase = (str) => str.charAt(0).toUpperCase() + str.slice(1);\n\n/**\n * transfer '/programs/DEV/projects/test' to 'DEV-test'\n */\nexport const transferSlashStyleToDashStyle = (str) => {\n    const reg = /^\\/programs\\/(.*)\\/projects\\/(.*)$/;\n    const matchResult = str.match(reg);\n    if (!matchResult) return null;\n    if (matchResult.length !== 3 || matchResult[0] !== str) return null;\n    const programName = matchResult[1];\n    const projectName = matchResult[2];\n    return `${programName}-${projectName}`;\n};\n\nexport const addTwoFilters = (filter1, filter2) => {\n    if (!filter1 && !filter2) return {};\n    if (!filter1) return filter2;\n    if (!filter2) return filter1;\n    const appliedFilter = {\n        AND: [\n        filter1,\n        filter2,\n        ],\n    };\n    return appliedFilter;\n};\n\nexport const isWhitelisted = (key) => {\n    const lowerCasedWhitelist = config.encryptWhitelist.map((w) => {\n        if (typeof w === 'string') {\n        return w.toLowerCase();\n        }\n        return w;\n    });\n    const lowerCasedKey = (typeof key === 'string') ? key.toLowerCase() : key;\n    return lowerCasedWhitelist.includes(lowerCasedKey);\n};\n\n/**\n * Convert from fields of graphql query produced by graphql library to list of querying fields\n * This list will be put to _source fields of the ES query\n * @param parsedInfo: parsing information from graphql library\n * @returns: list of selected fields.\n */\nexport const fromFieldsToSource = (parsedInfo) => {\n    let stack = Object.values(parsedInfo.fieldsByTypeName[firstLetterUpperCase(parsedInfo.name)]);\n    const levels = { 0: stack.length };\n    const fields = [];\n    let curNodeName = '';\n    let currentLevel = 0;\n\n    while (stack.length > 0) {\n        if (levels[currentLevel] === 0) {\n            currentLevel -= 1;\n            const lastPeriod = curNodeName.lastIndexOf('.');\n            curNodeName = curNodeName.slice(0, (lastPeriod !== -1) ? lastPeriod : 0);\n        } else {\n            const cur = stack.pop();\n            const newTypeName = cur.name;\n            const fieldName = [curNodeName, newTypeName].filter((s) => s.length > 0).join('.');\n            if (newTypeName in cur.fieldsByTypeName) {\n                const children = Object.values(cur.fieldsByTypeName[newTypeName]);\n                curNodeName = fieldName;\n                levels[currentLevel] -= 1;\n                currentLevel += 1;\n                levels[currentLevel] = children.length;\n                stack = stack.concat(children);\n            } else {\n                fields.push(fieldName);\n                levels[currentLevel] -= 1;\n            }\n        }\n    }\n    return fields;\n};\n\nexport const buildNestedField = (key, value) => {\n    let builtObj = {};\n    if (value.type === 'nested') {\n        const nestedProps = [];\n        Object.keys(value.properties).forEach((propsKey) => {\n            nestedProps.push(buildNestedField(propsKey, value.properties[propsKey]));\n        });\n        builtObj = {\n            name: key,\n            type: value.type,\n            nestedProps,\n        };\n    } else {\n        builtObj = {\n            name: key,\n            type: value.type,\n        };\n    }\n    return builtObj;\n};\n\n/**\n * This function takes a nested field object and parses names of each field\n * by concatenating `.` to parent and child field names recursively.\n * The returned object is a nested array, which will be deeply flattened later.\n * @param field: a nested field object (with `nestedProps`)\n */\nexport const processNestedFieldNames = (field) => {\n    const resultArray = [];\n    field.nestedProps.forEach((prop) => {\n            if (prop.nestedProps) {\n            const newField = { ...prop };\n            newField.name = `${field.name}.${prop.name}`;\n            resultArray.push(processNestedFieldNames(newField));\n        } else {\n            resultArray.push(`${field.name}.${prop.name}`);\n        }\n    });\n    return resultArray;\n};\n\nexport const buildNestedFieldMapping = (field, parent) => {\n    if (!field.nestedProps) {\n        return (parent) ? `${parent}.${field.name}` : field.name;\n    }\n    const newParent = (parent) ? `${parent}.${field.name}` : field.name;\n    const resultArray = field.nestedProps.map((nestedFields) => buildNestedFieldMapping(\n        nestedFields,\n        newParent,\n    ));\n    return resultArray;\n};\n\nexport const filterFieldMapping = (fieldArray) => (parent, args) => {\n    const { searchInput } = args;\n    const regEx = new RegExp(searchInput);\n    log.debug('utils [filterFieldMapping] searchInput', searchInput);\n    const resultArray = fieldArray.filter((field) => regEx.test(field));\n    return resultArray;\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1741363330020},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/auth/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/auth/arboristClient.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\nvar _some = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/some\"));\nvar _nodeFetch = _interopRequireDefault(require(\"node-fetch\"));\nvar _config = _interopRequireDefault(require(\"../config\"));\nvar _logger = _interopRequireDefault(require(\"../logger\"));\nvar _error = _interopRequireDefault(require(\"../utils/error\"));\nclass ArboristClient {\n  constructor(arboristEndpoint) {\n    this.baseEndpoint = arboristEndpoint;\n  }\n  listAuthorizedResources(jwt) {\n    // Make request to arborist for list of resources with access\n    const resourcesEndpoint = `${this.baseEndpoint}/auth/mapping`;\n    _logger.default.debug('[ArboristClient] listAuthorizedResources jwt: ', jwt);\n    const headers = jwt ? {\n      Authorization: `bearer ${jwt}`\n    } : {};\n    return (0, _nodeFetch.default)(resourcesEndpoint, {\n      method: 'GET',\n      headers\n    }).then(response => response.json()).then(result => {\n      var _context;\n      const data = {\n        resources: []\n      };\n      (0, _forEach.default)(_context = (0, _keys.default)(result)).call(_context, key => {\n        var _context2;\n        // logic: you have access to a project if you have the following access:\n        // method 'read' (or '*' - all methods) to service 'guppy' (or '*' - all services)\n        // on the project resource.\n        if (result[key] && (0, _some.default)(_context2 = result[key]).call(_context2, x => (x.method === 'read' || x.method === '*') && (x.service === 'guppy' || x.service === '*'))) {\n          data.resources.push(key);\n        }\n      });\n      _logger.default.debug('[ArboristClient] data: ', data);\n      return data;\n    }, err => {\n      _logger.default.error(err);\n      throw new _error.default(500, err);\n    });\n  }\n}\nvar _default = exports.default = new ArboristClient(_config.default.arboristEndpoint);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUZldGNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfY29uZmlnIiwiX2xvZ2dlciIsIl9lcnJvciIsIkFyYm9yaXN0Q2xpZW50IiwiY29uc3RydWN0b3IiLCJhcmJvcmlzdEVuZHBvaW50IiwiYmFzZUVuZHBvaW50IiwibGlzdEF1dGhvcml6ZWRSZXNvdXJjZXMiLCJqd3QiLCJyZXNvdXJjZXNFbmRwb2ludCIsImxvZyIsImRlYnVnIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJyZXN1bHQiLCJfY29udGV4dCIsImRhdGEiLCJyZXNvdXJjZXMiLCJfZm9yRWFjaCIsImRlZmF1bHQiLCJfa2V5cyIsImNhbGwiLCJrZXkiLCJfY29udGV4dDIiLCJfc29tZSIsIngiLCJzZXJ2aWNlIiwicHVzaCIsImVyciIsImVycm9yIiwiQ29kZWRFcnJvciIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImNvbmZpZyJdLCJzb3VyY2VSb290IjoiL2hvbWUvZXhvdXNlci9Eb2N1bWVudHMvUHJvamVjdHMvYW5hZ2luZS9zcmMvc2VydmVyL2F1dGgvIiwic291cmNlcyI6WyJhcmJvcmlzdENsaWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZmV0Y2ggZnJvbSAnbm9kZS1mZXRjaCc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZyc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgQ29kZWRFcnJvciBmcm9tICcuLi91dGlscy9lcnJvcic7XG5cbmNsYXNzIEFyYm9yaXN0Q2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihhcmJvcmlzdEVuZHBvaW50KSB7XG4gICAgICAgIHRoaXMuYmFzZUVuZHBvaW50ID0gYXJib3Jpc3RFbmRwb2ludDtcbiAgICB9XG5cbiAgICBsaXN0QXV0aG9yaXplZFJlc291cmNlcyhqd3QpIHtcbiAgICAgICAgLy8gTWFrZSByZXF1ZXN0IHRvIGFyYm9yaXN0IGZvciBsaXN0IG9mIHJlc291cmNlcyB3aXRoIGFjY2Vzc1xuICAgICAgICBjb25zdCByZXNvdXJjZXNFbmRwb2ludCA9IGAke3RoaXMuYmFzZUVuZHBvaW50fS9hdXRoL21hcHBpbmdgO1xuICAgICAgICBsb2cuZGVidWcoJ1tBcmJvcmlzdENsaWVudF0gbGlzdEF1dGhvcml6ZWRSZXNvdXJjZXMgand0OiAnLCBqd3QpO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gKGp3dCkgPyB7IEF1dGhvcml6YXRpb246IGBiZWFyZXIgJHtqd3R9YCB9IDoge307XG4gICAgICAgIHJldHVybiBmZXRjaChcbiAgICAgICAgcmVzb3VyY2VzRW5kcG9pbnQsXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICB9LFxuICAgICAgICApLnRoZW4oXG4gICAgICAgICAgICAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSxcbiAgICAgICAgKS50aGVuKFxuICAgICAgICAgICAgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzOiBbXSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gbG9naWM6IHlvdSBoYXZlIGFjY2VzcyB0byBhIHByb2plY3QgaWYgeW91IGhhdmUgdGhlIGZvbGxvd2luZyBhY2Nlc3M6XG4gICAgICAgICAgICAgICAgLy8gbWV0aG9kICdyZWFkJyAob3IgJyonIC0gYWxsIG1ldGhvZHMpIHRvIHNlcnZpY2UgJ2d1cHB5JyAob3IgJyonIC0gYWxsIHNlcnZpY2VzKVxuICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBwcm9qZWN0IHJlc291cmNlLlxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRba2V5XSAmJiByZXN1bHRba2V5XS5zb21lKCh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICh4Lm1ldGhvZCA9PT0gJ3JlYWQnIHx8IHgubWV0aG9kID09PSAnKicpXG4gICAgICAgICAgICAgICAgJiYgKHguc2VydmljZSA9PT0gJ2d1cHB5JyB8fCB4LnNlcnZpY2UgPT09ICcqJylcbiAgICAgICAgICAgICAgICApKSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLnJlc291cmNlcy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZygnW0FyYm9yaXN0Q2xpZW50XSBkYXRhOiAnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IENvZGVkRXJyb3IoNTAwLCBlcnIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBBcmJvcmlzdENsaWVudChjb25maWcuYXJib3Jpc3RFbmRwb2ludCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsSUFBQUEsVUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTUksY0FBYyxDQUFDO0VBQ2pCQyxXQUFXQSxDQUFDQyxnQkFBZ0IsRUFBRTtJQUMxQixJQUFJLENBQUNDLFlBQVksR0FBR0QsZ0JBQWdCO0VBQ3hDO0VBRUFFLHVCQUF1QkEsQ0FBQ0MsR0FBRyxFQUFFO0lBQ3pCO0lBQ0EsTUFBTUMsaUJBQWlCLEdBQUcsR0FBRyxJQUFJLENBQUNILFlBQVksZUFBZTtJQUM3REksZUFBRyxDQUFDQyxLQUFLLENBQUMsZ0RBQWdELEVBQUVILEdBQUcsQ0FBQztJQUNoRSxNQUFNSSxPQUFPLEdBQUlKLEdBQUcsR0FBSTtNQUFFSyxhQUFhLEVBQUUsVUFBVUwsR0FBRztJQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDL0QsT0FBTyxJQUFBTSxrQkFBSyxFQUNaTCxpQkFBaUIsRUFDakI7TUFDSU0sTUFBTSxFQUFFLEtBQUs7TUFDYkg7SUFDSixDQUNBLENBQUMsQ0FBQ0ksSUFBSSxDQUNEQyxRQUFRLElBQUtBLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDLENBQ2hDLENBQUMsQ0FBQ0YsSUFBSSxDQUNERyxNQUFNLElBQUs7TUFBQSxJQUFBQyxRQUFBO01BQ1IsTUFBTUMsSUFBSSxHQUFHO1FBQ2JDLFNBQVMsRUFBRTtNQUNYLENBQUM7TUFDRCxJQUFBQyxRQUFBLENBQUFDLE9BQUEsRUFBQUosUUFBQSxPQUFBSyxLQUFBLENBQUFELE9BQUEsRUFBWUwsTUFBTSxDQUFDLEVBQUFPLElBQUEsQ0FBQU4sUUFBQSxFQUFVTyxHQUFHLElBQUs7UUFBQSxJQUFBQyxTQUFBO1FBQ3JDO1FBQ0E7UUFDQTtRQUNBLElBQUlULE1BQU0sQ0FBQ1EsR0FBRyxDQUFDLElBQUksSUFBQUUsS0FBQSxDQUFBTCxPQUFBLEVBQUFJLFNBQUEsR0FBQVQsTUFBTSxDQUFDUSxHQUFHLENBQUMsRUFBQUQsSUFBQSxDQUFBRSxTQUFBLEVBQU9FLENBQUMsSUFDbEMsQ0FBQ0EsQ0FBQyxDQUFDZixNQUFNLEtBQUssTUFBTSxJQUFJZSxDQUFDLENBQUNmLE1BQU0sS0FBSyxHQUFHLE1BQ3hDZSxDQUFDLENBQUNDLE9BQU8sS0FBSyxPQUFPLElBQUlELENBQUMsQ0FBQ0MsT0FBTyxLQUFLLEdBQUcsQ0FDN0MsQ0FBQyxFQUFFO1VBQ0FWLElBQUksQ0FBQ0MsU0FBUyxDQUFDVSxJQUFJLENBQUNMLEdBQUcsQ0FBQztRQUM1QjtNQUNBLENBQUMsQ0FBQztNQUNGakIsZUFBRyxDQUFDQyxLQUFLLENBQUMseUJBQXlCLEVBQUVVLElBQUksQ0FBQztNQUMxQyxPQUFPQSxJQUFJO0lBQ2YsQ0FBQyxFQUNBWSxHQUFHLElBQUs7TUFDTHZCLGVBQUcsQ0FBQ3dCLEtBQUssQ0FBQ0QsR0FBRyxDQUFDO01BQ2QsTUFBTSxJQUFJRSxjQUFVLENBQUMsR0FBRyxFQUFFRixHQUFHLENBQUM7SUFDbEMsQ0FDSixDQUFDO0VBQ0w7QUFDSjtBQUFDLElBQUFHLFFBQUEsR0FBQUMsT0FBQSxDQUFBYixPQUFBLEdBRWMsSUFBSXJCLGNBQWMsQ0FBQ21DLGVBQU0sQ0FBQ2pDLGdCQUFnQixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_nodeFetch","_interopRequireDefault","require","_config","_logger","_error","ArboristClient","constructor","arboristEndpoint","baseEndpoint","listAuthorizedResources","jwt","resourcesEndpoint","log","debug","headers","Authorization","fetch","method","then","response","json","result","_context","data","resources","_forEach","default","_keys","call","key","_context2","_some","x","service","push","err","error","CodedError","_default","exports","config"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/auth/","sources":["arboristClient.js"],"sourcesContent":["import fetch from 'node-fetch';\nimport config from '../config';\nimport log from '../logger';\nimport CodedError from '../utils/error';\n\nclass ArboristClient {\n    constructor(arboristEndpoint) {\n        this.baseEndpoint = arboristEndpoint;\n    }\n\n    listAuthorizedResources(jwt) {\n        // Make request to arborist for list of resources with access\n        const resourcesEndpoint = `${this.baseEndpoint}/auth/mapping`;\n        log.debug('[ArboristClient] listAuthorizedResources jwt: ', jwt);\n        const headers = (jwt) ? { Authorization: `bearer ${jwt}` } : {};\n        return fetch(\n        resourcesEndpoint,\n        {\n            method: 'GET',\n            headers,\n        },\n        ).then(\n            (response) => response.json(),\n        ).then(\n            (result) => {\n                const data = {\n                resources: [],\n                };\n                Object.keys(result).forEach((key) => {\n                // logic: you have access to a project if you have the following access:\n                // method 'read' (or '*' - all methods) to service 'guppy' (or '*' - all services)\n                // on the project resource.\n                if (result[key] && result[key].some((x) => (\n                    (x.method === 'read' || x.method === '*')\n                && (x.service === 'guppy' || x.service === '*')\n                ))) {\n                    data.resources.push(key);\n                }\n                });\n                log.debug('[ArboristClient] data: ', data);\n                return data;\n            },\n            (err) => {\n                log.error(err);\n                throw new CodedError(500, err);\n            },\n        );\n    }\n}\n\nexport default new ArboristClient(config.arboristEndpoint);\n"],"mappings":";;;;;;;;;;;AAAA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,MAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAEA,MAAMI,cAAc,CAAC;EACjBC,WAAWA,CAACC,gBAAgB,EAAE;IAC1B,IAAI,CAACC,YAAY,GAAGD,gBAAgB;EACxC;EAEAE,uBAAuBA,CAACC,GAAG,EAAE;IACzB;IACA,MAAMC,iBAAiB,GAAG,GAAG,IAAI,CAACH,YAAY,eAAe;IAC7DI,eAAG,CAACC,KAAK,CAAC,gDAAgD,EAAEH,GAAG,CAAC;IAChE,MAAMI,OAAO,GAAIJ,GAAG,GAAI;MAAEK,aAAa,EAAE,UAAUL,GAAG;IAAG,CAAC,GAAG,CAAC,CAAC;IAC/D,OAAO,IAAAM,kBAAK,EACZL,iBAAiB,EACjB;MACIM,MAAM,EAAE,KAAK;MACbH;IACJ,CACA,CAAC,CAACI,IAAI,CACDC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAChC,CAAC,CAACF,IAAI,CACDG,MAAM,IAAK;MAAA,IAAAC,QAAA;MACR,MAAMC,IAAI,GAAG;QACbC,SAAS,EAAE;MACX,CAAC;MACD,IAAAC,QAAA,CAAAC,OAAA,EAAAJ,QAAA,OAAAK,KAAA,CAAAD,OAAA,EAAYL,MAAM,CAAC,EAAAO,IAAA,CAAAN,QAAA,EAAUO,GAAG,IAAK;QAAA,IAAAC,SAAA;QACrC;QACA;QACA;QACA,IAAIT,MAAM,CAACQ,GAAG,CAAC,IAAI,IAAAE,KAAA,CAAAL,OAAA,EAAAI,SAAA,GAAAT,MAAM,CAACQ,GAAG,CAAC,EAAAD,IAAA,CAAAE,SAAA,EAAOE,CAAC,IAClC,CAACA,CAAC,CAACf,MAAM,KAAK,MAAM,IAAIe,CAAC,CAACf,MAAM,KAAK,GAAG,MACxCe,CAAC,CAACC,OAAO,KAAK,OAAO,IAAID,CAAC,CAACC,OAAO,KAAK,GAAG,CAC7C,CAAC,EAAE;UACAV,IAAI,CAACC,SAAS,CAACU,IAAI,CAACL,GAAG,CAAC;QAC5B;MACA,CAAC,CAAC;MACFjB,eAAG,CAACC,KAAK,CAAC,yBAAyB,EAAEU,IAAI,CAAC;MAC1C,OAAOA,IAAI;IACf,CAAC,EACAY,GAAG,IAAK;MACLvB,eAAG,CAACwB,KAAK,CAACD,GAAG,CAAC;MACd,MAAM,IAAIE,cAAU,CAAC,GAAG,EAAEF,GAAG,CAAC;IAClC,CACJ,CAAC;EACL;AACJ;AAAC,IAAAG,QAAA,GAAAC,OAAA,CAAAb,OAAA,GAEc,IAAIrB,cAAc,CAACmC,eAAM,CAACjC,gBAAgB,CAAC","ignoreList":[]}},"mtime":1741363234483},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nclass CodedError extends Error {\n  constructor(code, msg) {\n    super(msg);\n    this.code = code;\n    this.msg = msg;\n  }\n}\nvar _default = exports.default = CodedError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDb2RlZEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsImNvZGUiLCJtc2ciLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9leG91c2VyL0RvY3VtZW50cy9Qcm9qZWN0cy9hbmFnaW5lL3NyYy9zZXJ2ZXIvdXRpbHMvIiwic291cmNlcyI6WyJlcnJvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDb2RlZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGNvZGUsIG1zZykge1xuICAgICAgICBzdXBlcihtc2cpO1xuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgICAgICB0aGlzLm1zZyA9IG1zZztcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvZGVkRXJyb3I7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxNQUFNQSxVQUFVLFNBQVNDLEtBQUssQ0FBQztFQUMzQkMsV0FBV0EsQ0FBQ0MsSUFBSSxFQUFFQyxHQUFHLEVBQUU7SUFDbkIsS0FBSyxDQUFDQSxHQUFHLENBQUM7SUFDVixJQUFJLENBQUNELElBQUksR0FBR0EsSUFBSTtJQUNoQixJQUFJLENBQUNDLEdBQUcsR0FBR0EsR0FBRztFQUNsQjtBQUNKO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FFY1AsVUFBVSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["CodedError","Error","constructor","code","msg","_default","exports","default"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/utils/","sources":["error.js"],"sourcesContent":["class CodedError extends Error {\n    constructor(code, msg) {\n        super(msg);\n        this.code = code;\n        this.msg = msg;\n    }\n}\n\nexport default CodedError;\n"],"mappings":";;;;;;;AAAA,MAAMA,UAAU,SAASC,KAAK,CAAC;EAC3BC,WAAWA,CAACC,IAAI,EAAEC,GAAG,EAAE;IACnB,KAAK,CAACA,GAAG,CAAC;IACV,IAAI,CAACD,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,GAAG,GAAGA,GAAG;EAClB;AACJ;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEcP,UAAU","ignoreList":[]}},"mtime":1741363362704},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/auth/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/auth/utils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getAccessibleResourcesFromArboristasync = exports.buildFilterWithResourceList = void 0;\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\nvar _logger = _interopRequireDefault(require(\"../logger\"));\nvar _arboristClient = _interopRequireDefault(require(\"./arboristClient\"));\nvar _error = _interopRequireDefault(require(\"../utils/error\"));\nvar _config = _interopRequireDefault(require(\"../config\"));\nconst getAccessibleResourcesFromArboristasync = async jwt => {\n  let data;\n  if (_config.default.internalLocalTest) {\n    data = {\n      resources: [\n      // these are just for testing\n      '/programs/DEV/projects/test', '/programs/jnkns/projects/jenkins']\n    };\n  } else {\n    data = await _arboristClient.default.listAuthorizedResources(jwt);\n  }\n  _logger.default.debug('[authMiddleware] list resources: ', (0, _stringify.default)(data, null, 4));\n  if (data && data.error) {\n    // if user is not in arborist db, assume has no access to any\n    if (data.error.code === 404) {\n      return [];\n    }\n    throw new _error.default(data.error.code, data.error.message);\n  }\n  const resources = data.resources ? _lodash.default.uniq(data.resources) : [];\n  return resources;\n};\nexports.getAccessibleResourcesFromArboristasync = getAccessibleResourcesFromArboristasync;\nconst buildFilterWithResourceList = (resourceList = []) => {\n  const filter = {\n    IN: {\n      [_config.default.esConfig.authFilterField]: [...resourceList]\n    }\n  };\n  return filter;\n};\nexports.buildFilterWithResourceList = buildFilterWithResourceList;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9kYXNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbG9nZ2VyIiwiX2FyYm9yaXN0Q2xpZW50IiwiX2Vycm9yIiwiX2NvbmZpZyIsImdldEFjY2Vzc2libGVSZXNvdXJjZXNGcm9tQXJib3Jpc3Rhc3luYyIsImp3dCIsImRhdGEiLCJjb25maWciLCJpbnRlcm5hbExvY2FsVGVzdCIsInJlc291cmNlcyIsImFyYm9yaXN0Q2xpZW50IiwibGlzdEF1dGhvcml6ZWRSZXNvdXJjZXMiLCJsb2ciLCJkZWJ1ZyIsIl9zdHJpbmdpZnkiLCJkZWZhdWx0IiwiZXJyb3IiLCJjb2RlIiwiQ29kZWRFcnJvciIsIm1lc3NhZ2UiLCJfIiwidW5pcSIsImV4cG9ydHMiLCJidWlsZEZpbHRlcldpdGhSZXNvdXJjZUxpc3QiLCJyZXNvdXJjZUxpc3QiLCJmaWx0ZXIiLCJJTiIsImVzQ29uZmlnIiwiYXV0aEZpbHRlckZpZWxkIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9leG91c2VyL0RvY3VtZW50cy9Qcm9qZWN0cy9hbmFnaW5lL3NyYy9zZXJ2ZXIvYXV0aC8iLCJzb3VyY2VzIjpbInV0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgYXJib3Jpc3RDbGllbnQgZnJvbSAnLi9hcmJvcmlzdENsaWVudCc7XG5pbXBvcnQgQ29kZWRFcnJvciBmcm9tICcuLi91dGlscy9lcnJvcic7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZyc7XG5cbmV4cG9ydCBjb25zdCBnZXRBY2Nlc3NpYmxlUmVzb3VyY2VzRnJvbUFyYm9yaXN0YXN5bmMgPSBhc3luYyAoand0KSA9PiB7XG4gICAgbGV0IGRhdGE7XG4gICAgaWYgKGNvbmZpZy5pbnRlcm5hbExvY2FsVGVzdCkge1xuICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgcmVzb3VyY2VzOiBbIC8vIHRoZXNlIGFyZSBqdXN0IGZvciB0ZXN0aW5nXG4gICAgICAgICAgICAgICAgJy9wcm9ncmFtcy9ERVYvcHJvamVjdHMvdGVzdCcsXG4gICAgICAgICAgICAgICAgJy9wcm9ncmFtcy9qbmtucy9wcm9qZWN0cy9qZW5raW5zJyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YSA9IGF3YWl0IGFyYm9yaXN0Q2xpZW50Lmxpc3RBdXRob3JpemVkUmVzb3VyY2VzKGp3dCk7XG4gICAgfVxuXG4gICAgbG9nLmRlYnVnKCdbYXV0aE1pZGRsZXdhcmVdIGxpc3QgcmVzb3VyY2VzOiAnLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCA0KSk7XG4gICAgaWYgKGRhdGEgJiYgZGF0YS5lcnJvcikge1xuICAgICAgICAvLyBpZiB1c2VyIGlzIG5vdCBpbiBhcmJvcmlzdCBkYiwgYXNzdW1lIGhhcyBubyBhY2Nlc3MgdG8gYW55XG4gICAgICAgIGlmIChkYXRhLmVycm9yLmNvZGUgPT09IDQwNCkge1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBDb2RlZEVycm9yKGRhdGEuZXJyb3IuY29kZSwgZGF0YS5lcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gICAgY29uc3QgcmVzb3VyY2VzID0gZGF0YS5yZXNvdXJjZXMgPyBfLnVuaXEoZGF0YS5yZXNvdXJjZXMpIDogW107XG4gICAgcmV0dXJuIHJlc291cmNlcztcbn07XG5cbmV4cG9ydCBjb25zdCBidWlsZEZpbHRlcldpdGhSZXNvdXJjZUxpc3QgPSAocmVzb3VyY2VMaXN0ID0gW10pID0+IHtcbiAgICBjb25zdCBmaWx0ZXIgPSB7XG4gICAgICAgIElOOiB7XG4gICAgICAgICAgICBbY29uZmlnLmVzQ29uZmlnLmF1dGhGaWx0ZXJGaWVsZF06IFsuLi5yZXNvdXJjZUxpc3RdLFxuICAgICAgICB9LFxuICAgIH07XG4gICAgcmV0dXJuIGZpbHRlcjtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLGVBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLE1BQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLE9BQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUVPLE1BQU1LLHVDQUF1QyxHQUFHLE1BQU9DLEdBQUcsSUFBSztFQUNsRSxJQUFJQyxJQUFJO0VBQ1IsSUFBSUMsZUFBTSxDQUFDQyxpQkFBaUIsRUFBRTtJQUMxQkYsSUFBSSxHQUFHO01BQ0hHLFNBQVMsRUFBRTtNQUFFO01BQ1QsNkJBQTZCLEVBQzdCLGtDQUFrQztJQUUxQyxDQUFDO0VBQ0wsQ0FBQyxNQUFNO0lBQ0hILElBQUksR0FBRyxNQUFNSSx1QkFBYyxDQUFDQyx1QkFBdUIsQ0FBQ04sR0FBRyxDQUFDO0VBQzVEO0VBRUFPLGVBQUcsQ0FBQ0MsS0FBSyxDQUFDLG1DQUFtQyxFQUFFLElBQUFDLFVBQUEsQ0FBQUMsT0FBQSxFQUFlVCxJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQzdFLElBQUlBLElBQUksSUFBSUEsSUFBSSxDQUFDVSxLQUFLLEVBQUU7SUFDcEI7SUFDQSxJQUFJVixJQUFJLENBQUNVLEtBQUssQ0FBQ0MsSUFBSSxLQUFLLEdBQUcsRUFBRTtNQUN6QixPQUFPLEVBQUU7SUFDYjtJQUNBLE1BQU0sSUFBSUMsY0FBVSxDQUFDWixJQUFJLENBQUNVLEtBQUssQ0FBQ0MsSUFBSSxFQUFFWCxJQUFJLENBQUNVLEtBQUssQ0FBQ0csT0FBTyxDQUFDO0VBQzdEO0VBQ0EsTUFBTVYsU0FBUyxHQUFHSCxJQUFJLENBQUNHLFNBQVMsR0FBR1csZUFBQyxDQUFDQyxJQUFJLENBQUNmLElBQUksQ0FBQ0csU0FBUyxDQUFDLEdBQUcsRUFBRTtFQUM5RCxPQUFPQSxTQUFTO0FBQ3BCLENBQUM7QUFBQ2EsT0FBQSxDQUFBbEIsdUNBQUEsR0FBQUEsdUNBQUE7QUFFSyxNQUFNbUIsMkJBQTJCLEdBQUdBLENBQUNDLFlBQVksR0FBRyxFQUFFLEtBQUs7RUFDOUQsTUFBTUMsTUFBTSxHQUFHO0lBQ1hDLEVBQUUsRUFBRTtNQUNBLENBQUNuQixlQUFNLENBQUNvQixRQUFRLENBQUNDLGVBQWUsR0FBRyxDQUFDLEdBQUdKLFlBQVk7SUFDdkQ7RUFDSixDQUFDO0VBQ0QsT0FBT0MsTUFBTTtBQUNqQixDQUFDO0FBQUNILE9BQUEsQ0FBQUMsMkJBQUEsR0FBQUEsMkJBQUEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_lodash","_interopRequireDefault","require","_logger","_arboristClient","_error","_config","getAccessibleResourcesFromArboristasync","jwt","data","config","internalLocalTest","resources","arboristClient","listAuthorizedResources","log","debug","_stringify","default","error","code","CodedError","message","_","uniq","exports","buildFilterWithResourceList","resourceList","filter","IN","esConfig","authFilterField"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/auth/","sources":["utils.js"],"sourcesContent":["import _ from 'lodash';\nimport log from '../logger';\nimport arboristClient from './arboristClient';\nimport CodedError from '../utils/error';\nimport config from '../config';\n\nexport const getAccessibleResourcesFromArboristasync = async (jwt) => {\n    let data;\n    if (config.internalLocalTest) {\n        data = {\n            resources: [ // these are just for testing\n                '/programs/DEV/projects/test',\n                '/programs/jnkns/projects/jenkins',\n            ],\n        };\n    } else {\n        data = await arboristClient.listAuthorizedResources(jwt);\n    }\n\n    log.debug('[authMiddleware] list resources: ', JSON.stringify(data, null, 4));\n    if (data && data.error) {\n        // if user is not in arborist db, assume has no access to any\n        if (data.error.code === 404) {\n            return [];\n        }\n        throw new CodedError(data.error.code, data.error.message);\n    }\n    const resources = data.resources ? _.uniq(data.resources) : [];\n    return resources;\n};\n\nexport const buildFilterWithResourceList = (resourceList = []) => {\n    const filter = {\n        IN: {\n            [config.esConfig.authFilterField]: [...resourceList],\n        },\n    };\n    return filter;\n};\n"],"mappings":";;;;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,eAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,MAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,OAAA,GAAAL,sBAAA,CAAAC,OAAA;AAEO,MAAMK,uCAAuC,GAAG,MAAOC,GAAG,IAAK;EAClE,IAAIC,IAAI;EACR,IAAIC,eAAM,CAACC,iBAAiB,EAAE;IAC1BF,IAAI,GAAG;MACHG,SAAS,EAAE;MAAE;MACT,6BAA6B,EAC7B,kCAAkC;IAE1C,CAAC;EACL,CAAC,MAAM;IACHH,IAAI,GAAG,MAAMI,uBAAc,CAACC,uBAAuB,CAACN,GAAG,CAAC;EAC5D;EAEAO,eAAG,CAACC,KAAK,CAAC,mCAAmC,EAAE,IAAAC,UAAA,CAAAC,OAAA,EAAeT,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;EAC7E,IAAIA,IAAI,IAAIA,IAAI,CAACU,KAAK,EAAE;IACpB;IACA,IAAIV,IAAI,CAACU,KAAK,CAACC,IAAI,KAAK,GAAG,EAAE;MACzB,OAAO,EAAE;IACb;IACA,MAAM,IAAIC,cAAU,CAACZ,IAAI,CAACU,KAAK,CAACC,IAAI,EAAEX,IAAI,CAACU,KAAK,CAACG,OAAO,CAAC;EAC7D;EACA,MAAMV,SAAS,GAAGH,IAAI,CAACG,SAAS,GAAGW,eAAC,CAACC,IAAI,CAACf,IAAI,CAACG,SAAS,CAAC,GAAG,EAAE;EAC9D,OAAOA,SAAS;AACpB,CAAC;AAACa,OAAA,CAAAlB,uCAAA,GAAAA,uCAAA;AAEK,MAAMmB,2BAA2B,GAAGA,CAACC,YAAY,GAAG,EAAE,KAAK;EAC9D,MAAMC,MAAM,GAAG;IACXC,EAAE,EAAE;MACA,CAACnB,eAAM,CAACoB,QAAQ,CAACC,eAAe,GAAG,CAAC,GAAGJ,YAAY;IACvD;EACJ,CAAC;EACD,OAAOC,MAAM;AACjB,CAAC;AAACH,OAAA,CAAAC,2BAAA,GAAAA,2BAAA","ignoreList":[]}},"mtime":1741362950908},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/auth/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/auth/arboristClient.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\nvar _some = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/some\"));\nvar _nodeFetch = _interopRequireDefault(require(\"node-fetch\"));\nvar _config = _interopRequireDefault(require(\"../config\"));\nvar _logger = _interopRequireDefault(require(\"../logger\"));\nvar _error = _interopRequireDefault(require(\"../utils/error\"));\nclass ArboristClient {\n  constructor(arboristEndpoint) {\n    this.baseEndpoint = arboristEndpoint;\n  }\n  listAuthorizedResources(jwt) {\n    // Make request to arborist for list of resources with access\n    const resourcesEndpoint = `${this.baseEndpoint}/auth/mapping`;\n    _logger.default.debug('[ArboristClient] listAuthorizedResources jwt: ', jwt);\n    const headers = jwt ? {\n      Authorization: `bearer ${jwt}`\n    } : {};\n    return (0, _nodeFetch.default)(resourcesEndpoint, {\n      method: 'GET',\n      headers\n    }).then(response => response.json()).then(result => {\n      var _context;\n      const data = {\n        resources: []\n      };\n      (0, _forEach.default)(_context = (0, _keys.default)(result)).call(_context, key => {\n        var _context2;\n        // logic: you have access to a project if you have the following access:\n        // method 'read' (or '*' - all methods) to service 'guppy' (or '*' - all services)\n        // on the project resource.\n        if (result[key] && (0, _some.default)(_context2 = result[key]).call(_context2, x => (x.method === 'read' || x.method === '*') && (x.service === 'guppy' || x.service === '*'))) {\n          data.resources.push(key);\n        }\n      });\n      _logger.default.debug('[ArboristClient] data: ', data);\n      return data;\n    }, err => {\n      _logger.default.error(err);\n      throw new _error.default(500, err);\n    });\n  }\n}\nvar _default = exports.default = new ArboristClient(_config.default.arboristEndpoint);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUZldGNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfY29uZmlnIiwiX2xvZ2dlciIsIl9lcnJvciIsIkFyYm9yaXN0Q2xpZW50IiwiY29uc3RydWN0b3IiLCJhcmJvcmlzdEVuZHBvaW50IiwiYmFzZUVuZHBvaW50IiwibGlzdEF1dGhvcml6ZWRSZXNvdXJjZXMiLCJqd3QiLCJyZXNvdXJjZXNFbmRwb2ludCIsImxvZyIsImRlYnVnIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJyZXNwb25zZSIsImpzb24iLCJyZXN1bHQiLCJfY29udGV4dCIsImRhdGEiLCJyZXNvdXJjZXMiLCJfZm9yRWFjaCIsImRlZmF1bHQiLCJfa2V5cyIsImNhbGwiLCJrZXkiLCJfY29udGV4dDIiLCJfc29tZSIsIngiLCJzZXJ2aWNlIiwicHVzaCIsImVyciIsImVycm9yIiwiQ29kZWRFcnJvciIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImNvbmZpZyJdLCJzb3VyY2VSb290IjoiL2hvbWUvZXhvdXNlci9Eb2N1bWVudHMvUHJvamVjdHMvYW5hZ2luZS9zcmMvc2VydmVyL2F1dGgvIiwic291cmNlcyI6WyJhcmJvcmlzdENsaWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZmV0Y2ggZnJvbSAnbm9kZS1mZXRjaCc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4uL2NvbmZpZyc7XG5pbXBvcnQgbG9nIGZyb20gJy4uL2xvZ2dlcic7XG5pbXBvcnQgQ29kZWRFcnJvciBmcm9tICcuLi91dGlscy9lcnJvcic7XG5cbmNsYXNzIEFyYm9yaXN0Q2xpZW50IHtcbiAgICBjb25zdHJ1Y3RvcihhcmJvcmlzdEVuZHBvaW50KSB7XG4gICAgICAgIHRoaXMuYmFzZUVuZHBvaW50ID0gYXJib3Jpc3RFbmRwb2ludDtcbiAgICB9XG5cbiAgICBsaXN0QXV0aG9yaXplZFJlc291cmNlcyhqd3QpIHtcbiAgICAgICAgLy8gTWFrZSByZXF1ZXN0IHRvIGFyYm9yaXN0IGZvciBsaXN0IG9mIHJlc291cmNlcyB3aXRoIGFjY2Vzc1xuICAgICAgICBjb25zdCByZXNvdXJjZXNFbmRwb2ludCA9IGAke3RoaXMuYmFzZUVuZHBvaW50fS9hdXRoL21hcHBpbmdgO1xuICAgICAgICBsb2cuZGVidWcoJ1tBcmJvcmlzdENsaWVudF0gbGlzdEF1dGhvcml6ZWRSZXNvdXJjZXMgand0OiAnLCBqd3QpO1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gKGp3dCkgPyB7IEF1dGhvcml6YXRpb246IGBiZWFyZXIgJHtqd3R9YCB9IDoge307XG4gICAgICAgIHJldHVybiBmZXRjaChcbiAgICAgICAgcmVzb3VyY2VzRW5kcG9pbnQsXG4gICAgICAgIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICB9LFxuICAgICAgICApLnRoZW4oXG4gICAgICAgICAgICAocmVzcG9uc2UpID0+IHJlc3BvbnNlLmpzb24oKSxcbiAgICAgICAgKS50aGVuKFxuICAgICAgICAgICAgKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VzOiBbXSxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gbG9naWM6IHlvdSBoYXZlIGFjY2VzcyB0byBhIHByb2plY3QgaWYgeW91IGhhdmUgdGhlIGZvbGxvd2luZyBhY2Nlc3M6XG4gICAgICAgICAgICAgICAgLy8gbWV0aG9kICdyZWFkJyAob3IgJyonIC0gYWxsIG1ldGhvZHMpIHRvIHNlcnZpY2UgJ2d1cHB5JyAob3IgJyonIC0gYWxsIHNlcnZpY2VzKVxuICAgICAgICAgICAgICAgIC8vIG9uIHRoZSBwcm9qZWN0IHJlc291cmNlLlxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHRba2V5XSAmJiByZXN1bHRba2V5XS5zb21lKCh4KSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICh4Lm1ldGhvZCA9PT0gJ3JlYWQnIHx8IHgubWV0aG9kID09PSAnKicpXG4gICAgICAgICAgICAgICAgJiYgKHguc2VydmljZSA9PT0gJ2d1cHB5JyB8fCB4LnNlcnZpY2UgPT09ICcqJylcbiAgICAgICAgICAgICAgICApKSkge1xuICAgICAgICAgICAgICAgICAgICBkYXRhLnJlc291cmNlcy5wdXNoKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGxvZy5kZWJ1ZygnW0FyYm9yaXN0Q2xpZW50XSBkYXRhOiAnLCBkYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgbG9nLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IENvZGVkRXJyb3IoNTAwLCBlcnIpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBBcmJvcmlzdENsaWVudChjb25maWcuYXJib3Jpc3RFbmRwb2ludCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsSUFBQUEsVUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBRUEsTUFBTUksY0FBYyxDQUFDO0VBQ2pCQyxXQUFXQSxDQUFDQyxnQkFBZ0IsRUFBRTtJQUMxQixJQUFJLENBQUNDLFlBQVksR0FBR0QsZ0JBQWdCO0VBQ3hDO0VBRUFFLHVCQUF1QkEsQ0FBQ0MsR0FBRyxFQUFFO0lBQ3pCO0lBQ0EsTUFBTUMsaUJBQWlCLEdBQUcsR0FBRyxJQUFJLENBQUNILFlBQVksZUFBZTtJQUM3REksZUFBRyxDQUFDQyxLQUFLLENBQUMsZ0RBQWdELEVBQUVILEdBQUcsQ0FBQztJQUNoRSxNQUFNSSxPQUFPLEdBQUlKLEdBQUcsR0FBSTtNQUFFSyxhQUFhLEVBQUUsVUFBVUwsR0FBRztJQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDL0QsT0FBTyxJQUFBTSxrQkFBSyxFQUNaTCxpQkFBaUIsRUFDakI7TUFDSU0sTUFBTSxFQUFFLEtBQUs7TUFDYkg7SUFDSixDQUNBLENBQUMsQ0FBQ0ksSUFBSSxDQUNEQyxRQUFRLElBQUtBLFFBQVEsQ0FBQ0MsSUFBSSxDQUFDLENBQ2hDLENBQUMsQ0FBQ0YsSUFBSSxDQUNERyxNQUFNLElBQUs7TUFBQSxJQUFBQyxRQUFBO01BQ1IsTUFBTUMsSUFBSSxHQUFHO1FBQ2JDLFNBQVMsRUFBRTtNQUNYLENBQUM7TUFDRCxJQUFBQyxRQUFBLENBQUFDLE9BQUEsRUFBQUosUUFBQSxPQUFBSyxLQUFBLENBQUFELE9BQUEsRUFBWUwsTUFBTSxDQUFDLEVBQUFPLElBQUEsQ0FBQU4sUUFBQSxFQUFVTyxHQUFHLElBQUs7UUFBQSxJQUFBQyxTQUFBO1FBQ3JDO1FBQ0E7UUFDQTtRQUNBLElBQUlULE1BQU0sQ0FBQ1EsR0FBRyxDQUFDLElBQUksSUFBQUUsS0FBQSxDQUFBTCxPQUFBLEVBQUFJLFNBQUEsR0FBQVQsTUFBTSxDQUFDUSxHQUFHLENBQUMsRUFBQUQsSUFBQSxDQUFBRSxTQUFBLEVBQU9FLENBQUMsSUFDbEMsQ0FBQ0EsQ0FBQyxDQUFDZixNQUFNLEtBQUssTUFBTSxJQUFJZSxDQUFDLENBQUNmLE1BQU0sS0FBSyxHQUFHLE1BQ3hDZSxDQUFDLENBQUNDLE9BQU8sS0FBSyxPQUFPLElBQUlELENBQUMsQ0FBQ0MsT0FBTyxLQUFLLEdBQUcsQ0FDN0MsQ0FBQyxFQUFFO1VBQ0FWLElBQUksQ0FBQ0MsU0FBUyxDQUFDVSxJQUFJLENBQUNMLEdBQUcsQ0FBQztRQUM1QjtNQUNBLENBQUMsQ0FBQztNQUNGakIsZUFBRyxDQUFDQyxLQUFLLENBQUMseUJBQXlCLEVBQUVVLElBQUksQ0FBQztNQUMxQyxPQUFPQSxJQUFJO0lBQ2YsQ0FBQyxFQUNBWSxHQUFHLElBQUs7TUFDTHZCLGVBQUcsQ0FBQ3dCLEtBQUssQ0FBQ0QsR0FBRyxDQUFDO01BQ2QsTUFBTSxJQUFJRSxjQUFVLENBQUMsR0FBRyxFQUFFRixHQUFHLENBQUM7SUFDbEMsQ0FDSixDQUFDO0VBQ0w7QUFDSjtBQUFDLElBQUFHLFFBQUEsR0FBQUMsT0FBQSxDQUFBYixPQUFBLEdBRWMsSUFBSXJCLGNBQWMsQ0FBQ21DLGVBQU0sQ0FBQ2pDLGdCQUFnQixDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_nodeFetch","_interopRequireDefault","require","_config","_logger","_error","ArboristClient","constructor","arboristEndpoint","baseEndpoint","listAuthorizedResources","jwt","resourcesEndpoint","log","debug","headers","Authorization","fetch","method","then","response","json","result","_context","data","resources","_forEach","default","_keys","call","key","_context2","_some","x","service","push","err","error","CodedError","_default","exports","config"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/auth/","sources":["arboristClient.js"],"sourcesContent":["import fetch from 'node-fetch';\nimport config from '../config';\nimport log from '../logger';\nimport CodedError from '../utils/error';\n\nclass ArboristClient {\n    constructor(arboristEndpoint) {\n        this.baseEndpoint = arboristEndpoint;\n    }\n\n    listAuthorizedResources(jwt) {\n        // Make request to arborist for list of resources with access\n        const resourcesEndpoint = `${this.baseEndpoint}/auth/mapping`;\n        log.debug('[ArboristClient] listAuthorizedResources jwt: ', jwt);\n        const headers = (jwt) ? { Authorization: `bearer ${jwt}` } : {};\n        return fetch(\n        resourcesEndpoint,\n        {\n            method: 'GET',\n            headers,\n        },\n        ).then(\n            (response) => response.json(),\n        ).then(\n            (result) => {\n                const data = {\n                resources: [],\n                };\n                Object.keys(result).forEach((key) => {\n                // logic: you have access to a project if you have the following access:\n                // method 'read' (or '*' - all methods) to service 'guppy' (or '*' - all services)\n                // on the project resource.\n                if (result[key] && result[key].some((x) => (\n                    (x.method === 'read' || x.method === '*')\n                && (x.service === 'guppy' || x.service === '*')\n                ))) {\n                    data.resources.push(key);\n                }\n                });\n                log.debug('[ArboristClient] data: ', data);\n                return data;\n            },\n            (err) => {\n                log.error(err);\n                throw new CodedError(500, err);\n            },\n        );\n    }\n}\n\nexport default new ArboristClient(config.arboristEndpoint);\n"],"mappings":";;;;;;;;;;;AAAA,IAAAA,UAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,MAAA,GAAAJ,sBAAA,CAAAC,OAAA;AAEA,MAAMI,cAAc,CAAC;EACjBC,WAAWA,CAACC,gBAAgB,EAAE;IAC1B,IAAI,CAACC,YAAY,GAAGD,gBAAgB;EACxC;EAEAE,uBAAuBA,CAACC,GAAG,EAAE;IACzB;IACA,MAAMC,iBAAiB,GAAG,GAAG,IAAI,CAACH,YAAY,eAAe;IAC7DI,eAAG,CAACC,KAAK,CAAC,gDAAgD,EAAEH,GAAG,CAAC;IAChE,MAAMI,OAAO,GAAIJ,GAAG,GAAI;MAAEK,aAAa,EAAE,UAAUL,GAAG;IAAG,CAAC,GAAG,CAAC,CAAC;IAC/D,OAAO,IAAAM,kBAAK,EACZL,iBAAiB,EACjB;MACIM,MAAM,EAAE,KAAK;MACbH;IACJ,CACA,CAAC,CAACI,IAAI,CACDC,QAAQ,IAAKA,QAAQ,CAACC,IAAI,CAAC,CAChC,CAAC,CAACF,IAAI,CACDG,MAAM,IAAK;MAAA,IAAAC,QAAA;MACR,MAAMC,IAAI,GAAG;QACbC,SAAS,EAAE;MACX,CAAC;MACD,IAAAC,QAAA,CAAAC,OAAA,EAAAJ,QAAA,OAAAK,KAAA,CAAAD,OAAA,EAAYL,MAAM,CAAC,EAAAO,IAAA,CAAAN,QAAA,EAAUO,GAAG,IAAK;QAAA,IAAAC,SAAA;QACrC;QACA;QACA;QACA,IAAIT,MAAM,CAACQ,GAAG,CAAC,IAAI,IAAAE,KAAA,CAAAL,OAAA,EAAAI,SAAA,GAAAT,MAAM,CAACQ,GAAG,CAAC,EAAAD,IAAA,CAAAE,SAAA,EAAOE,CAAC,IAClC,CAACA,CAAC,CAACf,MAAM,KAAK,MAAM,IAAIe,CAAC,CAACf,MAAM,KAAK,GAAG,MACxCe,CAAC,CAACC,OAAO,KAAK,OAAO,IAAID,CAAC,CAACC,OAAO,KAAK,GAAG,CAC7C,CAAC,EAAE;UACAV,IAAI,CAACC,SAAS,CAACU,IAAI,CAACL,GAAG,CAAC;QAC5B;MACA,CAAC,CAAC;MACFjB,eAAG,CAACC,KAAK,CAAC,yBAAyB,EAAEU,IAAI,CAAC;MAC1C,OAAOA,IAAI;IACf,CAAC,EACAY,GAAG,IAAK;MACLvB,eAAG,CAACwB,KAAK,CAACD,GAAG,CAAC;MACd,MAAM,IAAIE,cAAU,CAAC,GAAG,EAAEF,GAAG,CAAC;IAClC,CACJ,CAAC;EACL;AACJ;AAAC,IAAAG,QAAA,GAAAC,OAAA,CAAAb,OAAA,GAEc,IAAIrB,cAAc,CAACmC,eAAM,CAACjC,gBAAgB,CAAC","ignoreList":[]}},"mtime":1741363234483},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/anagine.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/objectWithoutPropertiesLoose\"));\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _child_process = require(\"child_process\");\nvar _logger = _interopRequireDefault(require(\"./logger\"));\nvar _config = _interopRequireDefault(require(\"./config\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nconst _excluded = [\"model\", \"prompt\", \"stream\"],\n  _excluded2 = [\"model\", \"prompt\", \"stream\"];\nconst ollamaService = require('./utils/llm');\nconst anagineRouter = _express.default.Router();\nanagineRouter.get('/hello', (req, res) => {\n  _logger.default.info('Hello World');\n  _logger.default.info(new Date().toLocaleString('en-US', {\n    dateStyle: 'full',\n    timeStyle: 'long',\n    timeZone: 'UTC'\n  }));\n  res.send({\n    text: \"Hello World\",\n    time: new Date().toLocaleString('en-US', {\n      dateStyle: 'full',\n      timeStyle: 'long',\n      timeZone: 'UTC'\n    }),\n    subject: [{\n      \"patient\": \"Patient A\",\n      \"age\": 30,\n      \"hospital\": {\n        \"name\": \"General Hospital\",\n        \"location\": \"Indiana\"\n      }\n    }, {\n      \"patient\": \"Patient B\",\n      \"age\": 65,\n      \"hospital\": {\n        \"name\": \"Another Hospital\",\n        \"location\": \"New York\"\n      }\n    }]\n  });\n  return 0;\n});\nanagineRouter.get('/pdf', (req, res) => {\n  // log.info(filepath);\n  const filepath = \"/home/exouser/Downloads/gen3.pdf\";\n  // res.contentType('application/pdf');\n  res.download(filepath);\n  return 0;\n});\nanagineRouter.get('/R/lm', (req, res) => {\n  const data = {\n    x: [1, 2, 3],\n    y: [3, 5, 7]\n  };\n  const inputJSON = (0, _stringify.default)(data);\n  const rScriptPath = _path.default.join(__dirname, '../R/lm.R');\n  _logger.default.info('rScriptPath:', rScriptPath);\n  const rProcess = (0, _child_process.spawn)('Rscript', [rScriptPath, inputJSON]);\n  let output = '';\n  let errorOutput = '';\n\n  // Collect data from stdout\n  rProcess.stdout.on('data', dataChunk => {\n    output += dataChunk.toString();\n  });\n  _logger.default.info('output:', output);\n\n  // Collect errors from stderr\n  rProcess.stderr.on('data', dataChunk => {\n    errorOutput += dataChunk.toString();\n  });\n\n  // When the R script finishes\n  rProcess.on('close', code => {\n    if (code !== 0) {\n      console.error('R script error:', errorOutput);\n      return res.status(500).send(`Error running R script: ${errorOutput}`);\n    }\n    try {\n      // Parse the JSON output from the R script\n      const result = JSON.parse(output);\n      result[\"time\"] = new Date().toLocaleString('en-US', {\n        dateStyle: 'full',\n        timeStyle: 'long',\n        timeZone: 'UTC'\n      });\n      res.json(result);\n    } catch (err) {\n      console.error('Error parsing R script output:', err);\n      res.status(500).send('Error parsing R script output.');\n    }\n  });\n});\nanagineRouter.get('/llm/chat', (req, res) => {\n  const _req$body = req.body,\n    {\n      model = _config.default.ollamaConfig.model,\n      prompt,\n      stream = false\n    } = _req$body,\n    options = (0, _objectWithoutPropertiesLoose2.default)(_req$body, _excluded);\n  prompt = 'Hi, who are you?';\n  // if (!prompt) {\n  //     return res.status(400).json({ error: 'Prompt is required' });\n  // }\n  // If not streaming, return the full response\n  if (!stream) {\n    const response = ollamaService.chatWithModel(model, prompt, options);\n    return res.json(response);\n  }\n});\nanagineRouter.get('/llm/generate', (req, res) => {\n  const _req$body2 = req.body,\n    {\n      model = _config.default.ollamaConfig.model,\n      prompt,\n      stream = false\n    } = _req$body2,\n    options = (0, _objectWithoutPropertiesLoose2.default)(_req$body2, _excluded2);\n  // if (!prompt) {\n  //     return res.status(400).json({ error: 'Prompt is required' });\n  // }\n  prompt = 'Hi, who are you?';\n  // If not streaming, return the full response\n  if (!stream) {\n    const response = ollamaService.generateText(model, prompt, options);\n    return res.json(response);\n  }\n});\nvar _default = exports.default = anagineRouter;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NoaWxkX3Byb2Nlc3MiLCJfbG9nZ2VyIiwiX2NvbmZpZyIsIl9wYXRoIiwiX2V4Y2x1ZGVkIiwiX2V4Y2x1ZGVkMiIsIm9sbGFtYVNlcnZpY2UiLCJhbmFnaW5lUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsInJlcSIsInJlcyIsImxvZyIsImluZm8iLCJEYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJkYXRlU3R5bGUiLCJ0aW1lU3R5bGUiLCJ0aW1lWm9uZSIsInNlbmQiLCJ0ZXh0IiwidGltZSIsInN1YmplY3QiLCJmaWxlcGF0aCIsImRvd25sb2FkIiwiZGF0YSIsIngiLCJ5IiwiaW5wdXRKU09OIiwiX3N0cmluZ2lmeSIsImRlZmF1bHQiLCJyU2NyaXB0UGF0aCIsInBhdGgiLCJqb2luIiwiX19kaXJuYW1lIiwiclByb2Nlc3MiLCJzcGF3biIsIm91dHB1dCIsImVycm9yT3V0cHV0Iiwic3Rkb3V0Iiwib24iLCJkYXRhQ2h1bmsiLCJ0b1N0cmluZyIsInN0ZGVyciIsImNvZGUiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGF0dXMiLCJyZXN1bHQiLCJKU09OIiwicGFyc2UiLCJqc29uIiwiZXJyIiwiX3JlcSRib2R5IiwiYm9keSIsIm1vZGVsIiwiY29uZmlnIiwib2xsYW1hQ29uZmlnIiwicHJvbXB0Iiwic3RyZWFtIiwib3B0aW9ucyIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlMiIsInJlc3BvbnNlIiwiY2hhdFdpdGhNb2RlbCIsIl9yZXEkYm9keTIiLCJnZW5lcmF0ZVRleHQiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9ob21lL2V4b3VzZXIvRG9jdW1lbnRzL1Byb2plY3RzL2FuYWdpbmUvc3JjL3NlcnZlci8iLCJzb3VyY2VzIjpbImFuYWdpbmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBzcGF3biB9IGZyb20gJ2NoaWxkX3Byb2Nlc3MnO1xuaW1wb3J0IGxvZyBmcm9tICcuL2xvZ2dlcic7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcbmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnO1xuXG5cbmNvbnN0IG9sbGFtYVNlcnZpY2UgPSByZXF1aXJlKCcuL3V0aWxzL2xsbScpO1xuXG5jb25zdCBhbmFnaW5lUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuXG5cbmFuYWdpbmVSb3V0ZXIuZ2V0KCcvaGVsbG8nLCAocmVxLCByZXMpID0+IHtcbiAgICBsb2cuaW5mbygnSGVsbG8gV29ybGQnKTtcbiAgICBsb2cuaW5mbyhuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHtcbiAgICAgIGRhdGVTdHlsZTogJ2Z1bGwnLFxuICAgICAgdGltZVN0eWxlOiAnbG9uZycsXG4gICAgICB0aW1lWm9uZTogJ1VUQydcbiAgICB9KSk7XG4gICAgcmVzLnNlbmQoe1xuICAgICAgICB0ZXh0OiBcIkhlbGxvIFdvcmxkXCIsXG4gICAgICAgIHRpbWU6IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywge1xuICAgICAgICAgICAgZGF0ZVN0eWxlOiAnZnVsbCcsXG4gICAgICAgICAgICB0aW1lU3R5bGU6ICdsb25nJyxcbiAgICAgICAgICAgIHRpbWVab25lOiAnVVRDJ1xuICAgICAgICB9KSxcbiAgICAgICAgc3ViamVjdDogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwicGF0aWVudFwiOiBcIlBhdGllbnQgQVwiLFxuICAgICAgICAgICAgICAgIFwiYWdlXCI6IDMwLFxuICAgICAgICAgICAgICAgIFwiaG9zcGl0YWxcIjoge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJHZW5lcmFsIEhvc3BpdGFsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibG9jYXRpb25cIjogXCJJbmRpYW5hXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwicGF0aWVudFwiOiBcIlBhdGllbnQgQlwiLFxuICAgICAgICAgICAgICAgIFwiYWdlXCI6IDY1LFxuICAgICAgICAgICAgICAgIFwiaG9zcGl0YWxcIjoge1xuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogXCJBbm90aGVyIEhvc3BpdGFsXCIsXG4gICAgICAgICAgICAgICAgICAgIFwibG9jYXRpb25cIjogXCJOZXcgWW9ya1wiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgIF0sXG4gICAgfSk7XG4gICAgcmV0dXJuIDA7XG59KTtcblxuYW5hZ2luZVJvdXRlci5nZXQoJy9wZGYnLCAocmVxLCByZXMpID0+IHtcbiAgICAvLyBsb2cuaW5mbyhmaWxlcGF0aCk7XG4gICAgY29uc3QgZmlsZXBhdGggPSBcIi9ob21lL2V4b3VzZXIvRG93bmxvYWRzL2dlbjMucGRmXCJcbiAgICAvLyByZXMuY29udGVudFR5cGUoJ2FwcGxpY2F0aW9uL3BkZicpO1xuICAgIHJlcy5kb3dubG9hZChmaWxlcGF0aCk7XG4gICAgcmV0dXJuIDA7XG59KTtcblxuXG5hbmFnaW5lUm91dGVyLmdldCgnL1IvbG0nLCAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBkYXRhID0geyB4OiBbMSwgMiwgM10sIHk6IFszLCA1LCA3XSB9O1xuICAgIGNvbnN0IGlucHV0SlNPTiA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIGNvbnN0IHJTY3JpcHRQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uL1IvbG0uUicpO1xuICAgIGxvZy5pbmZvKCdyU2NyaXB0UGF0aDonLCByU2NyaXB0UGF0aCk7XG4gICAgY29uc3QgclByb2Nlc3MgPSBzcGF3bignUnNjcmlwdCcsIFtyU2NyaXB0UGF0aCwgaW5wdXRKU09OXSk7XG5cbiAgICBsZXQgb3V0cHV0ID0gJyc7XG4gICAgbGV0IGVycm9yT3V0cHV0ID0gJyc7XG5cbiAgICAvLyBDb2xsZWN0IGRhdGEgZnJvbSBzdGRvdXRcbiAgICByUHJvY2Vzcy5zdGRvdXQub24oJ2RhdGEnLCAoZGF0YUNodW5rKSA9PiB7XG4gICAgICAgIG91dHB1dCArPSBkYXRhQ2h1bmsudG9TdHJpbmcoKTtcbiAgICB9KTtcbiAgICBsb2cuaW5mbygnb3V0cHV0OicsIG91dHB1dCk7XG5cbiAgICAvLyBDb2xsZWN0IGVycm9ycyBmcm9tIHN0ZGVyclxuICAgIHJQcm9jZXNzLnN0ZGVyci5vbignZGF0YScsIChkYXRhQ2h1bmspID0+IHtcbiAgICAgICAgZXJyb3JPdXRwdXQgKz0gZGF0YUNodW5rLnRvU3RyaW5nKCk7XG4gICAgfSk7XG5cbiAgICAvLyBXaGVuIHRoZSBSIHNjcmlwdCBmaW5pc2hlc1xuICAgIHJQcm9jZXNzLm9uKCdjbG9zZScsIChjb2RlKSA9PiB7XG4gICAgICAgIGlmIChjb2RlICE9PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdSIHNjcmlwdCBlcnJvcjonLCBlcnJvck91dHB1dCk7XG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLnNlbmQoYEVycm9yIHJ1bm5pbmcgUiBzY3JpcHQ6ICR7ZXJyb3JPdXRwdXR9YCk7XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gUGFyc2UgdGhlIEpTT04gb3V0cHV0IGZyb20gdGhlIFIgc2NyaXB0XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBKU09OLnBhcnNlKG91dHB1dCk7XG4gICAgICAgICAgICByZXN1bHRbXCJ0aW1lXCJdID0gbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7XG4gICAgICAgICAgICAgICAgZGF0ZVN0eWxlOiAnZnVsbCcsXG4gICAgICAgICAgICAgICAgdGltZVN0eWxlOiAnbG9uZycsXG4gICAgICAgICAgICAgICAgdGltZVpvbmU6ICdVVEMnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJlcy5qc29uKHJlc3VsdCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBSIHNjcmlwdCBvdXRwdXQ6JywgZXJyKTtcbiAgICAgICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKCdFcnJvciBwYXJzaW5nIFIgc2NyaXB0IG91dHB1dC4nKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cbmFuYWdpbmVSb3V0ZXIuZ2V0KCcvbGxtL2NoYXQnLCAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCB7IG1vZGVsID0gY29uZmlnLm9sbGFtYUNvbmZpZy5tb2RlbCwgcHJvbXB0LCBzdHJlYW0gPSBmYWxzZSwgLi4ub3B0aW9ucyB9ID0gcmVxLmJvZHk7XG4gICAgcHJvbXB0ID0gJ0hpLCB3aG8gYXJlIHlvdT8nO1xuICAgIC8vIGlmICghcHJvbXB0KSB7XG4gICAgLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUHJvbXB0IGlzIHJlcXVpcmVkJyB9KTtcbiAgICAvLyB9XG4gICAgLy8gSWYgbm90IHN0cmVhbWluZywgcmV0dXJuIHRoZSBmdWxsIHJlc3BvbnNlXG4gICAgaWYgKCFzdHJlYW0pIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBvbGxhbWFTZXJ2aWNlLmNoYXRXaXRoTW9kZWwobW9kZWwsIHByb21wdCwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiByZXMuanNvbihyZXNwb25zZSk7XG4gICAgfVxufSk7XG5cbmFuYWdpbmVSb3V0ZXIuZ2V0KCcvbGxtL2dlbmVyYXRlJywgKHJlcSwgcmVzKSA9PiB7XG4gICAgY29uc3QgeyBtb2RlbCA9IGNvbmZpZy5vbGxhbWFDb25maWcubW9kZWwsIHByb21wdCwgc3RyZWFtID0gZmFsc2UsIC4uLm9wdGlvbnMgfSA9IHJlcS5ib2R5O1xuICAgIC8vIGlmICghcHJvbXB0KSB7XG4gICAgLy8gICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnUHJvbXB0IGlzIHJlcXVpcmVkJyB9KTtcbiAgICAvLyB9XG4gICAgcHJvbXB0ID0gJ0hpLCB3aG8gYXJlIHlvdT8nO1xuICAgIC8vIElmIG5vdCBzdHJlYW1pbmcsIHJldHVybiB0aGUgZnVsbCByZXNwb25zZVxuICAgIGlmICghc3RyZWFtKSB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gb2xsYW1hU2VydmljZS5nZW5lcmF0ZVRleHQobW9kZWwsIHByb21wdCwgb3B0aW9ucyk7XG4gICAgICAgIHJldHVybiByZXMuanNvbihyZXNwb25zZSk7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFuYWdpbmVSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxjQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxPQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxLQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFBd0IsTUFBQUssU0FBQTtFQUFBQyxVQUFBO0FBR3hCLE1BQU1DLGFBQWEsR0FBR1AsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUU1QyxNQUFNUSxhQUFhLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBSXRDRixhQUFhLENBQUNHLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDdENDLGVBQUcsQ0FBQ0MsSUFBSSxDQUFDLGFBQWEsQ0FBQztFQUN2QkQsZUFBRyxDQUFDQyxJQUFJLENBQUMsSUFBSUMsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsY0FBYyxDQUFDLE9BQU8sRUFBRTtJQUMxQ0MsU0FBUyxFQUFFLE1BQU07SUFDakJDLFNBQVMsRUFBRSxNQUFNO0lBQ2pCQyxRQUFRLEVBQUU7RUFDWixDQUFD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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_child_process","_logger","_config","_path","_excluded","_excluded2","ollamaService","anagineRouter","express","Router","get","req","res","log","info","Date","toLocaleString","dateStyle","timeStyle","timeZone","send","text","time","subject","filepath","download","data","x","y","inputJSON","_stringify","default","rScriptPath","path","join","__dirname","rProcess","spawn","output","errorOutput","stdout","on","dataChunk","toString","stderr","code","console","error","status","result","JSON","parse","json","err","_req$body","body","model","config","ollamaConfig","prompt","stream","options","_objectWithoutPropertiesLoose2","response","chatWithModel","_req$body2","generateText","_default","exports"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["anagine.js"],"sourcesContent":["import express from 'express';\nimport { spawn } from 'child_process';\nimport log from './logger';\nimport config from './config';\nimport path from 'path';\n\n\nconst ollamaService = require('./utils/llm');\n\nconst anagineRouter = express.Router();\n\n\n\nanagineRouter.get('/hello', (req, res) => {\n    log.info('Hello World');\n    log.info(new Date().toLocaleString('en-US', {\n      dateStyle: 'full',\n      timeStyle: 'long',\n      timeZone: 'UTC'\n    }));\n    res.send({\n        text: \"Hello World\",\n        time: new Date().toLocaleString('en-US', {\n            dateStyle: 'full',\n            timeStyle: 'long',\n            timeZone: 'UTC'\n        }),\n        subject: [\n            {\n                \"patient\": \"Patient A\",\n                \"age\": 30,\n                \"hospital\": {\n                    \"name\": \"General Hospital\",\n                    \"location\": \"Indiana\"\n                }\n            },\n            {\n                \"patient\": \"Patient B\",\n                \"age\": 65,\n                \"hospital\": {\n                    \"name\": \"Another Hospital\",\n                    \"location\": \"New York\"\n                }\n            }\n    ],\n    });\n    return 0;\n});\n\nanagineRouter.get('/pdf', (req, res) => {\n    // log.info(filepath);\n    const filepath = \"/home/exouser/Downloads/gen3.pdf\"\n    // res.contentType('application/pdf');\n    res.download(filepath);\n    return 0;\n});\n\n\nanagineRouter.get('/R/lm', (req, res) => {\n    const data = { x: [1, 2, 3], y: [3, 5, 7] };\n    const inputJSON = JSON.stringify(data);\n    const rScriptPath = path.join(__dirname, '../R/lm.R');\n    log.info('rScriptPath:', rScriptPath);\n    const rProcess = spawn('Rscript', [rScriptPath, inputJSON]);\n\n    let output = '';\n    let errorOutput = '';\n\n    // Collect data from stdout\n    rProcess.stdout.on('data', (dataChunk) => {\n        output += dataChunk.toString();\n    });\n    log.info('output:', output);\n\n    // Collect errors from stderr\n    rProcess.stderr.on('data', (dataChunk) => {\n        errorOutput += dataChunk.toString();\n    });\n\n    // When the R script finishes\n    rProcess.on('close', (code) => {\n        if (code !== 0) {\n            console.error('R script error:', errorOutput);\n            return res.status(500).send(`Error running R script: ${errorOutput}`);\n        }\n\n        try {\n            // Parse the JSON output from the R script\n            const result = JSON.parse(output);\n            result[\"time\"] = new Date().toLocaleString('en-US', {\n                dateStyle: 'full',\n                timeStyle: 'long',\n                timeZone: 'UTC'\n            });\n            res.json(result);\n        } catch (err) {\n            console.error('Error parsing R script output:', err);\n            res.status(500).send('Error parsing R script output.');\n        }\n    });\n});\n\nanagineRouter.get('/llm/chat', (req, res) => {\n    const { model = config.ollamaConfig.model, prompt, stream = false, ...options } = req.body;\n    prompt = 'Hi, who are you?';\n    // if (!prompt) {\n    //     return res.status(400).json({ error: 'Prompt is required' });\n    // }\n    // If not streaming, return the full response\n    if (!stream) {\n        const response = ollamaService.chatWithModel(model, prompt, options);\n        return res.json(response);\n    }\n});\n\nanagineRouter.get('/llm/generate', (req, res) => {\n    const { model = config.ollamaConfig.model, prompt, stream = false, ...options } = req.body;\n    // if (!prompt) {\n    //     return res.status(400).json({ error: 'Prompt is required' });\n    // }\n    prompt = 'Hi, who are you?';\n    // If not streaming, return the full response\n    if (!stream) {\n        const response = ollamaService.generateText(model, prompt, options);\n        return res.json(response);\n    }\n});\n\nexport default anagineRouter;\n"],"mappings":";;;;;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,cAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,OAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,KAAA,GAAAL,sBAAA,CAAAC,OAAA;AAAwB,MAAAK,SAAA;EAAAC,UAAA;AAGxB,MAAMC,aAAa,GAAGP,OAAO,CAAC,aAAa,CAAC;AAE5C,MAAMQ,aAAa,GAAGC,gBAAO,CAACC,MAAM,CAAC,CAAC;AAItCF,aAAa,CAACG,GAAG,CAAC,QAAQ,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACtCC,eAAG,CAACC,IAAI,CAAC,aAAa,CAAC;EACvBD,eAAG,CAACC,IAAI,CAAC,IAAIC,IAAI,CAAC,CAAC,CAACC,cAAc,CAAC,OAAO,EAAE;IAC1CC,SAAS,EAAE,MAAM;IACjBC,SAAS,EAAE,MAAM;IACjBC,QAAQ,EAAE;EACZ,CAAC,CAAC,CAAC;EACHP,GAAG,CAACQ,IAAI,CAAC;IACLC,IAAI,EAAE,aAAa;IACnBC,IAAI,EAAE,IAAIP,IAAI,CAAC,CAAC,CAACC,cAAc,CAAC,OAAO,EAAE;MACrCC,SAAS,EAAE,MAAM;MACjBC,SAAS,EAAE,MAAM;MACjBC,QAAQ,EAAE;IACd,CAAC,CAAC;IACFI,OAAO,EAAE,CACL;MACI,SAAS,EAAE,WAAW;MACtB,KAAK,EAAE,EAAE;MACT,UAAU,EAAE;QACR,MAAM,EAAE,kBAAkB;QAC1B,UAAU,EAAE;MAChB;IACJ,CAAC,EACD;MACI,SAAS,EAAE,WAAW;MACtB,KAAK,EAAE,EAAE;MACT,UAAU,EAAE;QACR,MAAM,EAAE,kBAAkB;QAC1B,UAAU,EAAE;MAChB;IACJ,CAAC;EAET,CAAC,CAAC;EACF,OAAO,CAAC;AACZ,CAAC,CAAC;AAEFhB,aAAa,CAACG,GAAG,CAAC,MAAM,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACpC;EACA,MAAMY,QAAQ,GAAG,kCAAkC;EACnD;EACAZ,GAAG,CAACa,QAAQ,CAACD,QAAQ,CAAC;EACtB,OAAO,CAAC;AACZ,CAAC,CAAC;AAGFjB,aAAa,CAACG,GAAG,CAAC,OAAO,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACrC,MAAMc,IAAI,GAAG;IAAEC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;IAAEC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC;EAAE,CAAC;EAC3C,MAAMC,SAAS,GAAG,IAAAC,UAAA,CAAAC,OAAA,EAAeL,IAAI,CAAC;EACtC,MAAMM,WAAW,GAAGC,aAAI,CAACC,IAAI,CAACC,SAAS,EAAE,WAAW,CAAC;EACrDtB,eAAG,CAACC,IAAI,CAAC,cAAc,EAAEkB,WAAW,CAAC;EACrC,MAAMI,QAAQ,GAAG,IAAAC,oBAAK,EAAC,SAAS,EAAE,CAACL,WAAW,EAAEH,SAAS,CAAC,CAAC;EAE3D,IAAIS,MAAM,GAAG,EAAE;EACf,IAAIC,WAAW,GAAG,EAAE;;EAEpB;EACAH,QAAQ,CAACI,MAAM,CAACC,EAAE,CAAC,MAAM,EAAGC,SAAS,IAAK;IACtCJ,MAAM,IAAII,SAAS,CAACC,QAAQ,CAAC,CAAC;EAClC,CAAC,CAAC;EACF9B,eAAG,CAACC,IAAI,CAAC,SAAS,EAAEwB,MAAM,CAAC;;EAE3B;EACAF,QAAQ,CAACQ,MAAM,CAACH,EAAE,CAAC,MAAM,EAAGC,SAAS,IAAK;IACtCH,WAAW,IAAIG,SAAS,CAACC,QAAQ,CAAC,CAAC;EACvC,CAAC,CAAC;;EAEF;EACAP,QAAQ,CAACK,EAAE,CAAC,OAAO,EAAGI,IAAI,IAAK;IAC3B,IAAIA,IAAI,KAAK,CAAC,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAER,WAAW,CAAC;MAC7C,OAAO3B,GAAG,CAACoC,MAAM,CAAC,GAAG,CAAC,CAAC5B,IAAI,CAAC,2BAA2BmB,WAAW,EAAE,CAAC;IACzE;IAEA,IAAI;MACA;MACA,MAAMU,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACb,MAAM,CAAC;MACjCW,MAAM,CAAC,MAAM,CAAC,GAAG,IAAIlC,IAAI,CAAC,CAAC,CAACC,cAAc,CAAC,OAAO,EAAE;QAChDC,SAAS,EAAE,MAAM;QACjBC,SAAS,EAAE,MAAM;QACjBC,QAAQ,EAAE;MACd,CAAC,CAAC;MACFP,GAAG,CAACwC,IAAI,CAACH,MAAM,CAAC;IACpB,CAAC,CAAC,OAAOI,GAAG,EAAE;MACVP,OAAO,CAACC,KAAK,CAAC,gCAAgC,EAAEM,GAAG,CAAC;MACpDzC,GAAG,CAACoC,MAAM,CAAC,GAAG,CAAC,CAAC5B,IAAI,CAAC,gCAAgC,CAAC;IAC1D;EACJ,CAAC,CAAC;AACN,CAAC,CAAC;AAEFb,aAAa,CAACG,GAAG,CAAC,WAAW,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EACzC,MAAA0C,SAAA,GAAkF3C,GAAG,CAAC4C,IAAI;IAApF;MAAEC,KAAK,GAAGC,eAAM,CAACC,YAAY,CAACF,KAAK;MAAEG,MAAM;MAAEC,MAAM,GAAG;IAAkB,CAAC,GAAAN,SAAA;IAATO,OAAO,OAAAC,8BAAA,CAAA/B,OAAA,EAAAuB,SAAA,EAAAlD,SAAA;EAC7EuD,MAAM,GAAG,kBAAkB;EAC3B;EACA;EACA;EACA;EACA,IAAI,CAACC,MAAM,EAAE;IACT,MAAMG,QAAQ,GAAGzD,aAAa,CAAC0D,aAAa,CAACR,KAAK,EAAEG,MAAM,EAAEE,OAAO,CAAC;IACpE,OAAOjD,GAAG,CAACwC,IAAI,CAACW,QAAQ,CAAC;EAC7B;AACJ,CAAC,CAAC;AAEFxD,aAAa,CAACG,GAAG,CAAC,eAAe,EAAE,CAACC,GAAG,EAAEC,GAAG,KAAK;EAC7C,MAAAqD,UAAA,GAAkFtD,GAAG,CAAC4C,IAAI;IAApF;MAAEC,KAAK,GAAGC,eAAM,CAACC,YAAY,CAACF,KAAK;MAAEG,MAAM;MAAEC,MAAM,GAAG;IAAkB,CAAC,GAAAK,UAAA;IAATJ,OAAO,OAAAC,8BAAA,CAAA/B,OAAA,EAAAkC,UAAA,EAAA5D,UAAA;EAC7E;EACA;EACA;EACAsD,MAAM,GAAG,kBAAkB;EAC3B;EACA,IAAI,CAACC,MAAM,EAAE;IACT,MAAMG,QAAQ,GAAGzD,aAAa,CAAC4D,YAAY,CAACV,KAAK,EAAEG,MAAM,EAAEE,OAAO,CAAC;IACnE,OAAOjD,GAAG,CAACwC,IAAI,CAACW,QAAQ,CAAC;EAC7B;AACJ,CAAC,CAAC;AAAC,IAAAI,QAAA,GAAAC,OAAA,CAAArC,OAAA,GAEYxB,aAAa","ignoreList":[]}},"mtime":1745562412289},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/error.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nclass CodedError extends Error {\n  constructor(code, msg) {\n    super(msg);\n    this.code = code;\n    this.msg = msg;\n  }\n}\nvar _default = exports.default = CodedError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDb2RlZEVycm9yIiwiRXJyb3IiLCJjb25zdHJ1Y3RvciIsImNvZGUiLCJtc2ciLCJfZGVmYXVsdCIsImV4cG9ydHMiLCJkZWZhdWx0Il0sInNvdXJjZVJvb3QiOiIvaG9tZS9leG91c2VyL0RvY3VtZW50cy9Qcm9qZWN0cy9hbmFnaW5lL3NyYy9zZXJ2ZXIvdXRpbHMvIiwic291cmNlcyI6WyJlcnJvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDb2RlZEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKGNvZGUsIG1zZykge1xuICAgICAgICBzdXBlcihtc2cpO1xuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xuICAgICAgICB0aGlzLm1zZyA9IG1zZztcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvZGVkRXJyb3I7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxNQUFNQSxVQUFVLFNBQVNDLEtBQUssQ0FBQztFQUMzQkMsV0FBV0EsQ0FBQ0MsSUFBSSxFQUFFQyxHQUFHLEVBQUU7SUFDbkIsS0FBSyxDQUFDQSxHQUFHLENBQUM7SUFDVixJQUFJLENBQUNELElBQUksR0FBR0EsSUFBSTtJQUNoQixJQUFJLENBQUNDLEdBQUcsR0FBR0EsR0FBRztFQUNsQjtBQUNKO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLENBQUFDLE9BQUEsR0FFY1AsVUFBVSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["CodedError","Error","constructor","code","msg","_default","exports","default"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/utils/","sources":["error.js"],"sourcesContent":["class CodedError extends Error {\n    constructor(code, msg) {\n        super(msg);\n        this.code = code;\n        this.msg = msg;\n    }\n}\n\nexport default CodedError;\n"],"mappings":";;;;;;;AAAA,MAAMA,UAAU,SAASC,KAAK,CAAC;EAC3BC,WAAWA,CAACC,IAAI,EAAEC,GAAG,EAAE;IACnB,KAAK,CAACA,GAAG,CAAC;IACV,IAAI,CAACD,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,GAAG,GAAGA,GAAG;EAClB;AACJ;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEcP,UAAU","ignoreList":[]}},"mtime":1741363362704},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/anagine.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/objectWithoutPropertiesLoose\"));\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _child_process = require(\"child_process\");\nvar _logger = _interopRequireDefault(require(\"./logger\"));\nvar _config = _interopRequireDefault(require(\"./config\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nconst _excluded = [\"model\", \"prompt\", \"stream\"],\n  _excluded2 = [\"model\", \"prompt\", \"stream\"];\nconst ollamaService = require('./utils/llm');\nconst anagineRouter = _express.default.Router();\nanagineRouter.get('/hello', (req, res) => {\n  res.send({\n    text: \"Hello World\",\n    time: new Date().toLocaleString('en-US', {\n      dateStyle: 'full',\n      timeStyle: 'long',\n      timeZone: 'UTC'\n    }),\n    subject: [{\n      \"patient\": \"Patient A\",\n      \"age\": 30,\n      \"hospital\": {\n        \"name\": \"General Hospital\",\n        \"location\": \"Indiana\"\n      }\n    }, {\n      \"patient\": \"Patient B\",\n      \"age\": 65,\n      \"hospital\": {\n        \"name\": \"Another Hospital\",\n        \"location\": \"New York\"\n      }\n    }]\n  });\n  return 0;\n});\nanagineRouter.get('/pdf', (req, res) => {\n  // log.info(filepath);\n  const filepath = \"/home/exouser/Downloads/gen3.pdf\";\n  // res.contentType('application/pdf');\n  res.download(filepath);\n  return 0;\n});\nanagineRouter.get('/R/lm', (req, res) => {\n  const data = {\n    x: [1, 2, 3],\n    y: [3, 5, 7]\n  };\n  const inputJSON = (0, _stringify.default)(data);\n  const rScriptPath = _path.default.join(__dirname, '../R/lm.R');\n  _logger.default.info('rScriptPath:', rScriptPath);\n  const rProcess = (0, _child_process.spawn)('Rscript', [rScriptPath, inputJSON]);\n  let output = '';\n  let errorOutput = '';\n\n  // Collect data from stdout\n  rProcess.stdout.on('data', dataChunk => {\n    output += dataChunk.toString();\n  });\n  _logger.default.info('output:', output);\n\n  // Collect errors from stderr\n  rProcess.stderr.on('data', dataChunk => {\n    errorOutput += dataChunk.toString();\n  });\n\n  // When the R script finishes\n  rProcess.on('close', code => {\n    if (code !== 0) {\n      console.error('R script error:', errorOutput);\n      return res.status(500).send(`Error running R script: ${errorOutput}`);\n    }\n    try {\n      // Parse the JSON output from the R script\n      const result = JSON.parse(output);\n      result[\"time\"] = new Date().toLocaleString('en-US', {\n        dateStyle: 'full',\n        timeStyle: 'long',\n        timeZone: 'UTC'\n      });\n      res.json(result);\n    } catch (err) {\n      console.error('Error parsing R script output:', err);\n      res.status(500).send('Error parsing R script output.');\n    }\n  });\n});\nanagineRouter.get('/llm/chat', async (req, res) => {\n  const _req$query = req.query,\n    {\n      model = _config.default.ollamaConfig.model,\n      prompt,\n      stream = false\n    } = _req$query,\n    options = (0, _objectWithoutPropertiesLoose2.default)(_req$query, _excluded);\n  const messages = [{\n    role: 'user',\n    content: prompt || 'Hi, could you introduce yourself?'\n  }];\n  const llm_response = await ollamaService.chatWithModel(model, messages, stream, options);\n  res.send({\n    response: llm_response\n  });\n  return 0;\n});\nanagineRouter.get('/llm/generate', async (req, res) => {\n  const _req$query2 = req.query,\n    {\n      model = _config.default.ollamaConfig.model,\n      prompt,\n      stream = false\n    } = _req$query2,\n    options = (0, _objectWithoutPropertiesLoose2.default)(_req$query2, _excluded2);\n  const messages = [{\n    role: 'user',\n    content: prompt || 'Hi, could you introduce yourself?'\n  }];\n  const llm_response = await ollamaService.generateText(model, messages, stream, options);\n  res.send({\n    response: llm_response\n  });\n  return 0;\n});\nvar _default = exports.default = anagineRouter;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NoaWxkX3Byb2Nlc3MiLCJfbG9nZ2VyIiwiX2NvbmZpZyIsIl9wYXRoIiwiX2V4Y2x1ZGVkIiwiX2V4Y2x1ZGVkMiIsIm9sbGFtYVNlcnZpY2UiLCJhbmFnaW5lUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsImdldCIsInJlcSIsInJlcyIsInNlbmQiLCJ0ZXh0IiwidGltZSIsIkRhdGUiLCJ0b0xvY2FsZVN0cmluZyIsImRhdGVTdHlsZSIsInRpbWVTdHlsZSIsInRpbWVab25lIiwic3ViamVjdCIsImZpbGVwYXRoIiwiZG93bmxvYWQiLCJkYXRhIiwieCIsInkiLCJpbnB1dEpTT04iLCJfc3RyaW5naWZ5IiwiZGVmYXVsdCIsInJTY3JpcHRQYXRoIiwicGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJsb2ciLCJpbmZvIiwiclByb2Nlc3MiLCJzcGF3biIsIm91dHB1dCIsImVycm9yT3V0cHV0Iiwic3Rkb3V0Iiwib24iLCJkYXRhQ2h1bmsiLCJ0b1N0cmluZyIsInN0ZGVyciIsImNvZGUiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGF0dXMiLCJyZXN1bHQiLCJKU09OIiwicGFyc2UiLCJqc29uIiwiZXJyIiwiX3JlcSRxdWVyeSIsInF1ZXJ5IiwibW9kZWwiLCJjb25maWciLCJvbGxhbWFDb25maWciLCJwcm9tcHQiLCJzdHJlYW0iLCJvcHRpb25zIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UyIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsImxsbV9yZXNwb25zZSIsImNoYXRXaXRoTW9kZWwiLCJyZXNwb25zZSIsIl9yZXEkcXVlcnkyIiwiZ2VuZXJhdGVUZXh0IiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9leG91c2VyL0RvY3VtZW50cy9Qcm9qZWN0cy9hbmFnaW5lL3NyYy9zZXJ2ZXIvIiwic291cmNlcyI6WyJhbmFnaW5lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgc3Bhd24gfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCBsb2cgZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuXG5jb25zdCBvbGxhbWFTZXJ2aWNlID0gcmVxdWlyZSgnLi91dGlscy9sbG0nKTtcblxuY29uc3QgYW5hZ2luZVJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbmFuYWdpbmVSb3V0ZXIuZ2V0KCcvaGVsbG8nLCAocmVxLCByZXMpID0+IHtcbiAgICByZXMuc2VuZCh7XG4gICAgICAgIHRleHQ6IFwiSGVsbG8gV29ybGRcIixcbiAgICAgICAgdGltZTogbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7XG4gICAgICAgICAgICBkYXRlU3R5bGU6ICdmdWxsJyxcbiAgICAgICAgICAgIHRpbWVTdHlsZTogJ2xvbmcnLFxuICAgICAgICAgICAgdGltZVpvbmU6ICdVVEMnXG4gICAgICAgIH0pLFxuICAgICAgICBzdWJqZWN0OiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJwYXRpZW50XCI6IFwiUGF0aWVudCBBXCIsXG4gICAgICAgICAgICAgICAgXCJhZ2VcIjogMzAsXG4gICAgICAgICAgICAgICAgXCJob3NwaXRhbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkdlbmVyYWwgSG9zcGl0YWxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsb2NhdGlvblwiOiBcIkluZGlhbmFcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJwYXRpZW50XCI6IFwiUGF0aWVudCBCXCIsXG4gICAgICAgICAgICAgICAgXCJhZ2VcIjogNjUsXG4gICAgICAgICAgICAgICAgXCJob3NwaXRhbFwiOiB7XG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIkFub3RoZXIgSG9zcGl0YWxcIixcbiAgICAgICAgICAgICAgICAgICAgXCJsb2NhdGlvblwiOiBcIk5ldyBZb3JrXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgXSxcbiAgICB9KTtcbiAgICByZXR1cm4gMDtcbn0pO1xuXG5hbmFnaW5lUm91dGVyLmdldCgnL3BkZicsIChyZXEsIHJlcykgPT4ge1xuICAgIC8vIGxvZy5pbmZvKGZpbGVwYXRoKTtcbiAgICBjb25zdCBmaWxlcGF0aCA9IFwiL2hvbWUvZXhvdXNlci9Eb3dubG9hZHMvZ2VuMy5wZGZcIlxuICAgIC8vIHJlcy5jb250ZW50VHlwZSgnYXBwbGljYXRpb24vcGRmJyk7XG4gICAgcmVzLmRvd25sb2FkKGZpbGVwYXRoKTtcbiAgICByZXR1cm4gMDtcbn0pO1xuXG5cbmFuYWdpbmVSb3V0ZXIuZ2V0KCcvUi9sbScsIChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IGRhdGEgPSB7IHg6IFsxLCAyLCAzXSwgeTogWzMsIDUsIDddIH07XG4gICAgY29uc3QgaW5wdXRKU09OID0gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XG4gICAgY29uc3QgclNjcmlwdFBhdGggPSBwYXRoLmpvaW4oX19kaXJuYW1lLCAnLi4vUi9sbS5SJyk7XG4gICAgbG9nLmluZm8oJ3JTY3JpcHRQYXRoOicsIHJTY3JpcHRQYXRoKTtcbiAgICBjb25zdCByUHJvY2VzcyA9IHNwYXduKCdSc2NyaXB0JywgW3JTY3JpcHRQYXRoLCBpbnB1dEpTT05dKTtcblxuICAgIGxldCBvdXRwdXQgPSAnJztcbiAgICBsZXQgZXJyb3JPdXRwdXQgPSAnJztcblxuICAgIC8vIENvbGxlY3QgZGF0YSBmcm9tIHN0ZG91dFxuICAgIHJQcm9jZXNzLnN0ZG91dC5vbignZGF0YScsIChkYXRhQ2h1bmspID0+IHtcbiAgICAgICAgb3V0cHV0ICs9IGRhdGFDaHVuay50b1N0cmluZygpO1xuICAgIH0pO1xuICAgIGxvZy5pbmZvKCdvdXRwdXQ6Jywgb3V0cHV0KTtcblxuICAgIC8vIENvbGxlY3QgZXJyb3JzIGZyb20gc3RkZXJyXG4gICAgclByb2Nlc3Muc3RkZXJyLm9uKCdkYXRhJywgKGRhdGFDaHVuaykgPT4ge1xuICAgICAgICBlcnJvck91dHB1dCArPSBkYXRhQ2h1bmsudG9TdHJpbmcoKTtcbiAgICB9KTtcblxuICAgIC8vIFdoZW4gdGhlIFIgc2NyaXB0IGZpbmlzaGVzXG4gICAgclByb2Nlc3Mub24oJ2Nsb3NlJywgKGNvZGUpID0+IHtcbiAgICAgICAgaWYgKGNvZGUgIT09IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1Igc2NyaXB0IGVycm9yOicsIGVycm9yT3V0cHV0KTtcbiAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuc2VuZChgRXJyb3IgcnVubmluZyBSIHNjcmlwdDogJHtlcnJvck91dHB1dH1gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBQYXJzZSB0aGUgSlNPTiBvdXRwdXQgZnJvbSB0aGUgUiBzY3JpcHRcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IEpTT04ucGFyc2Uob3V0cHV0KTtcbiAgICAgICAgICAgIHJlc3VsdFtcInRpbWVcIl0gPSBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHtcbiAgICAgICAgICAgICAgICBkYXRlU3R5bGU6ICdmdWxsJyxcbiAgICAgICAgICAgICAgICB0aW1lU3R5bGU6ICdsb25nJyxcbiAgICAgICAgICAgICAgICB0aW1lWm9uZTogJ1VUQydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmVzLmpzb24ocmVzdWx0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIFIgc2NyaXB0IG91dHB1dDonLCBlcnIpO1xuICAgICAgICAgICAgcmVzLnN0YXR1cyg1MDApLnNlbmQoJ0Vycm9yIHBhcnNpbmcgUiBzY3JpcHQgb3V0cHV0LicpO1xuICAgICAgICB9XG4gICAgfSk7XG59KTtcblxuXG5hbmFnaW5lUm91dGVyLmdldCgnL2xsbS9jaGF0JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG5cbiAgICBjb25zdCB7bW9kZWw9Y29uZmlnLm9sbGFtYUNvbmZpZy5tb2RlbCAsIHByb21wdCwgc3RyZWFtPWZhbHNlLCAuLi5vcHRpb25zIH0gPSByZXEucXVlcnk7XG5cbiAgICBjb25zdCBtZXNzYWdlcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHJvbGU6ICd1c2VyJyxcbiAgICAgICAgICBjb250ZW50OiBwcm9tcHQgfHwgJ0hpLCBjb3VsZCB5b3UgaW50cm9kdWNlIHlvdXJzZWxmPydcbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgIGNvbnN0IGxsbV9yZXNwb25zZSA9IGF3YWl0IG9sbGFtYVNlcnZpY2UuY2hhdFdpdGhNb2RlbChtb2RlbCwgbWVzc2FnZXMsIHN0cmVhbSwgb3B0aW9ucyk7XG5cbiAgICByZXMuc2VuZCh7XG4gICAgICAgIHJlc3BvbnNlOiBsbG1fcmVzcG9uc2UsXG4gICAgfSk7XG4gICAgcmV0dXJuIDA7XG59KTtcblxuYW5hZ2luZVJvdXRlci5nZXQoJy9sbG0vZ2VuZXJhdGUnLCBhc3luYyAocmVxLCByZXMpID0+IHtcblxuICAgIGNvbnN0IHttb2RlbD1jb25maWcub2xsYW1hQ29uZmlnLm1vZGVsICwgcHJvbXB0LCBzdHJlYW09ZmFsc2UsIC4uLm9wdGlvbnMgfSA9IHJlcS5xdWVyeTtcblxuICAgIGNvbnN0IG1lc3NhZ2VzID0gW1xuICAgICAgICB7XG4gICAgICAgICAgcm9sZTogJ3VzZXInLFxuICAgICAgICAgIGNvbnRlbnQ6IHByb21wdCB8fCAnSGksIGNvdWxkIHlvdSBpbnRyb2R1Y2UgeW91cnNlbGY/J1xuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgY29uc3QgbGxtX3Jlc3BvbnNlID0gYXdhaXQgb2xsYW1hU2VydmljZS5nZW5lcmF0ZVRleHQobW9kZWwsIG1lc3NhZ2VzLCBzdHJlYW0sIG9wdGlvbnMpO1xuXG4gICAgcmVzLnNlbmQoe1xuICAgICAgICByZXNwb25zZTogbGxtX3Jlc3BvbnNlLFxuICAgIH0pO1xuICAgIHJldHVybiAwO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IGFuYWdpbmVSb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxjQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxPQUFBLEdBQUFKLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBSSxLQUFBLEdBQUFMLHNCQUFBLENBQUFDLE9BQUE7QUFBd0IsTUFBQUssU0FBQTtFQUFBQyxVQUFBO0FBR3hCLE1BQU1DLGFBQWEsR0FBR1AsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUU1QyxNQUFNUSxhQUFhLEdBQUdDLGdCQUFPLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBRXRDRixhQUFhLENBQUNHLEdBQUcsQ0FBQyxRQUFRLEVBQUUsQ0FBQ0MsR0FBRyxFQUFFQyxHQUFHLEtBQUs7RUFDdENBLEdBQUcsQ0FBQ0MsSUFBSSxDQUFDO0lBQ0xDLElBQUksRUFBRSxhQUFhO0lBQ25CQyxJQUFJLEVBQUUsSUFBSUMsSUFBSSxDQUFDLENBQUMsQ0FBQ0MsY0FBYyxDQUFDLE9BQU8sRUFBRTtNQUNyQ0MsU0FBUyxFQUFFLE1BQU07TUFDakJDLFNBQVMsRUFBRSxNQUFNO01BQ2pCQyxRQUFRLEVBQUU7SUFDZCxDQUFDLENBQUM7SUFDRkMsT0FBTyxFQUFFLENBQ0w7TUFDSSxTQUFTLEVBQUUsV0FBVztNQUN0QixLQUFLLEVBQUUsRUFBRTtNQUNULFVBQVUsRUFBRTtRQUNSLE1BQU0sRUFBRSxrQkFBa0I7UUFDMUIsVUFBVSxFQUFFO01BQ2hCO0lBQ0osQ0FBQyxF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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_child_process","_logger","_config","_path","_excluded","_excluded2","ollamaService","anagineRouter","express","Router","get","req","res","send","text","time","Date","toLocaleString","dateStyle","timeStyle","timeZone","subject","filepath","download","data","x","y","inputJSON","_stringify","default","rScriptPath","path","join","__dirname","log","info","rProcess","spawn","output","errorOutput","stdout","on","dataChunk","toString","stderr","code","console","error","status","result","JSON","parse","json","err","_req$query","query","model","config","ollamaConfig","prompt","stream","options","_objectWithoutPropertiesLoose2","messages","role","content","llm_response","chatWithModel","response","_req$query2","generateText","_default","exports"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["anagine.js"],"sourcesContent":["import express from 'express';\nimport { spawn } from 'child_process';\nimport log from './logger';\nimport config from './config';\nimport path from 'path';\n\n\nconst ollamaService = require('./utils/llm');\n\nconst anagineRouter = express.Router();\n\nanagineRouter.get('/hello', (req, res) => {\n    res.send({\n        text: \"Hello World\",\n        time: new Date().toLocaleString('en-US', {\n            dateStyle: 'full',\n            timeStyle: 'long',\n            timeZone: 'UTC'\n        }),\n        subject: [\n            {\n                \"patient\": \"Patient A\",\n                \"age\": 30,\n                \"hospital\": {\n                    \"name\": \"General Hospital\",\n                    \"location\": \"Indiana\"\n                }\n            },\n            {\n                \"patient\": \"Patient B\",\n                \"age\": 65,\n                \"hospital\": {\n                    \"name\": \"Another Hospital\",\n                    \"location\": \"New York\"\n                }\n            }\n    ],\n    });\n    return 0;\n});\n\nanagineRouter.get('/pdf', (req, res) => {\n    // log.info(filepath);\n    const filepath = \"/home/exouser/Downloads/gen3.pdf\"\n    // res.contentType('application/pdf');\n    res.download(filepath);\n    return 0;\n});\n\n\nanagineRouter.get('/R/lm', (req, res) => {\n    const data = { x: [1, 2, 3], y: [3, 5, 7] };\n    const inputJSON = JSON.stringify(data);\n    const rScriptPath = path.join(__dirname, '../R/lm.R');\n    log.info('rScriptPath:', rScriptPath);\n    const rProcess = spawn('Rscript', [rScriptPath, inputJSON]);\n\n    let output = '';\n    let errorOutput = '';\n\n    // Collect data from stdout\n    rProcess.stdout.on('data', (dataChunk) => {\n        output += dataChunk.toString();\n    });\n    log.info('output:', output);\n\n    // Collect errors from stderr\n    rProcess.stderr.on('data', (dataChunk) => {\n        errorOutput += dataChunk.toString();\n    });\n\n    // When the R script finishes\n    rProcess.on('close', (code) => {\n        if (code !== 0) {\n            console.error('R script error:', errorOutput);\n            return res.status(500).send(`Error running R script: ${errorOutput}`);\n        }\n\n        try {\n            // Parse the JSON output from the R script\n            const result = JSON.parse(output);\n            result[\"time\"] = new Date().toLocaleString('en-US', {\n                dateStyle: 'full',\n                timeStyle: 'long',\n                timeZone: 'UTC'\n            });\n            res.json(result);\n        } catch (err) {\n            console.error('Error parsing R script output:', err);\n            res.status(500).send('Error parsing R script output.');\n        }\n    });\n});\n\n\nanagineRouter.get('/llm/chat', async (req, res) => {\n\n    const {model=config.ollamaConfig.model , prompt, stream=false, ...options } = req.query;\n\n    const messages = [\n        {\n          role: 'user',\n          content: prompt || 'Hi, could you introduce yourself?'\n        }\n      ];\n\n    const llm_response = await ollamaService.chatWithModel(model, messages, stream, options);\n\n    res.send({\n        response: llm_response,\n    });\n    return 0;\n});\n\nanagineRouter.get('/llm/generate', async (req, res) => {\n\n    const {model=config.ollamaConfig.model , prompt, stream=false, ...options } = req.query;\n\n    const messages = [\n        {\n          role: 'user',\n          content: prompt || 'Hi, could you introduce yourself?'\n        }\n      ];\n\n    const llm_response = await ollamaService.generateText(model, messages, stream, options);\n\n    res.send({\n        response: llm_response,\n    });\n    return 0;\n});\n\nexport default anagineRouter;\n"],"mappings":"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","ignoreList":[]}},"mtime":1745597078214},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/endpoints.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.versionProxy = exports.statusProxy = void 0;\nvar _httpProxyMiddleware = require(\"http-proxy-middleware\");\nvar _config = _interopRequireDefault(require(\"./config\"));\nconst statusProxy = exports.statusProxy = (0, _httpProxyMiddleware.createProxyMiddleware)({\n  target: `${_config.default.guppyConfig.host}/_status`,\n  changeOrigin: true\n});\nconst versionProxy = exports.versionProxy = (0, _httpProxyMiddleware.createProxyMiddleware)({\n  target: `${_config.default.guppyConfig.host}/_version`,\n  changeOrigin: true\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaHR0cFByb3h5TWlkZGxld2FyZSIsInJlcXVpcmUiLCJfY29uZmlnIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInN0YXR1c1Byb3h5IiwiZXhwb3J0cyIsImNyZWF0ZVByb3h5TWlkZGxld2FyZSIsInRhcmdldCIsImNvbmZpZyIsImd1cHB5Q29uZmlnIiwiaG9zdCIsImNoYW5nZU9yaWdpbiIsInZlcnNpb25Qcm94eSJdLCJzb3VyY2VSb290IjoiL2hvbWUvZXhvdXNlci9Eb2N1bWVudHMvUHJvamVjdHMvYW5hZ2luZS9zcmMvc2VydmVyLyIsInNvdXJjZXMiOlsiZW5kcG9pbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVByb3h5TWlkZGxld2FyZSB9IGZyb20gJ2h0dHAtcHJveHktbWlkZGxld2FyZSc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcblxuZXhwb3J0IGNvbnN0IHN0YXR1c1Byb3h5ID0gY3JlYXRlUHJveHlNaWRkbGV3YXJlKHtcbiAgICB0YXJnZXQ6IGAke2NvbmZpZy5ndXBweUNvbmZpZy5ob3N0fS9fc3RhdHVzYCxcbiAgICBjaGFuZ2VPcmlnaW46IHRydWUsXG59KVxuXG5cbmV4cG9ydCBjb25zdCB2ZXJzaW9uUHJveHkgPSBjcmVhdGVQcm94eU1pZGRsZXdhcmUoe1xuICAgIHRhcmdldDogYCR7Y29uZmlnLmd1cHB5Q29uZmlnLmhvc3R9L192ZXJzaW9uYCxcbiAgICBjaGFuZ2VPcmlnaW46IHRydWUsXG59KSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFBQSxvQkFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBRU8sTUFBTUcsV0FBVyxHQUFBQyxPQUFBLENBQUFELFdBQUEsR0FBRyxJQUFBRSwwQ0FBcUIsRUFBQztFQUM3Q0MsTUFBTSxFQUFFLEdBQUdDLGVBQU0sQ0FBQ0MsV0FBVyxDQUFDQyxJQUFJLFVBQVU7RUFDNUNDLFlBQVksRUFBRTtBQUNsQixDQUFDLENBQUM7QUFHSyxNQUFNQyxZQUFZLEdBQUFQLE9BQUEsQ0FBQU8sWUFBQSxHQUFHLElBQUFOLDBDQUFxQixFQUFDO0VBQzlDQyxNQUFNLEVBQUUsR0FBR0MsZUFBTSxDQUFDQyxXQUFXLENBQUNDLElBQUksV0FBVztFQUM3Q0MsWUFBWSxFQUFFO0FBQ2xCLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_httpProxyMiddleware","require","_config","_interopRequireDefault","statusProxy","exports","createProxyMiddleware","target","config","guppyConfig","host","changeOrigin","versionProxy"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["endpoints.js"],"sourcesContent":["import { createProxyMiddleware } from 'http-proxy-middleware';\nimport config from './config';\n\nexport const statusProxy = createProxyMiddleware({\n    target: `${config.guppyConfig.host}/_status`,\n    changeOrigin: true,\n})\n\n\nexport const versionProxy = createProxyMiddleware({\n    target: `${config.guppyConfig.host}/_version`,\n    changeOrigin: true,\n})"],"mappings":";;;;;;;;AAAA,IAAAA,oBAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAC,sBAAA,CAAAF,OAAA;AAEO,MAAMG,WAAW,GAAAC,OAAA,CAAAD,WAAA,GAAG,IAAAE,0CAAqB,EAAC;EAC7CC,MAAM,EAAE,GAAGC,eAAM,CAACC,WAAW,CAACC,IAAI,UAAU;EAC5CC,YAAY,EAAE;AAClB,CAAC,CAAC;AAGK,MAAMC,YAAY,GAAAP,OAAA,CAAAO,YAAA,GAAG,IAAAN,0CAAqB,EAAC;EAC9CC,MAAM,EAAE,GAAGC,eAAM,CAACC,WAAW,CAACC,IAAI,WAAW;EAC7CC,YAAY,EAAE;AAClB,CAAC,CAAC","ignoreList":[]}},"mtime":1741362227892},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/version.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.gitVersion = exports.gitCommit = void 0;\nconst gitCommit = exports.gitCommit = 'N/A';\nconst gitVersion = exports.gitVersion = 'N/A';\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnaXRDb21taXQiLCJleHBvcnRzIiwiZ2l0VmVyc2lvbiJdLCJzb3VyY2VSb290IjoiL2hvbWUvZXhvdXNlci9Eb2N1bWVudHMvUHJvamVjdHMvYW5hZ2luZS9zcmMvc2VydmVyLyIsInNvdXJjZXMiOlsidmVyc2lvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZ2l0Q29tbWl0ID0gJ04vQSc7XG5leHBvcnQgY29uc3QgZ2l0VmVyc2lvbiA9ICdOL0EnO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQU8sTUFBTUEsU0FBUyxHQUFBQyxPQUFBLENBQUFELFNBQUEsR0FBRyxLQUFLO0FBQ3ZCLE1BQU1FLFVBQVUsR0FBQUQsT0FBQSxDQUFBQyxVQUFBLEdBQUcsS0FBSyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["gitCommit","exports","gitVersion"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["version.js"],"sourcesContent":["export const gitCommit = 'N/A';\nexport const gitVersion = 'N/A';\n"],"mappings":";;;;;;;AAAO,MAAMA,SAAS,GAAAC,OAAA,CAAAD,SAAA,GAAG,KAAK;AACvB,MAAME,UAAU,GAAAD,OAAA,CAAAC,UAAA,GAAG,KAAK","ignoreList":[]}},"mtime":1741322147338},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/endpoints.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.versionProxy = exports.statusProxy = void 0;\nvar _httpProxyMiddleware = require(\"http-proxy-middleware\");\nvar _config = _interopRequireDefault(require(\"./config\"));\nconst statusProxy = exports.statusProxy = (0, _httpProxyMiddleware.createProxyMiddleware)({\n  target: `${_config.default.guppyConfig.host}/_status`,\n  changeOrigin: true\n});\nconst versionProxy = exports.versionProxy = (0, _httpProxyMiddleware.createProxyMiddleware)({\n  target: `${_config.default.guppyConfig.host}/_version`,\n  changeOrigin: true\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaHR0cFByb3h5TWlkZGxld2FyZSIsInJlcXVpcmUiLCJfY29uZmlnIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInN0YXR1c1Byb3h5IiwiZXhwb3J0cyIsImNyZWF0ZVByb3h5TWlkZGxld2FyZSIsInRhcmdldCIsImNvbmZpZyIsImd1cHB5Q29uZmlnIiwiaG9zdCIsImNoYW5nZU9yaWdpbiIsInZlcnNpb25Qcm94eSJdLCJzb3VyY2VSb290IjoiL2hvbWUvZXhvdXNlci9Eb2N1bWVudHMvUHJvamVjdHMvYW5hZ2luZS9zcmMvc2VydmVyLyIsInNvdXJjZXMiOlsiZW5kcG9pbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZVByb3h5TWlkZGxld2FyZSB9IGZyb20gJ2h0dHAtcHJveHktbWlkZGxld2FyZSc7XG5pbXBvcnQgY29uZmlnIGZyb20gJy4vY29uZmlnJztcblxuZXhwb3J0IGNvbnN0IHN0YXR1c1Byb3h5ID0gY3JlYXRlUHJveHlNaWRkbGV3YXJlKHtcbiAgICB0YXJnZXQ6IGAke2NvbmZpZy5ndXBweUNvbmZpZy5ob3N0fS9fc3RhdHVzYCxcbiAgICBjaGFuZ2VPcmlnaW46IHRydWUsXG59KVxuXG5cbmV4cG9ydCBjb25zdCB2ZXJzaW9uUHJveHkgPSBjcmVhdGVQcm94eU1pZGRsZXdhcmUoe1xuICAgIHRhcmdldDogYCR7Y29uZmlnLmd1cHB5Q29uZmlnLmhvc3R9L192ZXJzaW9uYCxcbiAgICBjaGFuZ2VPcmlnaW46IHRydWUsXG59KSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQSxJQUFBQSxvQkFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBRU8sTUFBTUcsV0FBVyxHQUFBQyxPQUFBLENBQUFELFdBQUEsR0FBRyxJQUFBRSwwQ0FBcUIsRUFBQztFQUM3Q0MsTUFBTSxFQUFFLEdBQUdDLGVBQU0sQ0FBQ0MsV0FBVyxDQUFDQyxJQUFJLFVBQVU7RUFDNUNDLFlBQVksRUFBRTtBQUNsQixDQUFDLENBQUM7QUFHSyxNQUFNQyxZQUFZLEdBQUFQLE9BQUEsQ0FBQU8sWUFBQSxHQUFHLElBQUFOLDBDQUFxQixFQUFDO0VBQzlDQyxNQUFNLEVBQUUsR0FBR0MsZUFBTSxDQUFDQyxXQUFXLENBQUNDLElBQUksV0FBVztFQUM3Q0MsWUFBWSxFQUFFO0FBQ2xCLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_httpProxyMiddleware","require","_config","_interopRequireDefault","statusProxy","exports","createProxyMiddleware","target","config","guppyConfig","host","changeOrigin","versionProxy"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["endpoints.js"],"sourcesContent":["import { createProxyMiddleware } from 'http-proxy-middleware';\nimport config from './config';\n\nexport const statusProxy = createProxyMiddleware({\n    target: `${config.guppyConfig.host}/_status`,\n    changeOrigin: true,\n})\n\n\nexport const versionProxy = createProxyMiddleware({\n    target: `${config.guppyConfig.host}/_version`,\n    changeOrigin: true,\n})"],"mappings":";;;;;;;;AAAA,IAAAA,oBAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAC,sBAAA,CAAAF,OAAA;AAEO,MAAMG,WAAW,GAAAC,OAAA,CAAAD,WAAA,GAAG,IAAAE,0CAAqB,EAAC;EAC7CC,MAAM,EAAE,GAAGC,eAAM,CAACC,WAAW,CAACC,IAAI,UAAU;EAC5CC,YAAY,EAAE;AAClB,CAAC,CAAC;AAGK,MAAMC,YAAY,GAAAP,OAAA,CAAAO,YAAA,GAAG,IAAAN,0CAAqB,EAAC;EAC9CC,MAAM,EAAE,GAAGC,eAAM,CAACC,WAAW,CAACC,IAAI,WAAW;EAC7CC,YAAY,EAAE;AAClB,CAAC,CAAC","ignoreList":[]}},"mtime":1741362227892},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/graphql.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _httpProxyMiddleware = require(\"http-proxy-middleware\");\nvar _config = _interopRequireDefault(require(\"./config\"));\nconst graphQLProxy = (0, _httpProxyMiddleware.createProxyMiddleware)({\n  target: `${_config.default.guppyConfig.host}/graphql`,\n  changeOrigin: true,\n  on: {\n    error: (err, req, res) => {\n      res.status(500).send(err);\n    },\n    proxyReq: (proxyReq, req, res) => {\n      if (req.body) {\n        const bodyData = (0, _stringify.default)(req.body);\n        proxyReq.setHeader('Content-Length', Buffer.byteLength(bodyData));\n        proxyReq.write(bodyData);\n      }\n    },\n    proxyRes: (proxyRes, req, res) => {},\n    proxyReqWs: () => {},\n    open: () => {},\n    close: () => {}\n  }\n});\nvar _default = exports.default = graphQLProxy;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaHR0cFByb3h5TWlkZGxld2FyZSIsInJlcXVpcmUiLCJfY29uZmlnIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsImdyYXBoUUxQcm94eSIsImNyZWF0ZVByb3h5TWlkZGxld2FyZSIsInRhcmdldCIsImNvbmZpZyIsImd1cHB5Q29uZmlnIiwiaG9zdCIsImNoYW5nZU9yaWdpbiIsIm9uIiwiZXJyb3IiLCJlcnIiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJzZW5kIiwicHJveHlSZXEiLCJib2R5IiwiYm9keURhdGEiLCJfc3RyaW5naWZ5IiwiZGVmYXVsdCIsInNldEhlYWRlciIsIkJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJ3cml0ZSIsInByb3h5UmVzIiwicHJveHlSZXFXcyIsIm9wZW4iLCJjbG9zZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvZXhvdXNlci9Eb2N1bWVudHMvUHJvamVjdHMvYW5hZ2luZS9zcmMvc2VydmVyLyIsInNvdXJjZXMiOlsiZ3JhcGhxbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVQcm94eU1pZGRsZXdhcmUgfSBmcm9tICdodHRwLXByb3h5LW1pZGRsZXdhcmUnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5cbmNvbnN0IGdyYXBoUUxQcm94eSA9IGNyZWF0ZVByb3h5TWlkZGxld2FyZSh7XG4gICAgdGFyZ2V0OiBgJHtjb25maWcuZ3VwcHlDb25maWcuaG9zdH0vZ3JhcGhxbGAsXG4gICAgY2hhbmdlT3JpZ2luOiB0cnVlLFxuICAgIG9uOiB7XG4gICAgZXJyb3I6IChlcnIsIHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGVycik7XG4gICAgfSxcbiAgICBwcm94eVJlcTogKHByb3h5UmVxLCByZXEsIHJlcykgPT4ge1xuICAgICAgICBpZiAocmVxLmJvZHkpIHtcbiAgICAgICAgICAgIGNvbnN0IGJvZHlEYXRhID0gSlNPTi5zdHJpbmdpZnkocmVxLmJvZHkpO1xuICAgICAgICAgICAgcHJveHlSZXEuc2V0SGVhZGVyKCdDb250ZW50LUxlbmd0aCcsIEJ1ZmZlci5ieXRlTGVuZ3RoKGJvZHlEYXRhKSk7XG4gICAgICAgICAgICBwcm94eVJlcS53cml0ZShib2R5RGF0YSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHByb3h5UmVzOiAocHJveHlSZXMsIHJlcSwgcmVzKSA9PiB7fSxcbiAgICBwcm94eVJlcVdzOiAoKSA9PiB7fSxcbiAgICBvcGVuOiAoKSA9PiB7fSxcbiAgICBjbG9zZTogKCkgPT4ge30sXG4gICAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBncmFwaFFMUHJveHk7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxJQUFBQSxvQkFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBRUEsTUFBTUcsWUFBWSxHQUFHLElBQUFDLDBDQUFxQixFQUFDO0VBQ3ZDQyxNQUFNLEVBQUUsR0FBR0MsZUFBTSxDQUFDQyxXQUFXLENBQUNDLElBQUksVUFBVTtFQUM1Q0MsWUFBWSxFQUFFLElBQUk7RUFDbEJDLEVBQUUsRUFBRTtJQUNKQyxLQUFLLEVBQUVBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEtBQUs7TUFDdEJBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNKLEdBQUcsQ0FBQztJQUM3QixDQUFDO0lBQ0RLLFFBQVEsRUFBRUEsQ0FBQ0EsUUFBUSxFQUFFSixHQUFHLEVBQUVDLEdBQUcsS0FBSztNQUM5QixJQUFJRCxHQUFHLENBQUNLLElBQUksRUFBRTtRQUNWLE1BQU1DLFFBQVEsR0FBRyxJQUFBQyxVQUFBLENBQUFDLE9BQUEsRUFBZVIsR0FBRyxDQUFDSyxJQUFJLENBQUM7UUFDekNELFFBQVEsQ0FBQ0ssU0FBUyxDQUFDLGdCQUFnQixFQUFFQyxNQUFNLENBQUNDLFVBQVUsQ0FBQ0wsUUFBUSxDQUFDLENBQUM7UUFDakVGLFFBQVEsQ0FBQ1EsS0FBSyxDQUFDTixRQUFRLENBQUM7TUFDNUI7SUFDSixDQUFDO0lBQ0RPLFFBQVEsRUFBRUEsQ0FBQ0EsUUFBUSxFQUFFYixHQUFHLEVBQUVDLEdBQUcsS0FBSyxDQUFDLENBQUM7SUFDcENhLFVBQVUsRUFBRUEsQ0FBQSxLQUFNLENBQUMsQ0FBQztJQUNwQkMsSUFBSSxFQUFFQSxDQUFBLEtBQU0sQ0FBQyxDQUFDO0lBQ2RDLEtBQUssRUFBRUEsQ0FBQSxLQUFNLENBQUM7RUFDZDtBQUNKLENBQUMsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBVixPQUFBLEdBRVlsQixZQUFZIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_httpProxyMiddleware","require","_config","_interopRequireDefault","graphQLProxy","createProxyMiddleware","target","config","guppyConfig","host","changeOrigin","on","error","err","req","res","status","send","proxyReq","body","bodyData","_stringify","default","setHeader","Buffer","byteLength","write","proxyRes","proxyReqWs","open","close","_default","exports"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["graphql.js"],"sourcesContent":["import { createProxyMiddleware } from 'http-proxy-middleware';\nimport config from './config';\n\nconst graphQLProxy = createProxyMiddleware({\n    target: `${config.guppyConfig.host}/graphql`,\n    changeOrigin: true,\n    on: {\n    error: (err, req, res) => {\n        res.status(500).send(err);\n    },\n    proxyReq: (proxyReq, req, res) => {\n        if (req.body) {\n            const bodyData = JSON.stringify(req.body);\n            proxyReq.setHeader('Content-Length', Buffer.byteLength(bodyData));\n            proxyReq.write(bodyData);\n        }\n    },\n    proxyRes: (proxyRes, req, res) => {},\n    proxyReqWs: () => {},\n    open: () => {},\n    close: () => {},\n    },\n});\n\nexport default graphQLProxy;"],"mappings":";;;;;;;;;AAAA,IAAAA,oBAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAC,sBAAA,CAAAF,OAAA;AAEA,MAAMG,YAAY,GAAG,IAAAC,0CAAqB,EAAC;EACvCC,MAAM,EAAE,GAAGC,eAAM,CAACC,WAAW,CAACC,IAAI,UAAU;EAC5CC,YAAY,EAAE,IAAI;EAClBC,EAAE,EAAE;IACJC,KAAK,EAAEA,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,KAAK;MACtBA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,GAAG,CAAC;IAC7B,CAAC;IACDK,QAAQ,EAAEA,CAACA,QAAQ,EAAEJ,GAAG,EAAEC,GAAG,KAAK;MAC9B,IAAID,GAAG,CAACK,IAAI,EAAE;QACV,MAAMC,QAAQ,GAAG,IAAAC,UAAA,CAAAC,OAAA,EAAeR,GAAG,CAACK,IAAI,CAAC;QACzCD,QAAQ,CAACK,SAAS,CAAC,gBAAgB,EAAEC,MAAM,CAACC,UAAU,CAACL,QAAQ,CAAC,CAAC;QACjEF,QAAQ,CAACQ,KAAK,CAACN,QAAQ,CAAC;MAC5B;IACJ,CAAC;IACDO,QAAQ,EAAEA,CAACA,QAAQ,EAAEb,GAAG,EAAEC,GAAG,KAAK,CAAC,CAAC;IACpCa,UAAU,EAAEA,CAAA,KAAM,CAAC,CAAC;IACpBC,IAAI,EAAEA,CAAA,KAAM,CAAC,CAAC;IACdC,KAAK,EAAEA,CAAA,KAAM,CAAC;EACd;AACJ,CAAC,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAV,OAAA,GAEYlB,YAAY","ignoreList":[]}},"mtime":1741362652909},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/graphql.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _httpProxyMiddleware = require(\"http-proxy-middleware\");\nvar _config = _interopRequireDefault(require(\"./config\"));\nconst graphQLProxy = (0, _httpProxyMiddleware.createProxyMiddleware)({\n  target: `${_config.default.guppyConfig.host}/graphql`,\n  changeOrigin: true,\n  on: {\n    error: (err, req, res) => {\n      res.status(500).send(err);\n    },\n    proxyReq: (proxyReq, req, res) => {\n      if (req.body) {\n        const bodyData = (0, _stringify.default)(req.body);\n        proxyReq.setHeader('Content-Length', Buffer.byteLength(bodyData));\n        proxyReq.write(bodyData);\n      }\n    },\n    proxyRes: (proxyRes, req, res) => {},\n    proxyReqWs: () => {},\n    open: () => {},\n    close: () => {}\n  }\n});\nvar _default = exports.default = graphQLProxy;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaHR0cFByb3h5TWlkZGxld2FyZSIsInJlcXVpcmUiLCJfY29uZmlnIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsImdyYXBoUUxQcm94eSIsImNyZWF0ZVByb3h5TWlkZGxld2FyZSIsInRhcmdldCIsImNvbmZpZyIsImd1cHB5Q29uZmlnIiwiaG9zdCIsImNoYW5nZU9yaWdpbiIsIm9uIiwiZXJyb3IiLCJlcnIiLCJyZXEiLCJyZXMiLCJzdGF0dXMiLCJzZW5kIiwicHJveHlSZXEiLCJib2R5IiwiYm9keURhdGEiLCJfc3RyaW5naWZ5IiwiZGVmYXVsdCIsInNldEhlYWRlciIsIkJ1ZmZlciIsImJ5dGVMZW5ndGgiLCJ3cml0ZSIsInByb3h5UmVzIiwicHJveHlSZXFXcyIsIm9wZW4iLCJjbG9zZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvZXhvdXNlci9Eb2N1bWVudHMvUHJvamVjdHMvYW5hZ2luZS9zcmMvc2VydmVyLyIsInNvdXJjZXMiOlsiZ3JhcGhxbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVQcm94eU1pZGRsZXdhcmUgfSBmcm9tICdodHRwLXByb3h5LW1pZGRsZXdhcmUnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5cbmNvbnN0IGdyYXBoUUxQcm94eSA9IGNyZWF0ZVByb3h5TWlkZGxld2FyZSh7XG4gICAgdGFyZ2V0OiBgJHtjb25maWcuZ3VwcHlDb25maWcuaG9zdH0vZ3JhcGhxbGAsXG4gICAgY2hhbmdlT3JpZ2luOiB0cnVlLFxuICAgIG9uOiB7XG4gICAgZXJyb3I6IChlcnIsIHJlcSwgcmVzKSA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMoNTAwKS5zZW5kKGVycik7XG4gICAgfSxcbiAgICBwcm94eVJlcTogKHByb3h5UmVxLCByZXEsIHJlcykgPT4ge1xuICAgICAgICBpZiAocmVxLmJvZHkpIHtcbiAgICAgICAgICAgIGNvbnN0IGJvZHlEYXRhID0gSlNPTi5zdHJpbmdpZnkocmVxLmJvZHkpO1xuICAgICAgICAgICAgcHJveHlSZXEuc2V0SGVhZGVyKCdDb250ZW50LUxlbmd0aCcsIEJ1ZmZlci5ieXRlTGVuZ3RoKGJvZHlEYXRhKSk7XG4gICAgICAgICAgICBwcm94eVJlcS53cml0ZShib2R5RGF0YSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHByb3h5UmVzOiAocHJveHlSZXMsIHJlcSwgcmVzKSA9PiB7fSxcbiAgICBwcm94eVJlcVdzOiAoKSA9PiB7fSxcbiAgICBvcGVuOiAoKSA9PiB7fSxcbiAgICBjbG9zZTogKCkgPT4ge30sXG4gICAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBncmFwaFFMUHJveHk7Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQSxJQUFBQSxvQkFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBQyxzQkFBQSxDQUFBRixPQUFBO0FBRUEsTUFBTUcsWUFBWSxHQUFHLElBQUFDLDBDQUFxQixFQUFDO0VBQ3ZDQyxNQUFNLEVBQUUsR0FBR0MsZUFBTSxDQUFDQyxXQUFXLENBQUNDLElBQUksVUFBVTtFQUM1Q0MsWUFBWSxFQUFFLElBQUk7RUFDbEJDLEVBQUUsRUFBRTtJQUNKQyxLQUFLLEVBQUVBLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEtBQUs7TUFDdEJBLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNKLEdBQUcsQ0FBQztJQUM3QixDQUFDO0lBQ0RLLFFBQVEsRUFBRUEsQ0FBQ0EsUUFBUSxFQUFFSixHQUFHLEVBQUVDLEdBQUcsS0FBSztNQUM5QixJQUFJRCxHQUFHLENBQUNLLElBQUksRUFBRTtRQUNWLE1BQU1DLFFBQVEsR0FBRyxJQUFBQyxVQUFBLENBQUFDLE9BQUEsRUFBZVIsR0FBRyxDQUFDSyxJQUFJLENBQUM7UUFDekNELFFBQVEsQ0FBQ0ssU0FBUyxDQUFDLGdCQUFnQixFQUFFQyxNQUFNLENBQUNDLFVBQVUsQ0FBQ0wsUUFBUSxDQUFDLENBQUM7UUFDakVGLFFBQVEsQ0FBQ1EsS0FBSyxDQUFDTixRQUFRLENBQUM7TUFDNUI7SUFDSixDQUFDO0lBQ0RPLFFBQVEsRUFBRUEsQ0FBQ0EsUUFBUSxFQUFFYixHQUFHLEVBQUVDLEdBQUcsS0FBSyxDQUFDLENBQUM7SUFDcENhLFVBQVUsRUFBRUEsQ0FBQSxLQUFNLENBQUMsQ0FBQztJQUNwQkMsSUFBSSxFQUFFQSxDQUFBLEtBQU0sQ0FBQyxDQUFDO0lBQ2RDLEtBQUssRUFBRUEsQ0FBQSxLQUFNLENBQUM7RUFDZDtBQUNKLENBQUMsQ0FBQztBQUFDLElBQUFDLFFBQUEsR0FBQUMsT0FBQSxDQUFBVixPQUFBLEdBRVlsQixZQUFZIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["_httpProxyMiddleware","require","_config","_interopRequireDefault","graphQLProxy","createProxyMiddleware","target","config","guppyConfig","host","changeOrigin","on","error","err","req","res","status","send","proxyReq","body","bodyData","_stringify","default","setHeader","Buffer","byteLength","write","proxyRes","proxyReqWs","open","close","_default","exports"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["graphql.js"],"sourcesContent":["import { createProxyMiddleware } from 'http-proxy-middleware';\nimport config from './config';\n\nconst graphQLProxy = createProxyMiddleware({\n    target: `${config.guppyConfig.host}/graphql`,\n    changeOrigin: true,\n    on: {\n    error: (err, req, res) => {\n        res.status(500).send(err);\n    },\n    proxyReq: (proxyReq, req, res) => {\n        if (req.body) {\n            const bodyData = JSON.stringify(req.body);\n            proxyReq.setHeader('Content-Length', Buffer.byteLength(bodyData));\n            proxyReq.write(bodyData);\n        }\n    },\n    proxyRes: (proxyRes, req, res) => {},\n    proxyReqWs: () => {},\n    open: () => {},\n    close: () => {},\n    },\n});\n\nexport default graphQLProxy;"],"mappings":";;;;;;;;;AAAA,IAAAA,oBAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAC,sBAAA,CAAAF,OAAA;AAEA,MAAMG,YAAY,GAAG,IAAAC,0CAAqB,EAAC;EACvCC,MAAM,EAAE,GAAGC,eAAM,CAACC,WAAW,CAACC,IAAI,UAAU;EAC5CC,YAAY,EAAE,IAAI;EAClBC,EAAE,EAAE;IACJC,KAAK,EAAEA,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,KAAK;MACtBA,GAAG,CAACC,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACJ,GAAG,CAAC;IAC7B,CAAC;IACDK,QAAQ,EAAEA,CAACA,QAAQ,EAAEJ,GAAG,EAAEC,GAAG,KAAK;MAC9B,IAAID,GAAG,CAACK,IAAI,EAAE;QACV,MAAMC,QAAQ,GAAG,IAAAC,UAAA,CAAAC,OAAA,EAAeR,GAAG,CAACK,IAAI,CAAC;QACzCD,QAAQ,CAACK,SAAS,CAAC,gBAAgB,EAAEC,MAAM,CAACC,UAAU,CAACL,QAAQ,CAAC,CAAC;QACjEF,QAAQ,CAACQ,KAAK,CAACN,QAAQ,CAAC;MAC5B;IACJ,CAAC;IACDO,QAAQ,EAAEA,CAACA,QAAQ,EAAEb,GAAG,EAAEC,GAAG,KAAK,CAAC,CAAC;IACpCa,UAAU,EAAEA,CAAA,KAAM,CAAC,CAAC;IACpBC,IAAI,EAAEA,CAAA,KAAM,CAAC,CAAC;IACdC,KAAK,EAAEA,CAAA,KAAM,CAAC;EACd;AACJ,CAAC,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,CAAAV,OAAA,GAEYlB,YAAY","ignoreList":[]}},"mtime":1741362652909},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/llm.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"));\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\nvar _express = _interopRequireDefault(require(\"express\"));\nvar _child_process = require(\"child_process\");\nvar _logger = _interopRequireDefault(require(\"./logger\"));\nvar _config = _interopRequireDefault(require(\"./config\"));\nvar _path = _interopRequireDefault(require(\"path\"));\nconst llmRouter = _express.default.Router();\n\n// Initialize Ollama client\nconst ollama = new Ollama({\n  host: process.env.OLLAMA_HOST || 'http://localhost:11434'\n});\n\n// Chat with a model\nllmRouter.post('/chat', async (req, res) => {\n  try {\n    const {\n      model = process.env.DEFAULT_MODEL,\n      messages,\n      stream = false\n    } = req.body;\n    if (!messages || !(0, _isArray.default)(messages) || messages.length === 0) {\n      return res.status(400).json({\n        error: 'Valid messages array is required'\n      });\n    }\n\n    // If not streaming, return the full response\n    if (!stream) {\n      const response = await ollamaService.chatWithModel(model, messages);\n      return res.json(response);\n    }\n\n    // Set headers for streaming\n    res.setHeader('Content-Type', 'text/event-stream');\n    res.setHeader('Cache-Control', 'no-cache');\n    res.setHeader('Connection', 'keep-alive');\n\n    // Start streaming response\n    const response = await ollamaService.chatWithModel(model, messages, true);\n\n    // Stream each part of the response as SSE\n    for await (const part of response) {\n      res.write(`data: ${(0, _stringify.default)(part)}\\n\\n`);\n    }\n\n    // End the response\n    res.write('data: [DONE]\\n\\n');\n    res.end();\n  } catch (error) {\n    console.error('Error in chat:', error);\n    if (!res.headersSent) {\n      res.status(500).json({\n        error: 'Failed to communicate with LLM',\n        details: error.message\n      });\n    } else {\n      res.write(`data: ${(0, _stringify.default)({\n        error: error.message\n      })}\\n\\n`);\n      res.end();\n    }\n  }\n});\nvar _default = exports.default = llmRouter;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2NoaWxkX3Byb2Nlc3MiLCJfbG9nZ2VyIiwiX2NvbmZpZyIsIl9wYXRoIiwibGxtUm91dGVyIiwiZXhwcmVzcyIsIlJvdXRlciIsIm9sbGFtYSIsIk9sbGFtYSIsImhvc3QiLCJwcm9jZXNzIiwiZW52IiwiT0xMQU1BX0hPU1QiLCJwb3N0IiwicmVxIiwicmVzIiwibW9kZWwiLCJERUZBVUxUX01PREVMIiwibWVzc2FnZXMiLCJzdHJlYW0iLCJib2R5IiwiX2lzQXJyYXkiLCJkZWZhdWx0IiwibGVuZ3RoIiwic3RhdHVzIiwianNvbiIsImVycm9yIiwicmVzcG9uc2UiLCJvbGxhbWFTZXJ2aWNlIiwiY2hhdFdpdGhNb2RlbCIsInNldEhlYWRlciIsInBhcnQiLCJ3cml0ZSIsIl9zdHJpbmdpZnkiLCJlbmQiLCJjb25zb2xlIiwiaGVhZGVyc1NlbnQiLCJkZXRhaWxzIiwibWVzc2FnZSIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL2hvbWUvZXhvdXNlci9Eb2N1bWVudHMvUHJvamVjdHMvYW5hZ2luZS9zcmMvc2VydmVyLyIsInNvdXJjZXMiOlsibGxtLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgc3Bhd24gfSBmcm9tICdjaGlsZF9wcm9jZXNzJztcbmltcG9ydCBsb2cgZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcblxuY29uc3QgbGxtUm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcblxuLy8gSW5pdGlhbGl6ZSBPbGxhbWEgY2xpZW50XG5jb25zdCBvbGxhbWEgPSBuZXcgT2xsYW1hKHtcbiAgICBob3N0OiBwcm9jZXNzLmVudi5PTExBTUFfSE9TVCB8fCAnaHR0cDovL2xvY2FsaG9zdDoxMTQzNCdcbn0pO1xuXG4vLyBDaGF0IHdpdGggYSBtb2RlbFxubGxtUm91dGVyLnBvc3QoJy9jaGF0JywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgbW9kZWwgPSBwcm9jZXNzLmVudi5ERUZBVUxUX01PREVMLCBtZXNzYWdlcywgc3RyZWFtID0gZmFsc2UgfSA9IHJlcS5ib2R5O1xuICAgICAgXG4gICAgICBpZiAoIW1lc3NhZ2VzIHx8ICFBcnJheS5pc0FycmF5KG1lc3NhZ2VzKSB8fCBtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgZXJyb3I6ICdWYWxpZCBtZXNzYWdlcyBhcnJheSBpcyByZXF1aXJlZCcgfSk7XG4gICAgICB9XG4gIFxuICAgICAgLy8gSWYgbm90IHN0cmVhbWluZywgcmV0dXJuIHRoZSBmdWxsIHJlc3BvbnNlXG4gICAgICBpZiAoIXN0cmVhbSkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG9sbGFtYVNlcnZpY2UuY2hhdFdpdGhNb2RlbChtb2RlbCwgbWVzc2FnZXMpO1xuICAgICAgICByZXR1cm4gcmVzLmpzb24ocmVzcG9uc2UpO1xuICAgICAgfVxuICBcbiAgICAgIC8vIFNldCBoZWFkZXJzIGZvciBzdHJlYW1pbmdcbiAgICAgIHJlcy5zZXRIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICd0ZXh0L2V2ZW50LXN0cmVhbScpO1xuICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICduby1jYWNoZScpO1xuICAgICAgcmVzLnNldEhlYWRlcignQ29ubmVjdGlvbicsICdrZWVwLWFsaXZlJyk7XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IHN0cmVhbWluZyByZXNwb25zZVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBvbGxhbWFTZXJ2aWNlLmNoYXRXaXRoTW9kZWwobW9kZWwsIG1lc3NhZ2VzLCB0cnVlKTtcbiAgXG4gICAgICAvLyBTdHJlYW0gZWFjaCBwYXJ0IG9mIHRoZSByZXNwb25zZSBhcyBTU0VcbiAgICAgIGZvciBhd2FpdCAoY29uc3QgcGFydCBvZiByZXNwb25zZSkge1xuICAgICAgICByZXMud3JpdGUoYGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkocGFydCl9XFxuXFxuYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEVuZCB0aGUgcmVzcG9uc2VcbiAgICAgIHJlcy53cml0ZSgnZGF0YTogW0RPTkVdXFxuXFxuJyk7XG4gICAgICByZXMuZW5kKCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNoYXQ6JywgZXJyb3IpO1xuICAgICAgaWYgKCFyZXMuaGVhZGVyc1NlbnQpIHtcbiAgICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBjb21tdW5pY2F0ZSB3aXRoIExMTScsIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXMud3JpdGUoYGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KX1cXG5cXG5gKTtcbiAgICAgICAgcmVzLmVuZCgpO1xuICAgICAgfVxuICAgIH1cbiAgfSk7XG5cbmV4cG9ydCBkZWZhdWx0IGxsbVJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLElBQUFBLFFBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLGNBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLE9BQUEsR0FBQUosc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFJLEtBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLE1BQU1LLFNBQVMsR0FBR0MsZ0JBQU8sQ0FBQ0MsTUFBTSxDQUFDLENBQUM7O0FBRWxDO0FBQ0EsTUFBTUMsTUFBTSxHQUFH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","map":{"version":3,"names":["_express","_interopRequireDefault","require","_child_process","_logger","_config","_path","llmRouter","express","Router","ollama","Ollama","host","process","env","OLLAMA_HOST","post","req","res","model","DEFAULT_MODEL","messages","stream","body","_isArray","default","length","status","json","error","response","ollamaService","chatWithModel","setHeader","part","write","_stringify","end","console","headersSent","details","message","_default","exports"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/","sources":["llm.js"],"sourcesContent":["import express from 'express';\nimport { spawn } from 'child_process';\nimport log from './logger';\nimport config from './config';\nimport path from 'path';\n\nconst llmRouter = express.Router();\n\n// Initialize Ollama client\nconst ollama = new Ollama({\n    host: process.env.OLLAMA_HOST || 'http://localhost:11434'\n});\n\n// Chat with a model\nllmRouter.post('/chat', async (req, res) => {\n    try {\n      const { model = process.env.DEFAULT_MODEL, messages, stream = false } = req.body;\n      \n      if (!messages || !Array.isArray(messages) || messages.length === 0) {\n        return res.status(400).json({ error: 'Valid messages array is required' });\n      }\n  \n      // If not streaming, return the full response\n      if (!stream) {\n        const response = await ollamaService.chatWithModel(model, messages);\n        return res.json(response);\n      }\n  \n      // Set headers for streaming\n      res.setHeader('Content-Type', 'text/event-stream');\n      res.setHeader('Cache-Control', 'no-cache');\n      res.setHeader('Connection', 'keep-alive');\n      \n      // Start streaming response\n      const response = await ollamaService.chatWithModel(model, messages, true);\n  \n      // Stream each part of the response as SSE\n      for await (const part of response) {\n        res.write(`data: ${JSON.stringify(part)}\\n\\n`);\n      }\n      \n      // End the response\n      res.write('data: [DONE]\\n\\n');\n      res.end();\n    } catch (error) {\n      console.error('Error in chat:', error);\n      if (!res.headersSent) {\n        res.status(500).json({ error: 'Failed to communicate with LLM', details: error.message });\n      } else {\n        res.write(`data: ${JSON.stringify({ error: error.message })}\\n\\n`);\n        res.end();\n      }\n    }\n  });\n\nexport default llmRouter;\n"],"mappings":";;;;;;;;;;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,cAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,OAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,KAAA,GAAAL,sBAAA,CAAAC,OAAA;AAEA,MAAMK,SAAS,GAAGC,gBAAO,CAACC,MAAM,CAAC,CAAC;;AAElC;AACA,MAAMC,MAAM,GAAG,IAAIC,MAAM,CAAC;EACtBC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,WAAW,IAAI;AACrC,CAAC,CAAC;;AAEF;AACAR,SAAS,CAACS,IAAI,CAAC,OAAO,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACxC,IAAI;IACF,MAAM;MAAEC,KAAK,GAAGN,OAAO,CAACC,GAAG,CAACM,aAAa;MAAEC,QAAQ;MAAEC,MAAM,GAAG;IAAM,CAAC,GAAGL,GAAG,CAACM,IAAI;IAEhF,IAAI,CAACF,QAAQ,IAAI,CAAC,IAAAG,QAAA,CAAAC,OAAA,EAAcJ,QAAQ,CAAC,IAAIA,QAAQ,CAACK,MAAM,KAAK,CAAC,EAAE;MAClE,OAAOR,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE;MAAmC,CAAC,CAAC;IAC5E;;IAEA;IACA,IAAI,CAACP,MAAM,EAAE;MACX,MAAMQ,QAAQ,GAAG,MAAMC,aAAa,CAACC,aAAa,CAACb,KAAK,EAAEE,QAAQ,CAAC;MACnE,OAAOH,GAAG,CAACU,IAAI,CAACE,QAAQ,CAAC;IAC3B;;IAEA;IACAZ,GAAG,CAACe,SAAS,CAAC,cAAc,EAAE,mBAAmB,CAAC;IAClDf,GAAG,CAACe,SAAS,CAAC,eAAe,EAAE,UAAU,CAAC;IAC1Cf,GAAG,CAACe,SAAS,CAAC,YAAY,EAAE,YAAY,CAAC;;IAEzC;IACA,MAAMH,QAAQ,GAAG,MAAMC,aAAa,CAACC,aAAa,CAACb,KAAK,EAAEE,QAAQ,EAAE,IAAI,CAAC;;IAEzE;IACA,WAAW,MAAMa,IAAI,IAAIJ,QAAQ,EAAE;MACjCZ,GAAG,CAACiB,KAAK,CAAC,SAAS,IAAAC,UAAA,CAAAX,OAAA,EAAeS,IAAI,CAAC,MAAM,CAAC;IAChD;;IAEA;IACAhB,GAAG,CAACiB,KAAK,CAAC,kBAAkB,CAAC;IAC7BjB,GAAG,CAACmB,GAAG,CAAC,CAAC;EACX,CAAC,CAAC,OAAOR,KAAK,EAAE;IACdS,OAAO,CAACT,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;IACtC,IAAI,CAACX,GAAG,CAACqB,WAAW,EAAE;MACpBrB,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,KAAK,EAAE,gCAAgC;QAAEW,OAAO,EAAEX,KAAK,CAACY;MAAQ,CAAC,CAAC;IAC3F,CAAC,MAAM;MACLvB,GAAG,CAACiB,KAAK,CAAC,SAAS,IAAAC,UAAA,CAAAX,OAAA,EAAe;QAAEI,KAAK,EAAEA,KAAK,CAACY;MAAQ,CAAC,CAAC,MAAM,CAAC;MAClEvB,GAAG,CAACmB,GAAG,CAAC,CAAC;IACX;EACF;AACF,CAAC,CAAC;AAAC,IAAAK,QAAA,GAAAC,OAAA,CAAAlB,OAAA,GAEUlB,SAAS","ignoreList":[]}},"mtime":1745558136277},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/llm.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\nvar _assign = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/assign\"));\nvar _ollama = _interopRequireDefault(require(\"ollama\"));\nvar _config = _interopRequireDefault(require(\"../config\"));\nmodule.exports = _ollama.default;\nmodule.exports.chatWithModel = async function (model, messages, stream = false, options = {}) {\n  try {\n    return await _ollama.default.chat((0, _assign.default)({\n      model,\n      messages,\n      stream\n    }, options));\n  } catch (error) {\n    console.error(`Error chatting with model ${model}:`, error);\n    throw error;\n  }\n};\nmodule.exports.generateText = async function (model, messages, stream = false, options = {}) {\n  try {\n    return await _ollama.default.generate((0, _assign.default)({\n      model,\n      messages,\n      stream\n    }, options));\n  } catch (error) {\n    console.error(`Error generating text with model ${model}:`, error);\n    throw error;\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfb2xsYW1hIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfY29uZmlnIiwibW9kdWxlIiwiZXhwb3J0cyIsIm9sbGFtYSIsImNoYXRXaXRoTW9kZWwiLCJtb2RlbCIsIm1lc3NhZ2VzIiwic3RyZWFtIiwib3B0aW9ucyIsImNoYXQiLCJfYXNzaWduIiwiZGVmYXVsdCIsImVycm9yIiwiY29uc29sZSIsImdlbmVyYXRlVGV4dCIsImdlbmVyYXRlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9leG91c2VyL0RvY3VtZW50cy9Qcm9qZWN0cy9hbmFnaW5lL3NyYy9zZXJ2ZXIvdXRpbHMvIiwic291cmNlcyI6WyJsbG0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG9sbGFtYSBmcm9tICdvbGxhbWEnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG9sbGFtYTtcblxubW9kdWxlLmV4cG9ydHMuY2hhdFdpdGhNb2RlbCA9IGFzeW5jIGZ1bmN0aW9uKG1vZGVsLCBtZXNzYWdlcywgc3RyZWFtID0gZmFsc2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBvbGxhbWEuY2hhdCh7XG4gICAgICAgICAgICBtb2RlbCxcbiAgICAgICAgICAgIG1lc3NhZ2VzLFxuICAgICAgICAgICAgc3RyZWFtLFxuICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjaGF0dGluZyB3aXRoIG1vZGVsICR7bW9kZWx9OmAsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufTtcbiAgXG5tb2R1bGUuZXhwb3J0cy5nZW5lcmF0ZVRleHQgPSBhc3luYyBmdW5jdGlvbihtb2RlbCwgbWVzc2FnZXMsIHN0cmVhbSA9IGZhbHNlLCBvcHRpb25zID0ge30pIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgb2xsYW1hLmdlbmVyYXRlKHtcbiAgICAgICAgICAgIG1vZGVsLFxuICAgICAgICAgICAgbWVzc2FnZXMsXG4gICAgICAgICAgICBzdHJlYW0sXG4gICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGdlbmVyYXRpbmcgdGV4dCB3aXRoIG1vZGVsICR7bW9kZWx9OmAsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBRSxNQUFNLENBQUNDLE9BQU8sR0FBR0MsZUFBTTtBQUV2QkYsTUFBTSxDQUFDQyxPQUFPLENBQUNFLGFBQWEsR0FBRyxnQkFBZUMsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sR0FBRyxLQUFLLEVBQUVDLE9BQU8sR0FBRyxDQUFDLENBQUMsRUFBRTtFQUN6RixJQUFJO0lBQ0EsT0FBTyxNQUFNTCxlQUFNLENBQUNNLElBQUksS0FBQUMsT0FBQSxDQUFBQyxPQUFBO01BQ3BCTixLQUFLO01BQ0xDLFFBQVE7TUFDUkM7SUFBTSxHQUNIQyxPQUFPLENBQ2IsQ0FBQztFQUNOLENBQUMsQ0FBQyxPQUFPSSxLQUFLLEVBQUU7SUFDWkMsT0FBTyxDQUFDRCxLQUFLLENBQUMsNkJBQTZCUCxLQUFLLEdBQUcsRUFBRU8sS0FBSyxDQUFDO0lBQzNELE1BQU1BLEtBQUs7RUFDZjtBQUNKLENBQUM7QUFFRFgsTUFBTSxDQUFDQyxPQUFPLENBQUNZLFlBQVksR0FBRyxnQkFBZVQsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sR0FBRyxLQUFLLEVBQUVDLE9BQU8sR0FBRyxDQUFDLENBQUMsRUFBRTtFQUN4RixJQUFJO0lBQ0EsT0FBTyxNQUFNTCxlQUFNLENBQUNZLFFBQVEsS0FBQUwsT0FBQSxDQUFBQyxPQUFBO01BQ3hCTixLQUFLO01BQ0xDLFFBQVE7TUFDUkM7SUFBTSxHQUNIQyxPQUFPLENBQ2IsQ0FBQztFQUNOLENBQUMsQ0FBQyxPQUFPSSxLQUFLLEVBQUU7SUFDWkMsT0FBTyxDQUFDRCxLQUFLLENBQUMsb0NBQW9DUCxLQUFLLEdBQUcsRUFBRU8sS0FBSyxDQUFDO0lBQ2xFLE1BQU1BLEtBQUs7RUFDZjtBQUNKLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_ollama","_interopRequireDefault","require","_config","module","exports","ollama","chatWithModel","model","messages","stream","options","chat","_assign","default","error","console","generateText","generate"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/utils/","sources":["llm.js"],"sourcesContent":["import ollama from 'ollama';\nimport config from '../config';\n\nmodule.exports = ollama;\n\nmodule.exports.chatWithModel = async function(model, messages, stream = false, options = {}) {\n    try {\n        return await ollama.chat({\n            model,\n            messages,\n            stream,\n            ...options\n        });\n    } catch (error) {\n        console.error(`Error chatting with model ${model}:`, error);\n        throw error;\n    }\n};\n  \nmodule.exports.generateText = async function(model, messages, stream = false, options = {}) {\n    try {\n        return await ollama.generate({\n            model,\n            messages,\n            stream,\n            ...options\n        });\n    } catch (error) {\n        console.error(`Error generating text with model ${model}:`, error);\n        throw error;\n    }\n};\n"],"mappings":";;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEAE,MAAM,CAACC,OAAO,GAAGC,eAAM;AAEvBF,MAAM,CAACC,OAAO,CAACE,aAAa,GAAG,gBAAeC,KAAK,EAAEC,QAAQ,EAAEC,MAAM,GAAG,KAAK,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACzF,IAAI;IACA,OAAO,MAAML,eAAM,CAACM,IAAI,KAAAC,OAAA,CAAAC,OAAA;MACpBN,KAAK;MACLC,QAAQ;MACRC;IAAM,GACHC,OAAO,CACb,CAAC;EACN,CAAC,CAAC,OAAOI,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,6BAA6BP,KAAK,GAAG,EAAEO,KAAK,CAAC;IAC3D,MAAMA,KAAK;EACf;AACJ,CAAC;AAEDX,MAAM,CAACC,OAAO,CAACY,YAAY,GAAG,gBAAeT,KAAK,EAAEC,QAAQ,EAAEC,MAAM,GAAG,KAAK,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACxF,IAAI;IACA,OAAO,MAAML,eAAM,CAACY,QAAQ,KAAAL,OAAA,CAAAC,OAAA;MACxBN,KAAK;MACLC,QAAQ;MACRC;IAAM,GACHC,OAAO,CACb,CAAC;EACN,CAAC,CAAC,OAAOI,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,oCAAoCP,KAAK,GAAG,EAAEO,KAAK,CAAC;IAClE,MAAMA,KAAK;EACf;AACJ,CAAC","ignoreList":[]}},"mtime":1745564261430},"{\"assumptions\":{},\"sourceRoot\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/home/exouser/Documents/Projects/anagine\",\"filename\":\"/home/exouser/Documents/Projects/anagine/src/server/utils/llm.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/home/exouser/Documents/Projects/anagine\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-runtime\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null,null]},\"BinaryExpression\":{\"enter\":[null,null]},\"MemberExpression\":{\"enter\":[null,null]},\"OptionalMemberExpression\":{\"enter\":[null,null]},\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null,null]}},\"options\":{\"corejs\":3},\"externalDependencies\":[]},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"loose\":true,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"proposal-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":true},\"externalDependencies\":[]},{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$1\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$14\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"/home/exouser/Documents/Projects/anagine/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":true},\"externalDependencies\":[]},{\"key\":\"inject-polyfills\",\"visitor\":{\"ObjectPattern\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"MemberExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"Identifier\":{\"enter\":[null]},\"JSXIdentifier\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"SpreadElement\":{\"enter\":[null]},\"YieldExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"method\":\"usage-global\",\"version\":\"3.0.0\",\"targets\":{\"chrome\":\"131.0.0\",\"edge\":\"131.0.0\",\"ios\":\"18.1.0\"},\"include\":{},\"exclude\":{},\"proposals\":false,\"shippedProposals\":false,\"debug\":false,\"#__secret_key__@babel/preset-env__compatibility\":{\"noRuntimeName\":true}},\"externalDependencies\":[]},{\"key\":\"preset-env/replace-babel-polyfill\",\"visitor\":{\"ImportDeclaration\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"usage\":true,\"deprecated\":true},\"externalDependencies\":[]}],\"presets\":[]}:7.26.9:development":{"value":{"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\nvar _assign = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/assign\"));\nvar _ollama = _interopRequireDefault(require(\"ollama\"));\nvar _config = _interopRequireDefault(require(\"../config\"));\nmodule.exports = _ollama.default;\nmodule.exports.chatWithModel = async function (model, messages, stream = false, options = {}) {\n  try {\n    return await _ollama.default.chat((0, _assign.default)({\n      model,\n      messages,\n      stream\n    }, options));\n  } catch (error) {\n    console.error(`Error chatting with model ${model}:`, error);\n    throw error;\n  }\n};\nmodule.exports.generateText = async function (model, messages, stream = false, options = {}) {\n  try {\n    return await _ollama.default.generate((0, _assign.default)({\n      model,\n      messages,\n      stream\n    }, options));\n  } catch (error) {\n    console.error(`Error generating text with model ${model}:`, error);\n    throw error;\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfb2xsYW1hIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfY29uZmlnIiwibW9kdWxlIiwiZXhwb3J0cyIsIm9sbGFtYSIsImNoYXRXaXRoTW9kZWwiLCJtb2RlbCIsIm1lc3NhZ2VzIiwic3RyZWFtIiwib3B0aW9ucyIsImNoYXQiLCJfYXNzaWduIiwiZGVmYXVsdCIsImVycm9yIiwiY29uc29sZSIsImdlbmVyYXRlVGV4dCIsImdlbmVyYXRlIl0sInNvdXJjZVJvb3QiOiIvaG9tZS9leG91c2VyL0RvY3VtZW50cy9Qcm9qZWN0cy9hbmFnaW5lL3NyYy9zZXJ2ZXIvdXRpbHMvIiwic291cmNlcyI6WyJsbG0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG9sbGFtYSBmcm9tICdvbGxhbWEnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG9sbGFtYTtcblxubW9kdWxlLmV4cG9ydHMuY2hhdFdpdGhNb2RlbCA9IGFzeW5jIGZ1bmN0aW9uKG1vZGVsLCBtZXNzYWdlcywgc3RyZWFtID0gZmFsc2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBhd2FpdCBvbGxhbWEuY2hhdCh7XG4gICAgICAgICAgICBtb2RlbCxcbiAgICAgICAgICAgIG1lc3NhZ2VzLFxuICAgICAgICAgICAgc3RyZWFtLFxuICAgICAgICAgICAgLi4ub3B0aW9uc1xuICAgICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjaGF0dGluZyB3aXRoIG1vZGVsICR7bW9kZWx9OmAsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufTtcbiAgXG5tb2R1bGUuZXhwb3J0cy5nZW5lcmF0ZVRleHQgPSBhc3luYyBmdW5jdGlvbihtb2RlbCwgbWVzc2FnZXMsIHN0cmVhbSA9IGZhbHNlLCBvcHRpb25zID0ge30pIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gYXdhaXQgb2xsYW1hLmdlbmVyYXRlKHtcbiAgICAgICAgICAgIG1vZGVsLFxuICAgICAgICAgICAgbWVzc2FnZXMsXG4gICAgICAgICAgICBzdHJlYW0sXG4gICAgICAgICAgICAuLi5vcHRpb25zXG4gICAgICAgIH0pO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGdlbmVyYXRpbmcgdGV4dCB3aXRoIG1vZGVsICR7bW9kZWx9OmAsIGVycm9yKTtcbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLElBQUFBLE9BQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBRSxNQUFNLENBQUNDLE9BQU8sR0FBR0MsZUFBTTtBQUV2QkYsTUFBTSxDQUFDQyxPQUFPLENBQUNFLGFBQWEsR0FBRyxnQkFBZUMsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sR0FBRyxLQUFLLEVBQUVDLE9BQU8sR0FBRyxDQUFDLENBQUMsRUFBRTtFQUN6RixJQUFJO0lBQ0EsT0FBTyxNQUFNTCxlQUFNLENBQUNNLElBQUksS0FBQUMsT0FBQSxDQUFBQyxPQUFBO01BQ3BCTixLQUFLO01BQ0xDLFFBQVE7TUFDUkM7SUFBTSxHQUNIQyxPQUFPLENBQ2IsQ0FBQztFQUNOLENBQUMsQ0FBQyxPQUFPSSxLQUFLLEVBQUU7SUFDWkMsT0FBTyxDQUFDRCxLQUFLLENBQUMsNkJBQTZCUCxLQUFLLEdBQUcsRUFBRU8sS0FBSyxDQUFDO0lBQzNELE1BQU1BLEtBQUs7RUFDZjtBQUNKLENBQUM7QUFFRFgsTUFBTSxDQUFDQyxPQUFPLENBQUNZLFlBQVksR0FBRyxnQkFBZVQsS0FBSyxFQUFFQyxRQUFRLEVBQUVDLE1BQU0sR0FBRyxLQUFLLEVBQUVDLE9BQU8sR0FBRyxDQUFDLENBQUMsRUFBRTtFQUN4RixJQUFJO0lBQ0EsT0FBTyxNQUFNTCxlQUFNLENBQUNZLFFBQVEsS0FBQUwsT0FBQSxDQUFBQyxPQUFBO01BQ3hCTixLQUFLO01BQ0xDLFFBQVE7TUFDUkM7SUFBTSxHQUNIQyxPQUFPLENBQ2IsQ0FBQztFQUNOLENBQUMsQ0FBQyxPQUFPSSxLQUFLLEVBQUU7SUFDWkMsT0FBTyxDQUFDRCxLQUFLLENBQUMsb0NBQW9DUCxLQUFLLEdBQUcsRUFBRU8sS0FBSyxDQUFDO0lBQ2xFLE1BQU1BLEtBQUs7RUFDZjtBQUNKLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_ollama","_interopRequireDefault","require","_config","module","exports","ollama","chatWithModel","model","messages","stream","options","chat","_assign","default","error","console","generateText","generate"],"sourceRoot":"/home/exouser/Documents/Projects/anagine/src/server/utils/","sources":["llm.js"],"sourcesContent":["import ollama from 'ollama';\nimport config from '../config';\n\nmodule.exports = ollama;\n\nmodule.exports.chatWithModel = async function(model, messages, stream = false, options = {}) {\n    try {\n        return await ollama.chat({\n            model,\n            messages,\n            stream,\n            ...options\n        });\n    } catch (error) {\n        console.error(`Error chatting with model ${model}:`, error);\n        throw error;\n    }\n};\n  \nmodule.exports.generateText = async function(model, messages, stream = false, options = {}) {\n    try {\n        return await ollama.generate({\n            model,\n            messages,\n            stream,\n            ...options\n        });\n    } catch (error) {\n        console.error(`Error generating text with model ${model}:`, error);\n        throw error;\n    }\n};\n"],"mappings":";;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,OAAA,GAAAF,sBAAA,CAAAC,OAAA;AAEAE,MAAM,CAACC,OAAO,GAAGC,eAAM;AAEvBF,MAAM,CAACC,OAAO,CAACE,aAAa,GAAG,gBAAeC,KAAK,EAAEC,QAAQ,EAAEC,MAAM,GAAG,KAAK,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACzF,IAAI;IACA,OAAO,MAAML,eAAM,CAACM,IAAI,KAAAC,OAAA,CAAAC,OAAA;MACpBN,KAAK;MACLC,QAAQ;MACRC;IAAM,GACHC,OAAO,CACb,CAAC;EACN,CAAC,CAAC,OAAOI,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,6BAA6BP,KAAK,GAAG,EAAEO,KAAK,CAAC;IAC3D,MAAMA,KAAK;EACf;AACJ,CAAC;AAEDX,MAAM,CAACC,OAAO,CAACY,YAAY,GAAG,gBAAeT,KAAK,EAAEC,QAAQ,EAAEC,MAAM,GAAG,KAAK,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAE;EACxF,IAAI;IACA,OAAO,MAAML,eAAM,CAACY,QAAQ,KAAAL,OAAA,CAAAC,OAAA;MACxBN,KAAK;MACLC,QAAQ;MACRC;IAAM,GACHC,OAAO,CACb,CAAC;EACN,CAAC,CAAC,OAAOI,KAAK,EAAE;IACZC,OAAO,CAACD,KAAK,CAAC,oCAAoCP,KAAK,GAAG,EAAEO,KAAK,CAAC;IAClE,MAAMA,KAAK;EACf;AACJ,CAAC","ignoreList":[]}},"mtime":1745564261430}}