"use strict";
(self["webpackChunkanagine"] = self["webpackChunkanagine"] || []).push([["connectedTable-stories"],{

/***/ "./stories/TableExample.jsx":
/*!**********************************!*\
  !*** ./stories/TableExample.jsx ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "./node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var antd__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! antd */ "./node_modules/antd/es/table/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! prop-types */ "./node_modules/prop-types/index.js");
/* harmony import */ var prop_types__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _conf__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./conf */ "./stories/conf.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");






class ConnectedTableExample extends react__WEBPACK_IMPORTED_MODULE_1__.Component {
  constructor(props) {
    super(props);
    this.state = {
      loading: false,
      pagination: {
        current: 1,
        pageSize: 20,
        total: this.props.totalCount
      }
    };
  }
  componentDidUpdate(prevProps) {
    if (prevProps?.totalCount !== this.props.totalCount) {
      this.setState({
        pagination: {
          current: this.state.pagination.current,
          pageSize: this.state.pagination.pageSize,
          total: this.props.totalCount
        }
      });
    }
  }
  render() {
    const columnsConfig = _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(_conf__WEBPACK_IMPORTED_MODULE_2__.tableConfig).call(_conf__WEBPACK_IMPORTED_MODULE_2__.tableConfig, c => ({
      title: c.name,
      dataIndex: c.field,
      sorter: true
    }));
    const handleTableChange = (pagination, filters, sorter) => {
      const size = pagination.pageSize;
      this.setState({
        loading: true
      });
      const offset = (pagination.current - 1) * size;
      const sort = sorter?.order ? {
        [sorter.field]: sorter.order === 'descend' ? 'desc' : 'asc'
      } : {};
      this.props.fetchAndUpdateRawData({
        offset,
        size,
        sort
      }).then(res => {
        this.setState({
          loading: false,
          pagination: {
            current: pagination.current,
            pageSize: size,
            total: this.props.totalCount
          }
        });
      });
    };
    return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(antd__WEBPACK_IMPORTED_MODULE_4__["default"], {
      className: `connected-table-example ${this.props.className}`,
      columns: columnsConfig,
      dataSource: this.props.rawData || [],
      pagination: this.state.pagination,
      loading: this.state.loading // Display the loading overlay when we need it
      ,
      onChange: handleTableChange // Request new data when things change
    });
  }
}
ConnectedTableExample.displayName = "ConnectedTableExample";
ConnectedTableExample.propTypes = {
  rawData: (prop_types__WEBPACK_IMPORTED_MODULE_5___default().array),
  className: (prop_types__WEBPACK_IMPORTED_MODULE_5___default().string),
  fetchAndUpdateRawData: (prop_types__WEBPACK_IMPORTED_MODULE_5___default().func),
  totalCount: (prop_types__WEBPACK_IMPORTED_MODULE_5___default().number)
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ConnectedTableExample);

/***/ }),

/***/ "./stories/connectedTable.stories.jsx":
/*!********************************************!*\
  !*** ./stories/connectedTable.stories.jsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ConnectedFilterAndTable: () => (/* binding */ ConnectedFilterAndTable),
/* harmony export */   __namedExportsOrder: () => (/* binding */ __namedExportsOrder),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs3/core-js-stable/instance/map */ "./node_modules/@babel/runtime-corejs3/core-js-stable/instance/map.js");
/* harmony import */ var _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var _storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @storybook/addon-actions */ "./node_modules/@storybook/addon-actions/dist/index.mjs");
/* harmony import */ var _src_components_ConnectedFilter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../src/components/ConnectedFilter */ "./src/components/ConnectedFilter/index.jsx");
/* harmony import */ var _src_components_GuppyWrapper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../src/components/GuppyWrapper */ "./src/components/GuppyWrapper/index.jsx");
/* harmony import */ var _TableExample__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./TableExample */ "./stories/TableExample.jsx");
/* harmony import */ var _guppyWrapper_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./guppyWrapper.css */ "./stories/guppyWrapper.css");
/* harmony import */ var _conf__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./conf */ "./stories/conf.js");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");



// import ConnectedFilter from '@gen3/guppy/dist/components/ConnectedFilter';
// import GuppyWrapper from '@gen3/guppy/dist/components/GuppyWrapper';






/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({
  title: 'Guppy Wrapper'
});
const ConnectedFilterAndTable = () => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)("div", {
  className: "guppy-wrapper",
  children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsxs)(_src_components_GuppyWrapper__WEBPACK_IMPORTED_MODULE_4__["default"], {
    filterConfig: _conf__WEBPACK_IMPORTED_MODULE_7__.filterConfig,
    guppyConfig: _conf__WEBPACK_IMPORTED_MODULE_7__.guppyConfig,
    rawDataFields: _babel_runtime_corejs3_core_js_stable_instance_map__WEBPACK_IMPORTED_MODULE_0___default()(_conf__WEBPACK_IMPORTED_MODULE_7__.tableConfig).call(_conf__WEBPACK_IMPORTED_MODULE_7__.tableConfig, e => e.field),
    onFilterChange: (0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__.action)('wrapper receive filter change'),
    onReceiveNewAggsData: (0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__.action)('wrapper receive aggs data'),
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_src_components_ConnectedFilter__WEBPACK_IMPORTED_MODULE_3__["default"], {
      className: "guppy-wrapper__filter",
      filterConfig: _conf__WEBPACK_IMPORTED_MODULE_7__.filterConfig,
      guppyConfig: _conf__WEBPACK_IMPORTED_MODULE_7__.guppyConfig
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_8__.jsx)(_TableExample__WEBPACK_IMPORTED_MODULE_5__["default"], {
      className: "guppy-wrapper__table"
    })]
  })
});
ConnectedFilterAndTable.displayName = "ConnectedFilterAndTable";
ConnectedFilterAndTable.story = {
  name: 'Connected Filter and Table'
};;const __namedExportsOrder = ["ConnectedFilterAndTable"];

/***/ })

}]);
//# sourceMappingURL=connectedTable-stories.iframe.bundle.js.map