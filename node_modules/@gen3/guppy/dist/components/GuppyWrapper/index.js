"use strict";function _typeof(o) {"@babel/helpers - typeof";return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {return typeof o;} : function (o) {return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;}, _typeof(o);}Object.defineProperty(exports, "__esModule", { value: true });exports["default"] = void 0;

var _react = _interopRequireDefault(require("react"));
var _propTypes = _interopRequireDefault(require("prop-types"));
var _queries = require("../Utils/queries");







var _const = require("../Utils/const");
var _filters = require("../Utils/filters");function _interopRequireDefault(e) {return e && e.__esModule ? e : { "default": e };}function ownKeys(e, r) {var t = Object.keys(e);if (Object.getOwnPropertySymbols) {var o = Object.getOwnPropertySymbols(e);r && (o = o.filter(function (r) {return Object.getOwnPropertyDescriptor(e, r).enumerable;})), t.push.apply(t, o);}return t;}function _objectSpread(e) {for (var r = 1; r < arguments.length; r++) {var t = null != arguments[r] ? arguments[r] : {};r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {_defineProperty(e, r, t[r]);}) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));});}return e;}function _defineProperty(e, r, t) {return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e;}function _classCallCheck(a, n) {if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function");}function _defineProperties(e, r) {for (var t = 0; t < r.length; t++) {var o = r[t];o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o);}}function _createClass(e, r, t) {return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", { writable: !1 }), e;}function _toPropertyKey(t) {var i = _toPrimitive(t, "string");return "symbol" == _typeof(i) ? i : i + "";}function _toPrimitive(t, r) {if ("object" != _typeof(t) || !t) return t;var e = t[Symbol.toPrimitive];if (void 0 !== e) {var i = e.call(t, r || "default");if ("object" != _typeof(i)) return i;throw new TypeError("@@toPrimitive must return a primitive value.");}return ("string" === r ? String : Number)(t);}function _callSuper(t, o, e) {return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e));}function _possibleConstructorReturn(t, e) {if (e && ("object" == _typeof(e) || "function" == typeof e)) return e;if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t);}function _assertThisInitialized(e) {if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e;}function _isNativeReflectConstruct() {try {var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));} catch (t) {}return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {return !!t;})();}function _getPrototypeOf(t) {return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {return t.__proto__ || Object.getPrototypeOf(t);}, _getPrototypeOf(t);}function _inherits(t, e) {if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, "prototype", { writable: !1 }), e && _setPrototypeOf(t, e);}function _setPrototypeOf(t, e) {return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {return t.__proto__ = e, t;}, _setPrototypeOf(t, e);} /* eslint-disable react/jsx-fragments */ /* eslint react/forbid-prop-types: 0 */

/**
 * Wrapper that connects to Guppy server,
 * and pass filter, aggs, and data to children components
 * Input props:
 *   - filterConfig: configuration for ConnectedFilter component
 *   - guppyConfig: Guppy server config
 *   - onFilterChange: callback that takes filter as argument, will be
 * called every time filter changes
 *   - onReceiveNewAggsData: callback that takes aggregation results
 * as argument, will be called every time aggregation results updated
 *
 * This wrapper will pass following data (filters, aggs, configs) to children components via prop:
 *   - aggsData: the aggregation results, format:
 *         {
 *             // for text aggregation
 *            [field]: { histogram: [{key: 'v1', count: 42}, {key: 'v2', count: 19}, ...] },
 *             // for numeric aggregation
 *            [field]: { histogram: [{key: [1, 83], count: 100}] },
 *            ...
 *         }
 *   - filter: the filters, format:
 *         {
 *            [field]: { selectedValues: ['v1', 'v2', ...] },  // for text filter
 *            [field]: { upperBound: 1, lowerBound: 83 },  // for range filter
 *            ...
 *         }
 *   - filterConfig: configuration for ConnectedFilter component
 *   - rawData: raw data records filtered (with offset, size, and sort applied)
 *   - totalCount: total count of raw data records
 *
 */var
GuppyWrapper = /*#__PURE__*/function (_React$Component) {
  function GuppyWrapper(props) {var _this;_classCallCheck(this, GuppyWrapper);
    _this = _callSuper(this, GuppyWrapper, [props]);
    var initialFilter = _this.props.adminAppliedPreFilters;
    if (Object.keys(_this.props.initialFilterFromURL).length > 0) {
      initialFilter = (0, _filters.mergeFilters)(
        _this.props.initialFilterFromURL,
        _this.props.adminAppliedPreFilters
      );
    }

    // to avoid asynchronizations, we store another filter as private var
    _this.filter = _objectSpread({}, initialFilter);
    _this.adminPreFiltersFrozen = JSON.stringify(_this.props.adminAppliedPreFilters).slice();
    _this.state = {
      gettingDataFromGuppy: false,
      aggsData: {},
      filter: _objectSpread({}, initialFilter),
      rawData: [],
      totalCount: 0,
      allRegularAggFields: [],
      allAsTextAggFields: [],
      rawDataFields: [],
      accessibleFieldObject: undefined,
      unaccessibleFieldObject: undefined,
      accessibility: _const.ENUM_ACCESSIBILITY.ALL,
      adminAppliedPreFilters: _objectSpread({}, _this.props.adminAppliedPreFilters),
      userFilterFromURL: _objectSpread({}, _this.props.initialFilterFromURL)
    };return _this;
  }_inherits(GuppyWrapper, _React$Component);return _createClass(GuppyWrapper, [{ key: "componentDidMount", value:

    function componentDidMount() {var _this2 = this;
      (0, _queries.getAllFieldsFromGuppy)(
        this.props.guppyConfig.path,
        this.props.guppyConfig.type,
        this.props.csrfToken
      ).then(function (fields) {
        var rawDataFields = _this2.props.rawDataFields && _this2.props.rawDataFields.length > 0 ?
        _this2.props.rawDataFields : fields;
        _this2.setState({
          allRegularAggFields: fields,
          rawDataFields: rawDataFields
        }, function () {
          _this2.getDataFromGuppy(_this2.state.rawDataFields, undefined, true);
        });
      });
      if (typeof this.props.accessibleFieldCheckList !== 'undefined') {
        (0, _queries.getAccessibleResources)(
          this.props.guppyConfig.path,
          this.props.guppyConfig.type,
          this.props.accessibleFieldCheckList,
          this.props.csrfToken
        ).then(function (_ref) {var accessibleFieldObject = _ref.accessibleFieldObject,unaccessibleFieldObject = _ref.unaccessibleFieldObject;
          _this2.setState({
            accessibleFieldObject: accessibleFieldObject,
            unaccessibleFieldObject: unaccessibleFieldObject
          });
        });
      }
    } }, { key: "handleReceiveNewAggsData", value:

    function handleReceiveNewAggsData(aggsData) {
      if (this.props.onReceiveNewAggsData) {
        this.props.onReceiveNewAggsData(aggsData, this.filter);
      }
      this.setState({ aggsData: aggsData });
    } }, { key: "handleFilterChange", value:

    function handleFilterChange(userFilterFromUserInput, accessibility) {var _this3 = this;
      var userFilter = userFilterFromUserInput;

      // Apply user filters from URL on page load. Empty out state to avoid reapplying used filters.
      if (Object.keys(userFilter).length === 0 &&
      Object.keys(this.state.userFilterFromURL).length > 0) {
        userFilter = JSON.parse(JSON.stringify(this.state.userFilterFromURL));
        this.setState({ userFilterFromURL: {} });
      }

      this.setState({ adminAppliedPreFilters: JSON.parse(this.adminPreFiltersFrozen) });
      var filter = _objectSpread({}, userFilter);
      if (Object.keys(this.state.adminAppliedPreFilters).length > 0) {
        filter = (0, _filters.mergeFilters)(userFilter, this.state.adminAppliedPreFilters);
      }
      if (this.props.onFilterChange) {
        this.props.onFilterChange(filter);
      }
      this.filter = filter;
      this.setState({
        filter: filter,
        accessibility: accessibility
      }, function () {
        _this3.getDataFromGuppy(_this3.state.rawDataFields, undefined, true);
      });
    }

    /**
     * Fetch data from Guppy server.
     * This function will update this.state.rawData and this.state.totalCount
     */ }, { key: "handleFetchAndUpdateRawData", value:
    function handleFetchAndUpdateRawData(_ref2) {var _ref2$offset = _ref2.offset,offset = _ref2$offset === void 0 ? 0 : _ref2$offset,_ref2$size = _ref2.size,size = _ref2$size === void 0 ? 20 : _ref2$size,_ref2$sort = _ref2.sort,sort = _ref2$sort === void 0 ? [] : _ref2$sort;
      return this.getDataFromGuppy(this.state.rawDataFields, sort, true, offset, size);
    }

    /**
     * Download all data from Guppy server and return raw data
     * This function uses current filter argument
     */ }, { key: "handleDownloadRawData", value:
    function handleDownloadRawData(_ref3) {var sort = _ref3.sort,format = _ref3.format;
      // error handling for misconfigured format types
      if (format && !(format.toUpperCase() in _const.FILE_FORMATS)) {
        // eslint-disable-next-line no-console
        console.error("Invalid value ".concat(format, " found for arg format!"));
      }
      return (0, _queries.downloadDataFromGuppy)(
        this.props.guppyConfig.path,
        this.props.guppyConfig.type,
        this.state.totalCount,
        {
          fields: this.state.rawDataFields,
          sort: sort || [],
          filter: this.state.filter,
          accessibility: this.state.accessibility,
          format: format
        },
        this.props.csrfToken
      );
    }

    /**
     * Download all data from Guppy server and return raw data
     * For only given fields
     * This function uses current filter argument
     */ }, { key: "handleDownloadRawDataByFields", value:
    function handleDownloadRawDataByFields(_ref4) {var fields = _ref4.fields,_ref4$sort = _ref4.sort,sort = _ref4$sort === void 0 ? [] : _ref4$sort;
      var targetFields = fields;
      if (typeof fields === 'undefined') {
        targetFields = this.state.rawDataFields;
      }
      return (0, _queries.downloadDataFromGuppy)(
        this.props.guppyConfig.path,
        this.props.guppyConfig.type,
        this.state.totalCount,
        {
          fields: targetFields,
          sort: sort,
          filter: this.state.filter,
          accessibility: this.state.accessibility
        },
        this.props.csrfToken
      );
    }

    /**
     * Get total count from other es type, with filter
     * @param {string} type
     * @param {object} filter
     */ }, { key: "handleAskGuppyForTotalCounts", value:
    function handleAskGuppyForTotalCounts(type, filter) {
      return (0, _queries.askGuppyForTotalCounts)(
        this.props.guppyConfig.path,
        type,
        filter,
        this.state.accessibility,
        this.props.csrfToken
      );
    }

    /**
     * Get raw data from other es type, with filter
     * @param {string} type
     * @param {object} filter
     * @param {string[]} fields
     */ }, { key: "handleDownloadRawDataByTypeAndFilter", value:
    function handleDownloadRawDataByTypeAndFilter(type, filter, fields) {var _this4 = this;
      return (0, _queries.askGuppyForTotalCounts)(
        this.props.guppyConfig.path,
        type,
        filter,
        this.state.accessibility,
        this.props.csrfToken
      ).
      then(function (count) {return (0, _queries.downloadDataFromGuppy)(
          _this4.props.guppyConfig.path,
          type,
          count,
          {
            fields: fields,
            filter: filter
          },
          _this4.props.csrfToken
        );});
    } }, { key: "handleAccessLevelUpdate", value:

    function handleAccessLevelUpdate(accessLevel) {
      this.setState({ accessibility: accessLevel });
    }

    /**
     * This function get data with current filter (if any),
     * and update this.state.rawData and this.state.totalCount
     * @param {string[]} fields
     * @param {object} sort
     * @param {bool} updateDataWhenReceive
     * @param {number} offset
     * @param {number} size
     */ }, { key: "getDataFromGuppy", value:
    function getDataFromGuppy(fields, sort, updateDataWhenReceive, offset, size) {var _this5 = this;
      this.setState({ gettingDataFromGuppy: true });
      if (!fields || fields.length === 0) {
        this.setState({ gettingDataFromGuppy: false });
        return Promise.resolve({ data: [], totalCount: 0 });
      }

      // sub aggregations -- for DAT
      if (this.props.guppyConfig.mainField) {
        var numericAggregation = this.props.guppyConfig.mainFieldIsNumeric;
        return (0, _queries.askGuppyForSubAggregationData)(
          this.props.guppyConfig.path,
          this.props.guppyConfig.type,
          this.props.guppyConfig.mainField,
          numericAggregation,
          this.props.guppyConfig.aggFields,
          [],
          this.filter,
          this.state.accessibility,
          this.props.csrfToken
        ).then(function (res) {
          if (!res || !res.data) {
            throw new Error("Error getting raw ".concat(_this5.props.guppyConfig.type, " data from Guppy server ").concat(_this5.props.guppyConfig.path, "."));
          }
          var data = res.data._aggregation[_this5.props.guppyConfig.type];
          var field = numericAggregation ? 'asTextHistogram' : 'histogram';
          var parsedData = data[_this5.props.guppyConfig.mainField][field];
          if (updateDataWhenReceive) {
            _this5.setState({
              rawData: parsedData
            });
          }
          _this5.setState({ gettingDataFromGuppy: false });
          return {
            data: res.data
          };
        });
      }

      // non-nested aggregation
      return (0, _queries.askGuppyForRawData)(
        this.props.guppyConfig.path,
        this.props.guppyConfig.type,
        fields,
        this.filter,
        sort,
        undefined,
        offset,
        size,
        this.state.accessibility,
        this.props.csrfToken
      ).then(function (res) {
        if (!res || !res.data) {
          throw new Error("Error getting raw ".concat(_this5.props.guppyConfig.type, " data from Guppy server ").concat(_this5.props.guppyConfig.path, "."));
        }
        var parsedData = res.data[_this5.props.guppyConfig.type];
        var totalCount = res.data._aggregation[_this5.props.guppyConfig.type]._totalCount;
        if (updateDataWhenReceive) {
          _this5.setState({
            rawData: parsedData,
            totalCount: totalCount
          });
        }
        _this5.setState({ gettingDataFromGuppy: false });
        return {
          data: parsedData,
          totalCount: totalCount
        };
      });
    } }, { key: "render", value:

    function render() {var _this6 = this;
      return (/*#__PURE__*/
        _react["default"].createElement(_react["default"].Fragment, null,

        _react["default"].Children.map(this.props.children, function (child) {return /*#__PURE__*/_react["default"].cloneElement(child, {
            // pass data to children
            aggsData: _this6.state.aggsData,
            aggsDataIsLoading: _this6.state.gettingDataFromGuppy,
            filter: _this6.state.filter,
            filterConfig: _this6.props.filterConfig,
            rawData: _this6.state.rawData, // raw data (with current filter applied)
            totalCount: _this6.state.totalCount, // total count of raw data (current filter applied)
            fetchAndUpdateRawData: _this6.handleFetchAndUpdateRawData.bind(_this6),
            downloadRawData: _this6.handleDownloadRawData.bind(_this6),
            downloadRawDataByFields: _this6.handleDownloadRawDataByFields.bind(_this6),
            allRegularAggFields: _this6.state.allRegularAggFields,
            allAsTextAggFields: _this6.state.allAsTextAggFields,
            accessibleFieldObject: _this6.state.accessibleFieldObject,
            unaccessibleFieldObject: _this6.state.unaccessibleFieldObject,

            // a callback function which return total counts for any type, with any filter
            getTotalCountsByTypeAndFilter: _this6.handleAskGuppyForTotalCounts.bind(_this6),
            downloadRawDataByTypeAndFilter: _this6.handleDownloadRawDataByTypeAndFilter.bind(_this6),

            // below are just for ConnectedFilter component
            onReceiveNewAggsData: _this6.handleReceiveNewAggsData.bind(_this6),
            onFilterChange: _this6.handleFilterChange.bind(_this6),
            guppyConfig: _this6.props.guppyConfig,
            onUpdateAccessLevel: _this6.handleAccessLevelUpdate.bind(_this6),
            adminAppliedPreFilters: _this6.props.adminAppliedPreFilters,
            accessibleFieldCheckList: _this6.props.accessibleFieldCheckList,
            csrfToken: _this6.props.csrfToken
          });})

        ));

    } }]);}(_react["default"].Component);


GuppyWrapper.propTypes = {
  guppyConfig: _propTypes["default"].shape({
    path: _propTypes["default"].string,
    type: _propTypes["default"].string,
    mainField: _propTypes["default"].string,
    mainFieldIsNumeric: _propTypes["default"].bool,
    aggFields: _propTypes["default"].array
  }).isRequired,
  children: _propTypes["default"].oneOfType([
  _propTypes["default"].arrayOf(_propTypes["default"].node),
  _propTypes["default"].node]
  ).isRequired,
  filterConfig: _propTypes["default"].shape({
    tabs: _propTypes["default"].arrayOf(_propTypes["default"].shape({
      title: _propTypes["default"].string,
      fields: _propTypes["default"].arrayOf(_propTypes["default"].string),
      searchFields: _propTypes["default"].arrayOf(_propTypes["default"].string)
    }))
  }).isRequired,
  rawDataFields: _propTypes["default"].arrayOf(_propTypes["default"].string),
  onReceiveNewAggsData: _propTypes["default"].func,
  onFilterChange: _propTypes["default"].func,
  accessibleFieldCheckList: _propTypes["default"].arrayOf(_propTypes["default"].string),
  adminAppliedPreFilters: _propTypes["default"].object,
  initialFilterFromURL: _propTypes["default"].object,
  csrfToken: _propTypes["default"].string
};

GuppyWrapper.defaultProps = {
  onReceiveNewAggsData: function onReceiveNewAggsData() {},
  onFilterChange: function onFilterChange() {},
  rawDataFields: [],
  accessibleFieldCheckList: undefined,
  adminAppliedPreFilters: {},
  initialFilterFromURL: {},
  csrfToken: ''
};var _default = exports["default"] =

GuppyWrapper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9wcm9wVHlwZXMiLCJfcXVlcmllcyIsIl9jb25zdCIsIl9maWx0ZXJzIiwiZSIsIl9fZXNNb2R1bGUiLCJvd25LZXlzIiwiciIsInQiLCJPYmplY3QiLCJrZXlzIiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwibyIsImZpbHRlciIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImVudW1lcmFibGUiLCJwdXNoIiwiYXBwbHkiLCJfb2JqZWN0U3ByZWFkIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiZm9yRWFjaCIsIl9kZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvcnMiLCJkZWZpbmVQcm9wZXJ0aWVzIiwiZGVmaW5lUHJvcGVydHkiLCJfdG9Qcm9wZXJ0eUtleSIsInZhbHVlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJfY2xhc3NDYWxsQ2hlY2siLCJhIiwibiIsIlR5cGVFcnJvciIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwia2V5IiwiX2NyZWF0ZUNsYXNzIiwicHJvdG90eXBlIiwiaSIsIl90b1ByaW1pdGl2ZSIsIl90eXBlb2YiLCJTeW1ib2wiLCJ0b1ByaW1pdGl2ZSIsImNhbGwiLCJTdHJpbmciLCJOdW1iZXIiLCJfY2FsbFN1cGVyIiwiX2dldFByb3RvdHlwZU9mIiwiX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iLCJfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0IiwiUmVmbGVjdCIsImNvbnN0cnVjdCIsImNvbnN0cnVjdG9yIiwiX2Fzc2VydFRoaXNJbml0aWFsaXplZCIsIlJlZmVyZW5jZUVycm9yIiwiQm9vbGVhbiIsInZhbHVlT2YiLCJzZXRQcm90b3R5cGVPZiIsImdldFByb3RvdHlwZU9mIiwiYmluZCIsIl9fcHJvdG9fXyIsIl9pbmhlcml0cyIsImNyZWF0ZSIsIl9zZXRQcm90b3R5cGVPZiIsIkd1cHB5V3JhcHBlciIsIl9SZWFjdCRDb21wb25lbnQiLCJwcm9wcyIsIl90aGlzIiwiaW5pdGlhbEZpbHRlciIsImFkbWluQXBwbGllZFByZUZpbHRlcnMiLCJpbml0aWFsRmlsdGVyRnJvbVVSTCIsIm1lcmdlRmlsdGVycyIsImFkbWluUHJlRmlsdGVyc0Zyb3plbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJzbGljZSIsInN0YXRlIiwiZ2V0dGluZ0RhdGFGcm9tR3VwcHkiLCJhZ2dzRGF0YSIsInJhd0RhdGEiLCJ0b3RhbENvdW50IiwiYWxsUmVndWxhckFnZ0ZpZWxkcyIsImFsbEFzVGV4dEFnZ0ZpZWxkcyIsInJhd0RhdGFGaWVsZHMiLCJhY2Nlc3NpYmxlRmllbGRPYmplY3QiLCJ1bmRlZmluZWQiLCJ1bmFjY2Vzc2libGVGaWVsZE9iamVjdCIsImFjY2Vzc2liaWxpdHkiLCJFTlVNX0FDQ0VTU0lCSUxJVFkiLCJBTEwiLCJ1c2VyRmlsdGVyRnJvbVVSTCIsImNvbXBvbmVudERpZE1vdW50IiwiX3RoaXMyIiwiZ2V0QWxsRmllbGRzRnJvbUd1cHB5IiwiZ3VwcHlDb25maWciLCJwYXRoIiwidHlwZSIsImNzcmZUb2tlbiIsInRoZW4iLCJmaWVsZHMiLCJzZXRTdGF0ZSIsImdldERhdGFGcm9tR3VwcHkiLCJhY2Nlc3NpYmxlRmllbGRDaGVja0xpc3QiLCJnZXRBY2Nlc3NpYmxlUmVzb3VyY2VzIiwiX3JlZiIsImhhbmRsZVJlY2VpdmVOZXdBZ2dzRGF0YSIsIm9uUmVjZWl2ZU5ld0FnZ3NEYXRhIiwiaGFuZGxlRmlsdGVyQ2hhbmdlIiwidXNlckZpbHRlckZyb21Vc2VySW5wdXQiLCJfdGhpczMiLCJ1c2VyRmlsdGVyIiwicGFyc2UiLCJvbkZpbHRlckNoYW5nZSIsImhhbmRsZUZldGNoQW5kVXBkYXRlUmF3RGF0YSIsIl9yZWYyIiwiX3JlZjIkb2Zmc2V0Iiwib2Zmc2V0IiwiX3JlZjIkc2l6ZSIsInNpemUiLCJfcmVmMiRzb3J0Iiwic29ydCIsImhhbmRsZURvd25sb2FkUmF3RGF0YSIsIl9yZWYzIiwiZm9ybWF0IiwidG9VcHBlckNhc2UiLCJGSUxFX0ZPUk1BVFMiLCJjb25zb2xlIiwiZXJyb3IiLCJjb25jYXQiLCJkb3dubG9hZERhdGFGcm9tR3VwcHkiLCJoYW5kbGVEb3dubG9hZFJhd0RhdGFCeUZpZWxkcyIsIl9yZWY0IiwiX3JlZjQkc29ydCIsInRhcmdldEZpZWxkcyIsImhhbmRsZUFza0d1cHB5Rm9yVG90YWxDb3VudHMiLCJhc2tHdXBweUZvclRvdGFsQ291bnRzIiwiaGFuZGxlRG93bmxvYWRSYXdEYXRhQnlUeXBlQW5kRmlsdGVyIiwiX3RoaXM0IiwiY291bnQiLCJoYW5kbGVBY2Nlc3NMZXZlbFVwZGF0ZSIsImFjY2Vzc0xldmVsIiwidXBkYXRlRGF0YVdoZW5SZWNlaXZlIiwiX3RoaXM1IiwiUHJvbWlzZSIsInJlc29sdmUiLCJkYXRhIiwibWFpbkZpZWxkIiwibnVtZXJpY0FnZ3JlZ2F0aW9uIiwibWFpbkZpZWxkSXNOdW1lcmljIiwiYXNrR3VwcHlGb3JTdWJBZ2dyZWdhdGlvbkRhdGEiLCJhZ2dGaWVsZHMiLCJyZXMiLCJFcnJvciIsIl9hZ2dyZWdhdGlvbiIsImZpZWxkIiwicGFyc2VkRGF0YSIsImFza0d1cHB5Rm9yUmF3RGF0YSIsIl90b3RhbENvdW50IiwicmVuZGVyIiwiX3RoaXM2IiwiY3JlYXRlRWxlbWVudCIsIkZyYWdtZW50IiwiUmVhY3QiLCJDaGlsZHJlbiIsIm1hcCIsImNoaWxkcmVuIiwiY2hpbGQiLCJjbG9uZUVsZW1lbnQiLCJhZ2dzRGF0YUlzTG9hZGluZyIsImZpbHRlckNvbmZpZyIsImZldGNoQW5kVXBkYXRlUmF3RGF0YSIsImRvd25sb2FkUmF3RGF0YSIsImRvd25sb2FkUmF3RGF0YUJ5RmllbGRzIiwiZ2V0VG90YWxDb3VudHNCeVR5cGVBbmRGaWx0ZXIiLCJkb3dubG9hZFJhd0RhdGFCeVR5cGVBbmRGaWx0ZXIiLCJvblVwZGF0ZUFjY2Vzc0xldmVsIiwiQ29tcG9uZW50IiwicHJvcFR5cGVzIiwiUHJvcFR5cGVzIiwic2hhcGUiLCJzdHJpbmciLCJib29sIiwiYXJyYXkiLCJpc1JlcXVpcmVkIiwib25lT2ZUeXBlIiwiYXJyYXlPZiIsIm5vZGUiLCJ0YWJzIiwidGl0bGUiLCJzZWFyY2hGaWVsZHMiLCJmdW5jIiwib2JqZWN0IiwiZGVmYXVsdFByb3BzIiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvR3VwcHlXcmFwcGVyL2luZGV4LmpzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC9qc3gtZnJhZ21lbnRzICovXG4vKiBlc2xpbnQgcmVhY3QvZm9yYmlkLXByb3AtdHlwZXM6IDAgKi9cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHtcbiAgYXNrR3VwcHlGb3JSYXdEYXRhLFxuICBkb3dubG9hZERhdGFGcm9tR3VwcHksXG4gIGFza0d1cHB5Rm9yVG90YWxDb3VudHMsXG4gIGdldEFsbEZpZWxkc0Zyb21HdXBweSxcbiAgZ2V0QWNjZXNzaWJsZVJlc291cmNlcyxcbiAgYXNrR3VwcHlGb3JTdWJBZ2dyZWdhdGlvbkRhdGEsXG59IGZyb20gJy4uL1V0aWxzL3F1ZXJpZXMnO1xuaW1wb3J0IHsgRU5VTV9BQ0NFU1NJQklMSVRZLCBGSUxFX0ZPUk1BVFMgfSBmcm9tICcuLi9VdGlscy9jb25zdCc7XG5pbXBvcnQgeyBtZXJnZUZpbHRlcnMgfSBmcm9tICcuLi9VdGlscy9maWx0ZXJzJztcblxuLyoqXG4gKiBXcmFwcGVyIHRoYXQgY29ubmVjdHMgdG8gR3VwcHkgc2VydmVyLFxuICogYW5kIHBhc3MgZmlsdGVyLCBhZ2dzLCBhbmQgZGF0YSB0byBjaGlsZHJlbiBjb21wb25lbnRzXG4gKiBJbnB1dCBwcm9wczpcbiAqICAgLSBmaWx0ZXJDb25maWc6IGNvbmZpZ3VyYXRpb24gZm9yIENvbm5lY3RlZEZpbHRlciBjb21wb25lbnRcbiAqICAgLSBndXBweUNvbmZpZzogR3VwcHkgc2VydmVyIGNvbmZpZ1xuICogICAtIG9uRmlsdGVyQ2hhbmdlOiBjYWxsYmFjayB0aGF0IHRha2VzIGZpbHRlciBhcyBhcmd1bWVudCwgd2lsbCBiZVxuICogY2FsbGVkIGV2ZXJ5IHRpbWUgZmlsdGVyIGNoYW5nZXNcbiAqICAgLSBvblJlY2VpdmVOZXdBZ2dzRGF0YTogY2FsbGJhY2sgdGhhdCB0YWtlcyBhZ2dyZWdhdGlvbiByZXN1bHRzXG4gKiBhcyBhcmd1bWVudCwgd2lsbCBiZSBjYWxsZWQgZXZlcnkgdGltZSBhZ2dyZWdhdGlvbiByZXN1bHRzIHVwZGF0ZWRcbiAqXG4gKiBUaGlzIHdyYXBwZXIgd2lsbCBwYXNzIGZvbGxvd2luZyBkYXRhIChmaWx0ZXJzLCBhZ2dzLCBjb25maWdzKSB0byBjaGlsZHJlbiBjb21wb25lbnRzIHZpYSBwcm9wOlxuICogICAtIGFnZ3NEYXRhOiB0aGUgYWdncmVnYXRpb24gcmVzdWx0cywgZm9ybWF0OlxuICogICAgICAgICB7XG4gKiAgICAgICAgICAgICAvLyBmb3IgdGV4dCBhZ2dyZWdhdGlvblxuICogICAgICAgICAgICBbZmllbGRdOiB7IGhpc3RvZ3JhbTogW3trZXk6ICd2MScsIGNvdW50OiA0Mn0sIHtrZXk6ICd2MicsIGNvdW50OiAxOX0sIC4uLl0gfSxcbiAqICAgICAgICAgICAgIC8vIGZvciBudW1lcmljIGFnZ3JlZ2F0aW9uXG4gKiAgICAgICAgICAgIFtmaWVsZF06IHsgaGlzdG9ncmFtOiBbe2tleTogWzEsIDgzXSwgY291bnQ6IDEwMH1dIH0sXG4gKiAgICAgICAgICAgIC4uLlxuICogICAgICAgICB9XG4gKiAgIC0gZmlsdGVyOiB0aGUgZmlsdGVycywgZm9ybWF0OlxuICogICAgICAgICB7XG4gKiAgICAgICAgICAgIFtmaWVsZF06IHsgc2VsZWN0ZWRWYWx1ZXM6IFsndjEnLCAndjInLCAuLi5dIH0sICAvLyBmb3IgdGV4dCBmaWx0ZXJcbiAqICAgICAgICAgICAgW2ZpZWxkXTogeyB1cHBlckJvdW5kOiAxLCBsb3dlckJvdW5kOiA4MyB9LCAgLy8gZm9yIHJhbmdlIGZpbHRlclxuICogICAgICAgICAgICAuLi5cbiAqICAgICAgICAgfVxuICogICAtIGZpbHRlckNvbmZpZzogY29uZmlndXJhdGlvbiBmb3IgQ29ubmVjdGVkRmlsdGVyIGNvbXBvbmVudFxuICogICAtIHJhd0RhdGE6IHJhdyBkYXRhIHJlY29yZHMgZmlsdGVyZWQgKHdpdGggb2Zmc2V0LCBzaXplLCBhbmQgc29ydCBhcHBsaWVkKVxuICogICAtIHRvdGFsQ291bnQ6IHRvdGFsIGNvdW50IG9mIHJhdyBkYXRhIHJlY29yZHNcbiAqXG4gKi9cbmNsYXNzIEd1cHB5V3JhcHBlciBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIGxldCBpbml0aWFsRmlsdGVyID0gdGhpcy5wcm9wcy5hZG1pbkFwcGxpZWRQcmVGaWx0ZXJzO1xuICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLnByb3BzLmluaXRpYWxGaWx0ZXJGcm9tVVJMKS5sZW5ndGggPiAwKSB7XG4gICAgICBpbml0aWFsRmlsdGVyID0gbWVyZ2VGaWx0ZXJzKFxuICAgICAgICB0aGlzLnByb3BzLmluaXRpYWxGaWx0ZXJGcm9tVVJMLFxuICAgICAgICB0aGlzLnByb3BzLmFkbWluQXBwbGllZFByZUZpbHRlcnMsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIHRvIGF2b2lkIGFzeW5jaHJvbml6YXRpb25zLCB3ZSBzdG9yZSBhbm90aGVyIGZpbHRlciBhcyBwcml2YXRlIHZhclxuICAgIHRoaXMuZmlsdGVyID0geyAuLi5pbml0aWFsRmlsdGVyIH07XG4gICAgdGhpcy5hZG1pblByZUZpbHRlcnNGcm96ZW4gPSBKU09OLnN0cmluZ2lmeSh0aGlzLnByb3BzLmFkbWluQXBwbGllZFByZUZpbHRlcnMpLnNsaWNlKCk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGdldHRpbmdEYXRhRnJvbUd1cHB5OiBmYWxzZSxcbiAgICAgIGFnZ3NEYXRhOiB7fSxcbiAgICAgIGZpbHRlcjogeyAuLi5pbml0aWFsRmlsdGVyIH0sXG4gICAgICByYXdEYXRhOiBbXSxcbiAgICAgIHRvdGFsQ291bnQ6IDAsXG4gICAgICBhbGxSZWd1bGFyQWdnRmllbGRzOiBbXSxcbiAgICAgIGFsbEFzVGV4dEFnZ0ZpZWxkczogW10sXG4gICAgICByYXdEYXRhRmllbGRzOiBbXSxcbiAgICAgIGFjY2Vzc2libGVGaWVsZE9iamVjdDogdW5kZWZpbmVkLFxuICAgICAgdW5hY2Nlc3NpYmxlRmllbGRPYmplY3Q6IHVuZGVmaW5lZCxcbiAgICAgIGFjY2Vzc2liaWxpdHk6IEVOVU1fQUNDRVNTSUJJTElUWS5BTEwsXG4gICAgICBhZG1pbkFwcGxpZWRQcmVGaWx0ZXJzOiB7IC4uLnRoaXMucHJvcHMuYWRtaW5BcHBsaWVkUHJlRmlsdGVycyB9LFxuICAgICAgdXNlckZpbHRlckZyb21VUkw6IHsgLi4udGhpcy5wcm9wcy5pbml0aWFsRmlsdGVyRnJvbVVSTCB9LFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBnZXRBbGxGaWVsZHNGcm9tR3VwcHkoXG4gICAgICB0aGlzLnByb3BzLmd1cHB5Q29uZmlnLnBhdGgsXG4gICAgICB0aGlzLnByb3BzLmd1cHB5Q29uZmlnLnR5cGUsXG4gICAgICB0aGlzLnByb3BzLmNzcmZUb2tlbixcbiAgICApLnRoZW4oKGZpZWxkcykgPT4ge1xuICAgICAgY29uc3QgcmF3RGF0YUZpZWxkcyA9ICh0aGlzLnByb3BzLnJhd0RhdGFGaWVsZHMgJiYgdGhpcy5wcm9wcy5yYXdEYXRhRmllbGRzLmxlbmd0aCA+IDApXG4gICAgICAgID8gdGhpcy5wcm9wcy5yYXdEYXRhRmllbGRzIDogZmllbGRzO1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGFsbFJlZ3VsYXJBZ2dGaWVsZHM6IGZpZWxkcyxcbiAgICAgICAgcmF3RGF0YUZpZWxkcyxcbiAgICAgIH0sICgpID0+IHtcbiAgICAgICAgdGhpcy5nZXREYXRhRnJvbUd1cHB5KHRoaXMuc3RhdGUucmF3RGF0YUZpZWxkcywgdW5kZWZpbmVkLCB0cnVlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIGlmICh0eXBlb2YgdGhpcy5wcm9wcy5hY2Nlc3NpYmxlRmllbGRDaGVja0xpc3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBnZXRBY2Nlc3NpYmxlUmVzb3VyY2VzKFxuICAgICAgICB0aGlzLnByb3BzLmd1cHB5Q29uZmlnLnBhdGgsXG4gICAgICAgIHRoaXMucHJvcHMuZ3VwcHlDb25maWcudHlwZSxcbiAgICAgICAgdGhpcy5wcm9wcy5hY2Nlc3NpYmxlRmllbGRDaGVja0xpc3QsXG4gICAgICAgIHRoaXMucHJvcHMuY3NyZlRva2VuLFxuICAgICAgKS50aGVuKCh7IGFjY2Vzc2libGVGaWVsZE9iamVjdCwgdW5hY2Nlc3NpYmxlRmllbGRPYmplY3QgfSkgPT4ge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBhY2Nlc3NpYmxlRmllbGRPYmplY3QsXG4gICAgICAgICAgdW5hY2Nlc3NpYmxlRmllbGRPYmplY3QsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlUmVjZWl2ZU5ld0FnZ3NEYXRhKGFnZ3NEYXRhKSB7XG4gICAgaWYgKHRoaXMucHJvcHMub25SZWNlaXZlTmV3QWdnc0RhdGEpIHtcbiAgICAgIHRoaXMucHJvcHMub25SZWNlaXZlTmV3QWdnc0RhdGEoYWdnc0RhdGEsIHRoaXMuZmlsdGVyKTtcbiAgICB9XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGFnZ3NEYXRhIH0pO1xuICB9XG5cbiAgaGFuZGxlRmlsdGVyQ2hhbmdlKHVzZXJGaWx0ZXJGcm9tVXNlcklucHV0LCBhY2Nlc3NpYmlsaXR5KSB7XG4gICAgbGV0IHVzZXJGaWx0ZXIgPSB1c2VyRmlsdGVyRnJvbVVzZXJJbnB1dDtcblxuICAgIC8vIEFwcGx5IHVzZXIgZmlsdGVycyBmcm9tIFVSTCBvbiBwYWdlIGxvYWQuIEVtcHR5IG91dCBzdGF0ZSB0byBhdm9pZCByZWFwcGx5aW5nIHVzZWQgZmlsdGVycy5cbiAgICBpZiAoT2JqZWN0LmtleXModXNlckZpbHRlcikubGVuZ3RoID09PSAwXG4gICAgICAmJiBPYmplY3Qua2V5cyh0aGlzLnN0YXRlLnVzZXJGaWx0ZXJGcm9tVVJMKS5sZW5ndGggPiAwKSB7XG4gICAgICB1c2VyRmlsdGVyID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRlLnVzZXJGaWx0ZXJGcm9tVVJMKSk7XG4gICAgICB0aGlzLnNldFN0YXRlKHsgdXNlckZpbHRlckZyb21VUkw6IHt9IH0pO1xuICAgIH1cblxuICAgIHRoaXMuc2V0U3RhdGUoeyBhZG1pbkFwcGxpZWRQcmVGaWx0ZXJzOiBKU09OLnBhcnNlKHRoaXMuYWRtaW5QcmVGaWx0ZXJzRnJvemVuKSB9KTtcbiAgICBsZXQgZmlsdGVyID0geyAuLi51c2VyRmlsdGVyIH07XG4gICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuc3RhdGUuYWRtaW5BcHBsaWVkUHJlRmlsdGVycykubGVuZ3RoID4gMCkge1xuICAgICAgZmlsdGVyID0gbWVyZ2VGaWx0ZXJzKHVzZXJGaWx0ZXIsIHRoaXMuc3RhdGUuYWRtaW5BcHBsaWVkUHJlRmlsdGVycyk7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLm9uRmlsdGVyQ2hhbmdlKSB7XG4gICAgICB0aGlzLnByb3BzLm9uRmlsdGVyQ2hhbmdlKGZpbHRlcik7XG4gICAgfVxuICAgIHRoaXMuZmlsdGVyID0gZmlsdGVyO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgZmlsdGVyLFxuICAgICAgYWNjZXNzaWJpbGl0eSxcbiAgICB9LCAoKSA9PiB7XG4gICAgICB0aGlzLmdldERhdGFGcm9tR3VwcHkodGhpcy5zdGF0ZS5yYXdEYXRhRmllbGRzLCB1bmRlZmluZWQsIHRydWUpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGRhdGEgZnJvbSBHdXBweSBzZXJ2ZXIuXG4gICAqIFRoaXMgZnVuY3Rpb24gd2lsbCB1cGRhdGUgdGhpcy5zdGF0ZS5yYXdEYXRhIGFuZCB0aGlzLnN0YXRlLnRvdGFsQ291bnRcbiAgICovXG4gIGhhbmRsZUZldGNoQW5kVXBkYXRlUmF3RGF0YSh7IG9mZnNldCA9IDAsIHNpemUgPSAyMCwgc29ydCA9IFtdIH0pIHtcbiAgICByZXR1cm4gdGhpcy5nZXREYXRhRnJvbUd1cHB5KHRoaXMuc3RhdGUucmF3RGF0YUZpZWxkcywgc29ydCwgdHJ1ZSwgb2Zmc2V0LCBzaXplKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEb3dubG9hZCBhbGwgZGF0YSBmcm9tIEd1cHB5IHNlcnZlciBhbmQgcmV0dXJuIHJhdyBkYXRhXG4gICAqIFRoaXMgZnVuY3Rpb24gdXNlcyBjdXJyZW50IGZpbHRlciBhcmd1bWVudFxuICAgKi9cbiAgaGFuZGxlRG93bmxvYWRSYXdEYXRhKHsgc29ydCwgZm9ybWF0IH0pIHtcbiAgICAvLyBlcnJvciBoYW5kbGluZyBmb3IgbWlzY29uZmlndXJlZCBmb3JtYXQgdHlwZXNcbiAgICBpZiAoZm9ybWF0ICYmICEoZm9ybWF0LnRvVXBwZXJDYXNlKCkgaW4gRklMRV9GT1JNQVRTKSkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEludmFsaWQgdmFsdWUgJHtmb3JtYXR9IGZvdW5kIGZvciBhcmcgZm9ybWF0IWApO1xuICAgIH1cbiAgICByZXR1cm4gZG93bmxvYWREYXRhRnJvbUd1cHB5KFxuICAgICAgdGhpcy5wcm9wcy5ndXBweUNvbmZpZy5wYXRoLFxuICAgICAgdGhpcy5wcm9wcy5ndXBweUNvbmZpZy50eXBlLFxuICAgICAgdGhpcy5zdGF0ZS50b3RhbENvdW50LFxuICAgICAge1xuICAgICAgICBmaWVsZHM6IHRoaXMuc3RhdGUucmF3RGF0YUZpZWxkcyxcbiAgICAgICAgc29ydDogc29ydCB8fCBbXSxcbiAgICAgICAgZmlsdGVyOiB0aGlzLnN0YXRlLmZpbHRlcixcbiAgICAgICAgYWNjZXNzaWJpbGl0eTogdGhpcy5zdGF0ZS5hY2Nlc3NpYmlsaXR5LFxuICAgICAgICBmb3JtYXQsXG4gICAgICB9LFxuICAgICAgdGhpcy5wcm9wcy5jc3JmVG9rZW4sXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEb3dubG9hZCBhbGwgZGF0YSBmcm9tIEd1cHB5IHNlcnZlciBhbmQgcmV0dXJuIHJhdyBkYXRhXG4gICAqIEZvciBvbmx5IGdpdmVuIGZpZWxkc1xuICAgKiBUaGlzIGZ1bmN0aW9uIHVzZXMgY3VycmVudCBmaWx0ZXIgYXJndW1lbnRcbiAgICovXG4gIGhhbmRsZURvd25sb2FkUmF3RGF0YUJ5RmllbGRzKHsgZmllbGRzLCBzb3J0ID0gW10gfSkge1xuICAgIGxldCB0YXJnZXRGaWVsZHMgPSBmaWVsZHM7XG4gICAgaWYgKHR5cGVvZiBmaWVsZHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0YXJnZXRGaWVsZHMgPSB0aGlzLnN0YXRlLnJhd0RhdGFGaWVsZHM7XG4gICAgfVxuICAgIHJldHVybiBkb3dubG9hZERhdGFGcm9tR3VwcHkoXG4gICAgICB0aGlzLnByb3BzLmd1cHB5Q29uZmlnLnBhdGgsXG4gICAgICB0aGlzLnByb3BzLmd1cHB5Q29uZmlnLnR5cGUsXG4gICAgICB0aGlzLnN0YXRlLnRvdGFsQ291bnQsXG4gICAgICB7XG4gICAgICAgIGZpZWxkczogdGFyZ2V0RmllbGRzLFxuICAgICAgICBzb3J0LFxuICAgICAgICBmaWx0ZXI6IHRoaXMuc3RhdGUuZmlsdGVyLFxuICAgICAgICBhY2Nlc3NpYmlsaXR5OiB0aGlzLnN0YXRlLmFjY2Vzc2liaWxpdHksXG4gICAgICB9LFxuICAgICAgdGhpcy5wcm9wcy5jc3JmVG9rZW4sXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdG90YWwgY291bnQgZnJvbSBvdGhlciBlcyB0eXBlLCB3aXRoIGZpbHRlclxuICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZVxuICAgKiBAcGFyYW0ge29iamVjdH0gZmlsdGVyXG4gICAqL1xuICBoYW5kbGVBc2tHdXBweUZvclRvdGFsQ291bnRzKHR5cGUsIGZpbHRlcikge1xuICAgIHJldHVybiBhc2tHdXBweUZvclRvdGFsQ291bnRzKFxuICAgICAgdGhpcy5wcm9wcy5ndXBweUNvbmZpZy5wYXRoLFxuICAgICAgdHlwZSxcbiAgICAgIGZpbHRlcixcbiAgICAgIHRoaXMuc3RhdGUuYWNjZXNzaWJpbGl0eSxcbiAgICAgIHRoaXMucHJvcHMuY3NyZlRva2VuLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHJhdyBkYXRhIGZyb20gb3RoZXIgZXMgdHlwZSwgd2l0aCBmaWx0ZXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAgICogQHBhcmFtIHtvYmplY3R9IGZpbHRlclxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBmaWVsZHNcbiAgICovXG4gIGhhbmRsZURvd25sb2FkUmF3RGF0YUJ5VHlwZUFuZEZpbHRlcih0eXBlLCBmaWx0ZXIsIGZpZWxkcykge1xuICAgIHJldHVybiBhc2tHdXBweUZvclRvdGFsQ291bnRzKFxuICAgICAgdGhpcy5wcm9wcy5ndXBweUNvbmZpZy5wYXRoLFxuICAgICAgdHlwZSxcbiAgICAgIGZpbHRlcixcbiAgICAgIHRoaXMuc3RhdGUuYWNjZXNzaWJpbGl0eSxcbiAgICAgIHRoaXMucHJvcHMuY3NyZlRva2VuLFxuICAgIClcbiAgICAgIC50aGVuKChjb3VudCkgPT4gZG93bmxvYWREYXRhRnJvbUd1cHB5KFxuICAgICAgICB0aGlzLnByb3BzLmd1cHB5Q29uZmlnLnBhdGgsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIGNvdW50LFxuICAgICAgICB7XG4gICAgICAgICAgZmllbGRzLFxuICAgICAgICAgIGZpbHRlcixcbiAgICAgICAgfSxcbiAgICAgICAgdGhpcy5wcm9wcy5jc3JmVG9rZW4sXG4gICAgICApKTtcbiAgfVxuXG4gIGhhbmRsZUFjY2Vzc0xldmVsVXBkYXRlKGFjY2Vzc0xldmVsKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGFjY2Vzc2liaWxpdHk6IGFjY2Vzc0xldmVsIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZnVuY3Rpb24gZ2V0IGRhdGEgd2l0aCBjdXJyZW50IGZpbHRlciAoaWYgYW55KSxcbiAgICogYW5kIHVwZGF0ZSB0aGlzLnN0YXRlLnJhd0RhdGEgYW5kIHRoaXMuc3RhdGUudG90YWxDb3VudFxuICAgKiBAcGFyYW0ge3N0cmluZ1tdfSBmaWVsZHNcbiAgICogQHBhcmFtIHtvYmplY3R9IHNvcnRcbiAgICogQHBhcmFtIHtib29sfSB1cGRhdGVEYXRhV2hlblJlY2VpdmVcbiAgICogQHBhcmFtIHtudW1iZXJ9IG9mZnNldFxuICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZVxuICAgKi9cbiAgZ2V0RGF0YUZyb21HdXBweShmaWVsZHMsIHNvcnQsIHVwZGF0ZURhdGFXaGVuUmVjZWl2ZSwgb2Zmc2V0LCBzaXplKSB7XG4gICAgdGhpcy5zZXRTdGF0ZSh7IGdldHRpbmdEYXRhRnJvbUd1cHB5OiB0cnVlIH0pO1xuICAgIGlmICghZmllbGRzIHx8IGZpZWxkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoeyBnZXR0aW5nRGF0YUZyb21HdXBweTogZmFsc2UgfSk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHsgZGF0YTogW10sIHRvdGFsQ291bnQ6IDAgfSk7XG4gICAgfVxuXG4gICAgLy8gc3ViIGFnZ3JlZ2F0aW9ucyAtLSBmb3IgREFUXG4gICAgaWYgKHRoaXMucHJvcHMuZ3VwcHlDb25maWcubWFpbkZpZWxkKSB7XG4gICAgICBjb25zdCBudW1lcmljQWdncmVnYXRpb24gPSB0aGlzLnByb3BzLmd1cHB5Q29uZmlnLm1haW5GaWVsZElzTnVtZXJpYztcbiAgICAgIHJldHVybiBhc2tHdXBweUZvclN1YkFnZ3JlZ2F0aW9uRGF0YShcbiAgICAgICAgdGhpcy5wcm9wcy5ndXBweUNvbmZpZy5wYXRoLFxuICAgICAgICB0aGlzLnByb3BzLmd1cHB5Q29uZmlnLnR5cGUsXG4gICAgICAgIHRoaXMucHJvcHMuZ3VwcHlDb25maWcubWFpbkZpZWxkLFxuICAgICAgICBudW1lcmljQWdncmVnYXRpb24sXG4gICAgICAgIHRoaXMucHJvcHMuZ3VwcHlDb25maWcuYWdnRmllbGRzLFxuICAgICAgICBbXSxcbiAgICAgICAgdGhpcy5maWx0ZXIsXG4gICAgICAgIHRoaXMuc3RhdGUuYWNjZXNzaWJpbGl0eSxcbiAgICAgICAgdGhpcy5wcm9wcy5jc3JmVG9rZW4sXG4gICAgICApLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBpZiAoIXJlcyB8fCAhcmVzLmRhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgcmF3ICR7dGhpcy5wcm9wcy5ndXBweUNvbmZpZy50eXBlfSBkYXRhIGZyb20gR3VwcHkgc2VydmVyICR7dGhpcy5wcm9wcy5ndXBweUNvbmZpZy5wYXRofS5gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkYXRhID0gcmVzLmRhdGEuX2FnZ3JlZ2F0aW9uW3RoaXMucHJvcHMuZ3VwcHlDb25maWcudHlwZV07XG4gICAgICAgIGNvbnN0IGZpZWxkID0gbnVtZXJpY0FnZ3JlZ2F0aW9uID8gJ2FzVGV4dEhpc3RvZ3JhbScgOiAnaGlzdG9ncmFtJztcbiAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IGRhdGFbdGhpcy5wcm9wcy5ndXBweUNvbmZpZy5tYWluRmllbGRdW2ZpZWxkXTtcbiAgICAgICAgaWYgKHVwZGF0ZURhdGFXaGVuUmVjZWl2ZSkge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgcmF3RGF0YTogcGFyc2VkRGF0YSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0YXRlKHsgZ2V0dGluZ0RhdGFGcm9tR3VwcHk6IGZhbHNlIH0pO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGRhdGE6IHJlcy5kYXRhLFxuICAgICAgICB9O1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gbm9uLW5lc3RlZCBhZ2dyZWdhdGlvblxuICAgIHJldHVybiBhc2tHdXBweUZvclJhd0RhdGEoXG4gICAgICB0aGlzLnByb3BzLmd1cHB5Q29uZmlnLnBhdGgsXG4gICAgICB0aGlzLnByb3BzLmd1cHB5Q29uZmlnLnR5cGUsXG4gICAgICBmaWVsZHMsXG4gICAgICB0aGlzLmZpbHRlcixcbiAgICAgIHNvcnQsXG4gICAgICB1bmRlZmluZWQsXG4gICAgICBvZmZzZXQsXG4gICAgICBzaXplLFxuICAgICAgdGhpcy5zdGF0ZS5hY2Nlc3NpYmlsaXR5LFxuICAgICAgdGhpcy5wcm9wcy5jc3JmVG9rZW4sXG4gICAgKS50aGVuKChyZXMpID0+IHtcbiAgICAgIGlmICghcmVzIHx8ICFyZXMuZGF0YSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEVycm9yIGdldHRpbmcgcmF3ICR7dGhpcy5wcm9wcy5ndXBweUNvbmZpZy50eXBlfSBkYXRhIGZyb20gR3VwcHkgc2VydmVyICR7dGhpcy5wcm9wcy5ndXBweUNvbmZpZy5wYXRofS5gKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSByZXMuZGF0YVt0aGlzLnByb3BzLmd1cHB5Q29uZmlnLnR5cGVdO1xuICAgICAgY29uc3QgdG90YWxDb3VudCA9IHJlcy5kYXRhLl9hZ2dyZWdhdGlvblt0aGlzLnByb3BzLmd1cHB5Q29uZmlnLnR5cGVdLl90b3RhbENvdW50O1xuICAgICAgaWYgKHVwZGF0ZURhdGFXaGVuUmVjZWl2ZSkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICByYXdEYXRhOiBwYXJzZWREYXRhLFxuICAgICAgICAgIHRvdGFsQ291bnQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5zZXRTdGF0ZSh7IGdldHRpbmdEYXRhRnJvbUd1cHB5OiBmYWxzZSB9KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IHBhcnNlZERhdGEsXG4gICAgICAgIHRvdGFsQ291bnQsXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgcmVuZGVyKCkge1xuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICB7XG4gICAgICAgICAgUmVhY3QuQ2hpbGRyZW4ubWFwKHRoaXMucHJvcHMuY2hpbGRyZW4sIChjaGlsZCkgPT4gUmVhY3QuY2xvbmVFbGVtZW50KGNoaWxkLCB7XG4gICAgICAgICAgICAvLyBwYXNzIGRhdGEgdG8gY2hpbGRyZW5cbiAgICAgICAgICAgIGFnZ3NEYXRhOiB0aGlzLnN0YXRlLmFnZ3NEYXRhLFxuICAgICAgICAgICAgYWdnc0RhdGFJc0xvYWRpbmc6IHRoaXMuc3RhdGUuZ2V0dGluZ0RhdGFGcm9tR3VwcHksXG4gICAgICAgICAgICBmaWx0ZXI6IHRoaXMuc3RhdGUuZmlsdGVyLFxuICAgICAgICAgICAgZmlsdGVyQ29uZmlnOiB0aGlzLnByb3BzLmZpbHRlckNvbmZpZyxcbiAgICAgICAgICAgIHJhd0RhdGE6IHRoaXMuc3RhdGUucmF3RGF0YSwgLy8gcmF3IGRhdGEgKHdpdGggY3VycmVudCBmaWx0ZXIgYXBwbGllZClcbiAgICAgICAgICAgIHRvdGFsQ291bnQ6IHRoaXMuc3RhdGUudG90YWxDb3VudCwgLy8gdG90YWwgY291bnQgb2YgcmF3IGRhdGEgKGN1cnJlbnQgZmlsdGVyIGFwcGxpZWQpXG4gICAgICAgICAgICBmZXRjaEFuZFVwZGF0ZVJhd0RhdGE6IHRoaXMuaGFuZGxlRmV0Y2hBbmRVcGRhdGVSYXdEYXRhLmJpbmQodGhpcyksXG4gICAgICAgICAgICBkb3dubG9hZFJhd0RhdGE6IHRoaXMuaGFuZGxlRG93bmxvYWRSYXdEYXRhLmJpbmQodGhpcyksXG4gICAgICAgICAgICBkb3dubG9hZFJhd0RhdGFCeUZpZWxkczogdGhpcy5oYW5kbGVEb3dubG9hZFJhd0RhdGFCeUZpZWxkcy5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgYWxsUmVndWxhckFnZ0ZpZWxkczogdGhpcy5zdGF0ZS5hbGxSZWd1bGFyQWdnRmllbGRzLFxuICAgICAgICAgICAgYWxsQXNUZXh0QWdnRmllbGRzOiB0aGlzLnN0YXRlLmFsbEFzVGV4dEFnZ0ZpZWxkcyxcbiAgICAgICAgICAgIGFjY2Vzc2libGVGaWVsZE9iamVjdDogdGhpcy5zdGF0ZS5hY2Nlc3NpYmxlRmllbGRPYmplY3QsXG4gICAgICAgICAgICB1bmFjY2Vzc2libGVGaWVsZE9iamVjdDogdGhpcy5zdGF0ZS51bmFjY2Vzc2libGVGaWVsZE9iamVjdCxcblxuICAgICAgICAgICAgLy8gYSBjYWxsYmFjayBmdW5jdGlvbiB3aGljaCByZXR1cm4gdG90YWwgY291bnRzIGZvciBhbnkgdHlwZSwgd2l0aCBhbnkgZmlsdGVyXG4gICAgICAgICAgICBnZXRUb3RhbENvdW50c0J5VHlwZUFuZEZpbHRlcjogdGhpcy5oYW5kbGVBc2tHdXBweUZvclRvdGFsQ291bnRzLmJpbmQodGhpcyksXG4gICAgICAgICAgICBkb3dubG9hZFJhd0RhdGFCeVR5cGVBbmRGaWx0ZXI6IHRoaXMuaGFuZGxlRG93bmxvYWRSYXdEYXRhQnlUeXBlQW5kRmlsdGVyLmJpbmQodGhpcyksXG5cbiAgICAgICAgICAgIC8vIGJlbG93IGFyZSBqdXN0IGZvciBDb25uZWN0ZWRGaWx0ZXIgY29tcG9uZW50XG4gICAgICAgICAgICBvblJlY2VpdmVOZXdBZ2dzRGF0YTogdGhpcy5oYW5kbGVSZWNlaXZlTmV3QWdnc0RhdGEuYmluZCh0aGlzKSxcbiAgICAgICAgICAgIG9uRmlsdGVyQ2hhbmdlOiB0aGlzLmhhbmRsZUZpbHRlckNoYW5nZS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgZ3VwcHlDb25maWc6IHRoaXMucHJvcHMuZ3VwcHlDb25maWcsXG4gICAgICAgICAgICBvblVwZGF0ZUFjY2Vzc0xldmVsOiB0aGlzLmhhbmRsZUFjY2Vzc0xldmVsVXBkYXRlLmJpbmQodGhpcyksXG4gICAgICAgICAgICBhZG1pbkFwcGxpZWRQcmVGaWx0ZXJzOiB0aGlzLnByb3BzLmFkbWluQXBwbGllZFByZUZpbHRlcnMsXG4gICAgICAgICAgICBhY2Nlc3NpYmxlRmllbGRDaGVja0xpc3Q6IHRoaXMucHJvcHMuYWNjZXNzaWJsZUZpZWxkQ2hlY2tMaXN0LFxuICAgICAgICAgICAgY3NyZlRva2VuOiB0aGlzLnByb3BzLmNzcmZUb2tlbixcbiAgICAgICAgICB9KSlcbiAgICAgICAgfVxuICAgICAgPC8+XG4gICAgKTtcbiAgfVxufVxuXG5HdXBweVdyYXBwZXIucHJvcFR5cGVzID0ge1xuICBndXBweUNvbmZpZzogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICBwYXRoOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIHR5cGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgbWFpbkZpZWxkOiBQcm9wVHlwZXMuc3RyaW5nLFxuICAgIG1haW5GaWVsZElzTnVtZXJpYzogUHJvcFR5cGVzLmJvb2wsXG4gICAgYWdnRmllbGRzOiBQcm9wVHlwZXMuYXJyYXksXG4gIH0pLmlzUmVxdWlyZWQsXG4gIGNoaWxkcmVuOiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMubm9kZSksXG4gICAgUHJvcFR5cGVzLm5vZGUsXG4gIF0pLmlzUmVxdWlyZWQsXG4gIGZpbHRlckNvbmZpZzogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICB0YWJzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc2hhcGUoe1xuICAgICAgdGl0bGU6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICBmaWVsZHM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zdHJpbmcpLFxuICAgICAgc2VhcmNoRmllbGRzOiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcbiAgICB9KSksXG4gIH0pLmlzUmVxdWlyZWQsXG4gIHJhd0RhdGFGaWVsZHM6IFByb3BUeXBlcy5hcnJheU9mKFByb3BUeXBlcy5zdHJpbmcpLFxuICBvblJlY2VpdmVOZXdBZ2dzRGF0YTogUHJvcFR5cGVzLmZ1bmMsXG4gIG9uRmlsdGVyQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgYWNjZXNzaWJsZUZpZWxkQ2hlY2tMaXN0OiBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKSxcbiAgYWRtaW5BcHBsaWVkUHJlRmlsdGVyczogUHJvcFR5cGVzLm9iamVjdCxcbiAgaW5pdGlhbEZpbHRlckZyb21VUkw6IFByb3BUeXBlcy5vYmplY3QsXG4gIGNzcmZUb2tlbjogUHJvcFR5cGVzLnN0cmluZyxcbn07XG5cbkd1cHB5V3JhcHBlci5kZWZhdWx0UHJvcHMgPSB7XG4gIG9uUmVjZWl2ZU5ld0FnZ3NEYXRhOiAoKSA9PiB7fSxcbiAgb25GaWx0ZXJDaGFuZ2U6ICgpID0+IHt9LFxuICByYXdEYXRhRmllbGRzOiBbXSxcbiAgYWNjZXNzaWJsZUZpZWxkQ2hlY2tMaXN0OiB1bmRlZmluZWQsXG4gIGFkbWluQXBwbGllZFByZUZpbHRlcnM6IHt9LFxuICBpbml0aWFsRmlsdGVyRnJvbVVSTDoge30sXG4gIGNzcmZUb2tlbjogJycsXG59O1xuXG5leHBvcnQgZGVmYXVsdCBHdXBweVdyYXBwZXI7XG4iXSwibWFwcGluZ3MiOiI7O0FBRUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsVUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsUUFBQSxHQUFBRixPQUFBOzs7Ozs7OztBQVFBLElBQUFHLE1BQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFFBQUEsR0FBQUosT0FBQSxxQkFBZ0QsU0FBQUQsdUJBQUFNLENBQUEsVUFBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxnQkFBQUEsQ0FBQSxhQUFBRSxRQUFBRixDQUFBLEVBQUFHLENBQUEsT0FBQUMsQ0FBQSxHQUFBQyxNQUFBLENBQUFDLElBQUEsQ0FBQU4sQ0FBQSxNQUFBSyxNQUFBLENBQUFFLHFCQUFBLE9BQUFDLENBQUEsR0FBQUgsTUFBQSxDQUFBRSxxQkFBQSxDQUFBUCxDQUFBLEVBQUFHLENBQUEs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