"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.transferSlashStyleToDashStyle = exports.processNestedFieldNames = exports.isWhitelisted = exports.fromFieldsToSource = exports.firstLetterUpperCase = exports.filterFieldMapping = exports.buildNestedFieldMapping = exports.buildNestedField = exports.addTwoFilters = void 0;var _config = _interopRequireDefault(require("../config"));
var _logger = _interopRequireDefault(require("../logger"));function _interopRequireDefault(e) {return e && e.__esModule ? e : { default: e };}

const firstLetterUpperCase = (str) => str.charAt(0).toUpperCase() + str.slice(1);

/**
 * transfer '/programs/DEV/projects/test' to 'DEV-test'
 */exports.firstLetterUpperCase = firstLetterUpperCase;
const transferSlashStyleToDashStyle = (str) => {
  const reg = /^\/programs\/(.*)\/projects\/(.*)$/;
  const matchResult = str.match(reg);
  if (!matchResult) return null;
  if (matchResult.length !== 3 || matchResult[0] !== str) return null;
  const programName = matchResult[1];
  const projectName = matchResult[2];
  return `${programName}-${projectName}`;
};exports.transferSlashStyleToDashStyle = transferSlashStyleToDashStyle;

const addTwoFilters = (filter1, filter2) => {
  if (!filter1 && !filter2) return {};
  if (!filter1) return filter2;
  if (!filter2) return filter1;
  const appliedFilter = {
    AND: [
    filter1,
    filter2]

  };
  return appliedFilter;
};exports.addTwoFilters = addTwoFilters;

const isWhitelisted = (key) => {
  const lowerCasedWhitelist = _config.default.encryptWhitelist.map((w) => {
    if (typeof w === 'string') {
      return w.toLowerCase();
    }
    return w;
  });
  const lowerCasedKey = typeof key === 'string' ? key.toLowerCase() : key;
  return lowerCasedWhitelist.includes(lowerCasedKey);
};

/**
 * Convert from fields of graphql query produced by graphql library to list of querying fields
 * This list will be put to _source fields of the ES query
 * @param parsedInfo: parsing information from graphql library
 * @returns: list of selected fields.
 */exports.isWhitelisted = isWhitelisted;
const fromFieldsToSource = (parsedInfo) => {
  let stack = Object.values(parsedInfo.fieldsByTypeName[firstLetterUpperCase(parsedInfo.name)]);
  const levels = { 0: stack.length };
  const fields = [];
  let curNodeName = '';
  let currentLevel = 0;

  while (stack.length > 0) {
    if (levels[currentLevel] === 0) {
      currentLevel -= 1;
      const lastPeriod = curNodeName.lastIndexOf('.');
      curNodeName = curNodeName.slice(0, lastPeriod !== -1 ? lastPeriod : 0);
    } else {
      const cur = stack.pop();
      const newTypeName = cur.name;
      const fieldName = [curNodeName, newTypeName].filter((s) => s.length > 0).join('.');
      if (newTypeName in cur.fieldsByTypeName) {
        const children = Object.values(cur.fieldsByTypeName[newTypeName]);
        curNodeName = fieldName;
        levels[currentLevel] -= 1;
        currentLevel += 1;
        levels[currentLevel] = children.length;
        stack = stack.concat(children);
      } else {
        fields.push(fieldName);
        levels[currentLevel] -= 1;
      }
    }
  }
  return fields;
};exports.fromFieldsToSource = fromFieldsToSource;

const buildNestedField = (key, value) => {
  let builtObj = {};
  if (value.type === 'nested') {
    const nestedProps = [];
    Object.keys(value.properties).forEach((propsKey) => {
      nestedProps.push(buildNestedField(propsKey, value.properties[propsKey]));
    });
    builtObj = {
      name: key,
      type: value.type,
      nestedProps
    };
  } else {
    builtObj = {
      name: key,
      type: value.type
    };
  }
  return builtObj;
};

/**
 * This function takes a nested field object and parses names of each field
 * by concatenating `.` to parent and child field names recursively.
 * The returned object is a nested array, which will be deeply flattened later.
 * @param field: a nested field object (with `nestedProps`)
 */exports.buildNestedField = buildNestedField;
const processNestedFieldNames = (field) => {
  const resultArray = [];
  field.nestedProps.forEach((prop) => {
    if (prop.nestedProps) {
      const newField = { ...prop };
      newField.name = `${field.name}.${prop.name}`;
      resultArray.push(processNestedFieldNames(newField));
    } else {
      resultArray.push(`${field.name}.${prop.name}`);
    }
  });
  return resultArray;
};exports.processNestedFieldNames = processNestedFieldNames;

const buildNestedFieldMapping = (field, parent) => {
  if (!field.nestedProps) {
    return parent ? `${parent}.${field.name}` : field.name;
  }
  const newParent = parent ? `${parent}.${field.name}` : field.name;
  const resultArray = field.nestedProps.map((nestedFields) => buildNestedFieldMapping(
    nestedFields,
    newParent
  ));
  return resultArray;
};exports.buildNestedFieldMapping = buildNestedFieldMapping;

const filterFieldMapping = (fieldArray) => (parent, args) => {
  const { searchInput } = args;
  const regEx = new RegExp(searchInput);
  _logger.default.debug('utils [filterFieldMapping] searchInput', searchInput);
  const resultArray = fieldArray.filter((field) => regEx.test(field));
  return resultArray;
};exports.filterFieldMapping = filterFieldMapping;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY29uZmlnIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbG9nZ2VyIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwiZmlyc3RMZXR0ZXJVcHBlckNhc2UiLCJzdHIiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiZXhwb3J0cyIsInRyYW5zZmVyU2xhc2hTdHlsZVRvRGFzaFN0eWxlIiwicmVnIiwibWF0Y2hSZXN1bHQiLCJtYXRjaCIsImxlbmd0aCIsInByb2dyYW1OYW1lIiwicHJvamVjdE5hbWUiLCJhZGRUd29GaWx0ZXJzIiwiZmlsdGVyMSIsImZpbHRlcjIiLCJhcHBsaWVkRmlsdGVyIiwiQU5EIiwiaXNXaGl0ZWxpc3RlZCIsImtleSIsImxvd2VyQ2FzZWRXaGl0ZWxpc3QiLCJjb25maWciLCJlbmNyeXB0V2hpdGVsaXN0IiwibWFwIiwidyIsInRvTG93ZXJDYXNlIiwibG93ZXJDYXNlZEtleSIsImluY2x1ZGVzIiwiZnJvbUZpZWxkc1RvU291cmNlIiwicGFyc2VkSW5mbyIsInN0YWNrIiwiT2JqZWN0IiwidmFsdWVzIiwiZmllbGRzQnlUeXBlTmFtZSIsIm5hbWUiLCJsZXZlbHMiLCJmaWVsZHMiLCJjdXJOb2RlTmFtZSIsImN1cnJlbnRMZXZlbCIsImxhc3RQZXJpb2QiLCJsYXN0SW5kZXhPZiIsImN1ciIsInBvcCIsIm5ld1R5cGVOYW1lIiwiZmllbGROYW1lIiwiZmlsdGVyIiwicyIsImpvaW4iLCJjaGlsZHJlbiIsImNvbmNhdCIsInB1c2giLCJidWlsZE5lc3RlZEZpZWxkIiwidmFsdWUiLCJidWlsdE9iaiIsInR5cGUiLCJuZXN0ZWRQcm9wcyIsImtleXMiLCJwcm9wZXJ0aWVzIiwiZm9yRWFjaCIsInByb3BzS2V5IiwicHJvY2Vzc05lc3RlZEZpZWxkTmFtZXMiLCJmaWVsZCIsInJlc3VsdEFycmF5IiwicHJvcCIsIm5ld0ZpZWxkIiwiYnVpbGROZXN0ZWRGaWVsZE1hcHBpbmciLCJwYXJlbnQiLCJuZXdQYXJlbnQiLCJuZXN0ZWRGaWVsZHMiLCJmaWx0ZXJGaWVsZE1hcHBpbmciLCJmaWVsZEFycmF5IiwiYXJncyIsInNlYXJjaElucHV0IiwicmVnRXgiLCJSZWdFeHAiLCJsb2ciLCJkZWJ1ZyIsInRlc3QiXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2VydmVyL3V0aWxzL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnJztcbmltcG9ydCBsb2cgZnJvbSAnLi4vbG9nZ2VyJztcblxuZXhwb3J0IGNvbnN0IGZpcnN0TGV0dGVyVXBwZXJDYXNlID0gKHN0cikgPT4gc3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgc3RyLnNsaWNlKDEpO1xuXG4vKipcbiAqIHRyYW5zZmVyICcvcHJvZ3JhbXMvREVWL3Byb2plY3RzL3Rlc3QnIHRvICdERVYtdGVzdCdcbiAqL1xuZXhwb3J0IGNvbnN0IHRyYW5zZmVyU2xhc2hTdHlsZVRvRGFzaFN0eWxlID0gKHN0cikgPT4ge1xuICBjb25zdCByZWcgPSAvXlxcL3Byb2dyYW1zXFwvKC4qKVxcL3Byb2plY3RzXFwvKC4qKSQvO1xuICBjb25zdCBtYXRjaFJlc3VsdCA9IHN0ci5tYXRjaChyZWcpO1xuICBpZiAoIW1hdGNoUmVzdWx0KSByZXR1cm4gbnVsbDtcbiAgaWYgKG1hdGNoUmVzdWx0Lmxlbmd0aCAhPT0gMyB8fCBtYXRjaFJlc3VsdFswXSAhPT0gc3RyKSByZXR1cm4gbnVsbDtcbiAgY29uc3QgcHJvZ3JhbU5hbWUgPSBtYXRjaFJlc3VsdFsxXTtcbiAgY29uc3QgcHJvamVjdE5hbWUgPSBtYXRjaFJlc3VsdFsyXTtcbiAgcmV0dXJuIGAke3Byb2dyYW1OYW1lfS0ke3Byb2plY3ROYW1lfWA7XG59O1xuXG5leHBvcnQgY29uc3QgYWRkVHdvRmlsdGVycyA9IChmaWx0ZXIxLCBmaWx0ZXIyKSA9PiB7XG4gIGlmICghZmlsdGVyMSAmJiAhZmlsdGVyMikgcmV0dXJuIHt9O1xuICBpZiAoIWZpbHRlcjEpIHJldHVybiBmaWx0ZXIyO1xuICBpZiAoIWZpbHRlcjIpIHJldHVybiBmaWx0ZXIxO1xuICBjb25zdCBhcHBsaWVkRmlsdGVyID0ge1xuICAgIEFORDogW1xuICAgICAgZmlsdGVyMSxcbiAgICAgIGZpbHRlcjIsXG4gICAgXSxcbiAgfTtcbiAgcmV0dXJuIGFwcGxpZWRGaWx0ZXI7XG59O1xuXG5leHBvcnQgY29uc3QgaXNXaGl0ZWxpc3RlZCA9IChrZXkpID0+IHtcbiAgY29uc3QgbG93ZXJDYXNlZFdoaXRlbGlzdCA9IGNvbmZpZy5lbmNyeXB0V2hpdGVsaXN0Lm1hcCgodykgPT4ge1xuICAgIGlmICh0eXBlb2YgdyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiB3LnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIHJldHVybiB3O1xuICB9KTtcbiAgY29uc3QgbG93ZXJDYXNlZEtleSA9ICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykgPyBrZXkudG9Mb3dlckNhc2UoKSA6IGtleTtcbiAgcmV0dXJuIGxvd2VyQ2FzZWRXaGl0ZWxpc3QuaW5jbHVkZXMobG93ZXJDYXNlZEtleSk7XG59O1xuXG4vKipcbiAqIENvbnZlcnQgZnJvbSBmaWVsZHMgb2YgZ3JhcGhxbCBxdWVyeSBwcm9kdWNlZCBieSBncmFwaHFsIGxpYnJhcnkgdG8gbGlzdCBvZiBxdWVyeWluZyBmaWVsZHNcbiAqIFRoaXMgbGlzdCB3aWxsIGJlIHB1dCB0byBfc291cmNlIGZpZWxkcyBvZiB0aGUgRVMgcXVlcnlcbiAqIEBwYXJhbSBwYXJzZWRJbmZvOiBwYXJzaW5nIGluZm9ybWF0aW9uIGZyb20gZ3JhcGhxbCBsaWJyYXJ5XG4gKiBAcmV0dXJuczogbGlzdCBvZiBzZWxlY3RlZCBmaWVsZHMuXG4gKi9cbmV4cG9ydCBjb25zdCBmcm9tRmllbGRzVG9Tb3VyY2UgPSAocGFyc2VkSW5mbykgPT4ge1xuICBsZXQgc3RhY2sgPSBPYmplY3QudmFsdWVzKHBhcnNlZEluZm8uZmllbGRzQnlUeXBlTmFtZVtmaXJzdExldHRlclVwcGVyQ2FzZShwYXJzZWRJbmZvLm5hbWUpXSk7XG4gIGNvbnN0IGxldmVscyA9IHsgMDogc3RhY2subGVuZ3RoIH07XG4gIGNvbnN0IGZpZWxkcyA9IFtdO1xuICBsZXQgY3VyTm9kZU5hbWUgPSAnJztcbiAgbGV0IGN1cnJlbnRMZXZlbCA9IDA7XG5cbiAgd2hpbGUgKHN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICBpZiAobGV2ZWxzW2N1cnJlbnRMZXZlbF0gPT09IDApIHtcbiAgICAgIGN1cnJlbnRMZXZlbCAtPSAxO1xuICAgICAgY29uc3QgbGFzdFBlcmlvZCA9IGN1ck5vZGVOYW1lLmxhc3RJbmRleE9mKCcuJyk7XG4gICAgICBjdXJOb2RlTmFtZSA9IGN1ck5vZGVOYW1lLnNsaWNlKDAsIChsYXN0UGVyaW9kICE9PSAtMSkgPyBsYXN0UGVyaW9kIDogMCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGN1ciA9IHN0YWNrLnBvcCgpO1xuICAgICAgY29uc3QgbmV3VHlwZU5hbWUgPSBjdXIubmFtZTtcbiAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IFtjdXJOb2RlTmFtZSwgbmV3VHlwZU5hbWVdLmZpbHRlcigocykgPT4gcy5sZW5ndGggPiAwKS5qb2luKCcuJyk7XG4gICAgICBpZiAobmV3VHlwZU5hbWUgaW4gY3VyLmZpZWxkc0J5VHlwZU5hbWUpIHtcbiAgICAgICAgY29uc3QgY2hpbGRyZW4gPSBPYmplY3QudmFsdWVzKGN1ci5maWVsZHNCeVR5cGVOYW1lW25ld1R5cGVOYW1lXSk7XG4gICAgICAgIGN1ck5vZGVOYW1lID0gZmllbGROYW1lO1xuICAgICAgICBsZXZlbHNbY3VycmVudExldmVsXSAtPSAxO1xuICAgICAgICBjdXJyZW50TGV2ZWwgKz0gMTtcbiAgICAgICAgbGV2ZWxzW2N1cnJlbnRMZXZlbF0gPSBjaGlsZHJlbi5sZW5ndGg7XG4gICAgICAgIHN0YWNrID0gc3RhY2suY29uY2F0KGNoaWxkcmVuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZpZWxkcy5wdXNoKGZpZWxkTmFtZSk7XG4gICAgICAgIGxldmVsc1tjdXJyZW50TGV2ZWxdIC09IDE7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBmaWVsZHM7XG59O1xuXG5leHBvcnQgY29uc3QgYnVpbGROZXN0ZWRGaWVsZCA9IChrZXksIHZhbHVlKSA9PiB7XG4gIGxldCBidWlsdE9iaiA9IHt9O1xuICBpZiAodmFsdWUudHlwZSA9PT0gJ25lc3RlZCcpIHtcbiAgICBjb25zdCBuZXN0ZWRQcm9wcyA9IFtdO1xuICAgIE9iamVjdC5rZXlzKHZhbHVlLnByb3BlcnRpZXMpLmZvckVhY2goKHByb3BzS2V5KSA9PiB7XG4gICAgICBuZXN0ZWRQcm9wcy5wdXNoKGJ1aWxkTmVzdGVkRmllbGQocHJvcHNLZXksIHZhbHVlLnByb3BlcnRpZXNbcHJvcHNLZXldKSk7XG4gICAgfSk7XG4gICAgYnVpbHRPYmogPSB7XG4gICAgICBuYW1lOiBrZXksXG4gICAgICB0eXBlOiB2YWx1ZS50eXBlLFxuICAgICAgbmVzdGVkUHJvcHMsXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBidWlsdE9iaiA9IHtcbiAgICAgIG5hbWU6IGtleSxcbiAgICAgIHR5cGU6IHZhbHVlLnR5cGUsXG4gICAgfTtcbiAgfVxuICByZXR1cm4gYnVpbHRPYmo7XG59O1xuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gdGFrZXMgYSBuZXN0ZWQgZmllbGQgb2JqZWN0IGFuZCBwYXJzZXMgbmFtZXMgb2YgZWFjaCBmaWVsZFxuICogYnkgY29uY2F0ZW5hdGluZyBgLmAgdG8gcGFyZW50IGFuZCBjaGlsZCBmaWVsZCBuYW1lcyByZWN1cnNpdmVseS5cbiAqIFRoZSByZXR1cm5lZCBvYmplY3QgaXMgYSBuZXN0ZWQgYXJyYXksIHdoaWNoIHdpbGwgYmUgZGVlcGx5IGZsYXR0ZW5lZCBsYXRlci5cbiAqIEBwYXJhbSBmaWVsZDogYSBuZXN0ZWQgZmllbGQgb2JqZWN0ICh3aXRoIGBuZXN0ZWRQcm9wc2ApXG4gKi9cbmV4cG9ydCBjb25zdCBwcm9jZXNzTmVzdGVkRmllbGROYW1lcyA9IChmaWVsZCkgPT4ge1xuICBjb25zdCByZXN1bHRBcnJheSA9IFtdO1xuICBmaWVsZC5uZXN0ZWRQcm9wcy5mb3JFYWNoKChwcm9wKSA9PiB7XG4gICAgaWYgKHByb3AubmVzdGVkUHJvcHMpIHtcbiAgICAgIGNvbnN0IG5ld0ZpZWxkID0geyAuLi5wcm9wIH07XG4gICAgICBuZXdGaWVsZC5uYW1lID0gYCR7ZmllbGQubmFtZX0uJHtwcm9wLm5hbWV9YDtcbiAgICAgIHJlc3VsdEFycmF5LnB1c2gocHJvY2Vzc05lc3RlZEZpZWxkTmFtZXMobmV3RmllbGQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0QXJyYXkucHVzaChgJHtmaWVsZC5uYW1lfS4ke3Byb3AubmFtZX1gKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0QXJyYXk7XG59O1xuXG5leHBvcnQgY29uc3QgYnVpbGROZXN0ZWRGaWVsZE1hcHBpbmcgPSAoZmllbGQsIHBhcmVudCkgPT4ge1xuICBpZiAoIWZpZWxkLm5lc3RlZFByb3BzKSB7XG4gICAgcmV0dXJuIChwYXJlbnQpID8gYCR7cGFyZW50fS4ke2ZpZWxkLm5hbWV9YCA6IGZpZWxkLm5hbWU7XG4gIH1cbiAgY29uc3QgbmV3UGFyZW50ID0gKHBhcmVudCkgPyBgJHtwYXJlbnR9LiR7ZmllbGQubmFtZX1gIDogZmllbGQubmFtZTtcbiAgY29uc3QgcmVzdWx0QXJyYXkgPSBmaWVsZC5uZXN0ZWRQcm9wcy5tYXAoKG5lc3RlZEZpZWxkcykgPT4gYnVpbGROZXN0ZWRGaWVsZE1hcHBpbmcoXG4gICAgbmVzdGVkRmllbGRzLFxuICAgIG5ld1BhcmVudCxcbiAgKSk7XG4gIHJldHVybiByZXN1bHRBcnJheTtcbn07XG5cbmV4cG9ydCBjb25zdCBmaWx0ZXJGaWVsZE1hcHBpbmcgPSAoZmllbGRBcnJheSkgPT4gKHBhcmVudCwgYXJncykgPT4ge1xuICBjb25zdCB7IHNlYXJjaElucHV0IH0gPSBhcmdzO1xuICBjb25zdCByZWdFeCA9IG5ldyBSZWdFeHAoc2VhcmNoSW5wdXQpO1xuICBsb2cuZGVidWcoJ3V0aWxzIFtmaWx0ZXJGaWVsZE1hcHBpbmddIHNlYXJjaElucHV0Jywgc2VhcmNoSW5wdXQpO1xuICBjb25zdCByZXN1bHRBcnJheSA9IGZpZWxkQXJyYXkuZmlsdGVyKChmaWVsZCkgPT4gcmVnRXgudGVzdChmaWVsZCkpO1xuICByZXR1cm4gcmVzdWx0QXJyYXk7XG59O1xuIl0sIm1hcHBpbmdzIjoia1dBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBLGVBQTRCLFNBQUFELHVCQUFBRyxDQUFBLFVBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBOztBQUVyQixNQUFNRyxvQkFBb0IsR0FBR0EsQ0FBQ0MsR0FBRyxLQUFLQSxHQUFHLENBQUNDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsV0FBVyxDQUFDLENBQUMsR0FBR0YsR0FBRyxDQUFDRyxLQUFLLENBQUMsQ0FBQyxDQUFDOztBQUV2RjtBQUNBO0FBQ0EsR0FGQUMsT0FBQSxDQUFBTCxvQkFBQSxHQUFBQSxvQkFBQTtBQUdPLE1BQU1NLDZCQUE2QixHQUFHQSxDQUFDTCxHQUFHLEtBQUs7RUFDcEQsTUFBTU0sR0FBRyxHQUFHLG9DQUFvQztFQUNoRCxNQUFNQyxXQUFXLEdBQUdQLEdBQUcsQ0FBQ1EsS0FBSyxDQUFDRixHQUFHLENBQUM7RUFDbEMsSUFBSSxDQUFDQyxXQUFXLEVBQUUsT0FBTyxJQUFJO0VBQzdCLElBQUlBLFdBQVcsQ0FBQ0UsTUFBTSxLQUFLLENBQUMsSUFBSUYsV0FBVyxDQUFDLENBQUMsQ0FBQyxLQUFLUCxHQUFHLEVBQUUsT0FBTyxJQUFJO0VBQ25FLE1BQU1VLFdBQVcsR0FBR0gsV0FBVyxDQUFDLENBQUMsQ0FBQztFQUNsQyxNQUFNSSxXQUFXLEdBQUdKLFdBQVcsQ0FBQyxDQUFDLENB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