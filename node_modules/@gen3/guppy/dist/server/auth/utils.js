"use strict";Object.defineProperty(exports, "__esModule", { value: true });exports.resourcePathsWithServiceMethodCombination = exports.getRequestResourceListFromFilter = exports.getAccessibleResourcesFromArboristasync = exports.checkIfUserCanRefreshServer = exports.buildFilterWithResourceList = void 0;var _lodash = _interopRequireDefault(require("lodash"));
var _logger = _interopRequireDefault(require("../logger"));
var _aggs = require("../es/aggs");
var _index = _interopRequireDefault(require("../es/index"));
var _arboristClient = _interopRequireDefault(require("./arboristClient"));
var _error = _interopRequireDefault(require("../utils/error"));
var _config = _interopRequireDefault(require("../config"));function _interopRequireDefault(e) {return e && e.__esModule ? e : { default: e };}

const resourcePathsWithServiceMethodCombination = (userAuthMapping, services, methods = {}) => {
  const data = {
    resources: []
  };
  Object.keys(userAuthMapping).forEach((key) => {
    // logic: you have access to a project if you have
    // access to any of the combinations made by the method and service lists
    if (userAuthMapping[key] && userAuthMapping[key].some((x) =>
    methods.includes(x.method) &&
    services.includes(x.service)
    )) {
      data.resources.push(key);
    }
  });
  return data;
};exports.resourcePathsWithServiceMethodCombination = resourcePathsWithServiceMethodCombination;

const getAccessibleResourcesFromArboristasync = async (jwt) => {
  let data;
  if (_config.default.internalLocalTest) {
    data = {
      resources: [// these are just for testing
      '/programs/DEV/projects/test',
      '/programs/jnkns/projects/jenkins']

    };
  } else {
    data = await _arboristClient.default.listAuthMapping(jwt);
  }

  _logger.default.debug('[authMiddleware] list resources: ', JSON.stringify(data, null, 4));
  if (data && data.error) {
    // if user is not in arborist db, assume has no access to any
    if (data.error.code === 404) {
      return [];
    }
    throw new _error.default(data.error.code, data.error.message);
  }

  const read = resourcePathsWithServiceMethodCombination(data, ['guppy', '*'], ['read', '*']);
  const readResources = read.resources ? _lodash.default.uniq(read.resources) : [];
  return [readResources, data];
};exports.getAccessibleResourcesFromArboristasync = getAccessibleResourcesFromArboristasync;

const checkIfUserCanRefreshServer = async (passedData) => {
  let data = passedData;
  if (_config.default.internalLocalTest) {
    data = {
      resources: [// these are just for testing
      '/programs/DEV/projects/test',
      '/programs/jnkns/projects/jenkins']

    };
  }

  _logger.default.debug('[authMiddleware] list resources: ', JSON.stringify(data, null, 4));
  if (data && data.error) {
    // if user is not in arborist db, assume has no access to any
    if (data.error.code === 404) {
      return false;
    }
    throw new _error.default(data.error.code, data.error.message);
  }
  const adminAccess = resourcePathsWithServiceMethodCombination(data, ['guppy'], ['admin_access', '*']);

  // Only guppy_admin resource path can control guppy admin access
  return adminAccess.resources ? adminAccess.resources.includes('/guppy_admin') : false;
};exports.checkIfUserCanRefreshServer = checkIfUserCanRefreshServer;

const getRequestResourceListFromFilter = async (
esIndex,
esType,
filter,
filterSelf) =>
(0, _aggs.textAggregation)(
  { esInstance: _index.default, esIndex, esType },
  { field: _config.default.esConfig.authFilterField, filter, filterSelf }
).then((res) => res.map((item) => item.key));exports.getRequestResourceListFromFilter = getRequestResourceListFromFilter;

const buildFilterWithResourceList = (resourceList = []) => {
  const filter = {
    IN: {
      [_config.default.esConfig.authFilterField]: [...resourceList]
    }
  };
  return filter;
};exports.buildFilterWithResourceList = buildFilterWithResourceList;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbG9kYXNoIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfbG9nZ2VyIiwiX2FnZ3MiLCJfaW5kZXgiLCJfYXJib3Jpc3RDbGllbnQiLCJfZXJyb3IiLCJfY29uZmlnIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwicmVzb3VyY2VQYXRoc1dpdGhTZXJ2aWNlTWV0aG9kQ29tYmluYXRpb24iLCJ1c2VyQXV0aE1hcHBpbmciLCJzZXJ2aWNlcyIsIm1ldGhvZHMiLCJkYXRhIiwicmVzb3VyY2VzIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJzb21lIiwieCIsImluY2x1ZGVzIiwibWV0aG9kIiwic2VydmljZSIsInB1c2giLCJleHBvcnRzIiwiZ2V0QWNjZXNzaWJsZVJlc291cmNlc0Zyb21BcmJvcmlzdGFzeW5jIiwiand0IiwiY29uZmlnIiwiaW50ZXJuYWxMb2NhbFRlc3QiLCJhcmJvcmlzdENsaWVudCIsImxpc3RBdXRoTWFwcGluZyIsImxvZyIsImRlYnVnIiwiSlNPTiIsInN0cmluZ2lmeSIsImVycm9yIiwiY29kZSIsIkNvZGVkRXJyb3IiLCJtZXNzYWdlIiwicmVhZCIsInJlYWRSZXNvdXJjZXMiLCJfIiwidW5pcSIsImNoZWNrSWZVc2VyQ2FuUmVmcmVzaFNlcnZlciIsInBhc3NlZERhdGEiLCJhZG1pbkFjY2VzcyIsImdldFJlcXVlc3RSZXNvdXJjZUxpc3RGcm9tRmlsdGVyIiwiZXNJbmRleCIsImVzVHlwZSIsImZpbHRlciIsImZpbHRlclNlbGYiLCJ0ZXh0QWdncmVnYXRpb24iLCJlc0luc3RhbmNlIiwiZmllbGQiLCJlc0NvbmZpZyIsImF1dGhGaWx0ZXJGaWVsZCIsInRoZW4iLCJyZXMiLCJtYXAiLCJpdGVtIiwiYnVpbGRGaWx0ZXJXaXRoUmVzb3VyY2VMaXN0IiwicmVzb3VyY2VMaXN0IiwiSU4iXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvc2VydmVyL2F1dGgvdXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBsb2cgZnJvbSAnLi4vbG9nZ2VyJztcbmltcG9ydCB7IHRleHRBZ2dyZWdhdGlvbiB9IGZyb20gJy4uL2VzL2FnZ3MnO1xuaW1wb3J0IGVzSW5zdGFuY2UgZnJvbSAnLi4vZXMvaW5kZXgnO1xuaW1wb3J0IGFyYm9yaXN0Q2xpZW50IGZyb20gJy4vYXJib3Jpc3RDbGllbnQnO1xuaW1wb3J0IENvZGVkRXJyb3IgZnJvbSAnLi4vdXRpbHMvZXJyb3InO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xuXG5leHBvcnQgY29uc3QgcmVzb3VyY2VQYXRoc1dpdGhTZXJ2aWNlTWV0aG9kQ29tYmluYXRpb24gPSAodXNlckF1dGhNYXBwaW5nLCBzZXJ2aWNlcywgbWV0aG9kcyA9IHt9KSA9PiB7XG4gIGNvbnN0IGRhdGEgPSB7XG4gICAgcmVzb3VyY2VzOiBbXSxcbiAgfTtcbiAgT2JqZWN0LmtleXModXNlckF1dGhNYXBwaW5nKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAvLyBsb2dpYzogeW91IGhhdmUgYWNjZXNzIHRvIGEgcHJvamVjdCBpZiB5b3UgaGF2ZVxuICAgIC8vIGFjY2VzcyB0byBhbnkgb2YgdGhlIGNvbWJpbmF0aW9ucyBtYWRlIGJ5IHRoZSBtZXRob2QgYW5kIHNlcnZpY2UgbGlzdHNcbiAgICBpZiAodXNlckF1dGhNYXBwaW5nW2tleV0gJiYgdXNlckF1dGhNYXBwaW5nW2tleV0uc29tZSgoeCkgPT4gKFxuICAgICAgbWV0aG9kcy5pbmNsdWRlcyh4Lm1ldGhvZClcbiAgICAgICYmIHNlcnZpY2VzLmluY2x1ZGVzKHguc2VydmljZSlcbiAgICApKSkge1xuICAgICAgZGF0YS5yZXNvdXJjZXMucHVzaChrZXkpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBkYXRhO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEFjY2Vzc2libGVSZXNvdXJjZXNGcm9tQXJib3Jpc3Rhc3luYyA9IGFzeW5jIChqd3QpID0+IHtcbiAgbGV0IGRhdGE7XG4gIGlmIChjb25maWcuaW50ZXJuYWxMb2NhbFRlc3QpIHtcbiAgICBkYXRhID0ge1xuICAgICAgcmVzb3VyY2VzOiBbIC8vIHRoZXNlIGFyZSBqdXN0IGZvciB0ZXN0aW5nXG4gICAgICAgICcvcHJvZ3JhbXMvREVWL3Byb2plY3RzL3Rlc3QnLFxuICAgICAgICAnL3Byb2dyYW1zL2pua25zL3Byb2plY3RzL2plbmtpbnMnLFxuICAgICAgXSxcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIGRhdGEgPSBhd2FpdCBhcmJvcmlzdENsaWVudC5saXN0QXV0aE1hcHBpbmcoand0KTtcbiAgfVxuXG4gIGxvZy5kZWJ1ZygnW2F1dGhNaWRkbGV3YXJlXSBsaXN0IHJlc291cmNlczogJywgSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgNCkpO1xuICBpZiAoZGF0YSAmJiBkYXRhLmVycm9yKSB7XG4gICAgLy8gaWYgdXNlciBpcyBub3QgaW4gYXJib3Jpc3QgZGIsIGFzc3VtZSBoYXMgbm8gYWNjZXNzIHRvIGFueVxuICAgIGlmIChkYXRhLmVycm9yLmNvZGUgPT09IDQwNCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgQ29kZWRFcnJvcihkYXRhLmVycm9yLmNvZGUsIGRhdGEuZXJyb3IubWVzc2FnZSk7XG4gIH1cblxuICBjb25zdCByZWFkID0gcmVzb3VyY2VQYXRoc1dpdGhTZXJ2aWNlTWV0aG9kQ29tYmluYXRpb24oZGF0YSwgWydndXBweScsICcqJ10sIFsncmVhZCcsICcqJ10pO1xuICBjb25zdCByZWFkUmVzb3VyY2VzID0gcmVhZC5yZXNvdXJjZXMgPyBfLnVuaXEocmVhZC5yZXNvdXJjZXMpIDogW107XG4gIHJldHVybiBbcmVhZFJlc291cmNlcywgZGF0YV07XG59O1xuXG5leHBvcnQgY29uc3QgY2hlY2tJZlVzZXJDYW5SZWZyZXNoU2VydmVyID0gYXN5bmMgKHBhc3NlZERhdGEpID0+IHtcbiAgbGV0IGRhdGEgPSBwYXNzZWREYXRhO1xuICBpZiAoY29uZmlnLmludGVybmFsTG9jYWxUZXN0KSB7XG4gICAgZGF0YSA9IHtcbiAgICAgIHJlc291cmNlczogWyAvLyB0aGVzZSBhcmUganVzdCBmb3IgdGVzdGluZ1xuICAgICAgICAnL3Byb2dyYW1zL0RFVi9wcm9qZWN0cy90ZXN0JyxcbiAgICAgICAgJy9wcm9ncmFtcy9qbmtucy9wcm9qZWN0cy9qZW5raW5zJyxcbiAgICAgIF0sXG4gICAgfTtcbiAgfVxuXG4gIGxvZy5kZWJ1ZygnW2F1dGhNaWRkbGV3YXJlXSBsaXN0IHJlc291cmNlczogJywgSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgNCkpO1xuICBpZiAoZGF0YSAmJiBkYXRhLmVycm9yKSB7XG4gICAgLy8gaWYgdXNlciBpcyBub3QgaW4gYXJib3Jpc3QgZGIsIGFzc3VtZSBoYXMgbm8gYWNjZXNzIHRvIGFueVxuICAgIGlmIChkYXRhLmVycm9yLmNvZGUgPT09IDQwNCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICB0aHJvdyBuZXcgQ29kZWRFcnJvcihkYXRhLmVycm9yLmNvZGUsIGRhdGEuZXJyb3IubWVzc2FnZSk7XG4gIH1cbiAgY29uc3QgYWRtaW5BY2Nlc3MgPSByZXNvdXJjZVBhdGhzV2l0aFNlcnZpY2VNZXRob2RDb21iaW5hdGlvbihkYXRhLCBbJ2d1cHB5J10sIFsnYWRtaW5fYWNjZXNzJywgJyonXSk7XG5cbiAgLy8gT25seSBndXBweV9hZG1pbiByZXNvdXJjZSBwYXRoIGNhbiBjb250cm9sIGd1cHB5IGFkbWluIGFjY2Vzc1xuICByZXR1cm4gYWRtaW5BY2Nlc3MucmVzb3VyY2VzID8gYWRtaW5BY2Nlc3MucmVzb3VyY2VzLmluY2x1ZGVzKCcvZ3VwcHlfYWRtaW4nKSA6IGZhbHNlO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFJlcXVlc3RSZXNvdXJjZUxpc3RGcm9tRmlsdGVyID0gYXN5bmMgKFxuICBlc0luZGV4LFxuICBlc1R5cGUsXG4gIGZpbHRlcixcbiAgZmlsdGVyU2VsZixcbikgPT4gdGV4dEFnZ3JlZ2F0aW9uKFxuICB7IGVzSW5zdGFuY2UsIGVzSW5kZXgsIGVzVHlwZSB9LFxuICB7IGZpZWxkOiBjb25maWcuZXNDb25maWcuYXV0aEZpbHRlckZpZWxkLCBmaWx0ZXIsIGZpbHRlclNlbGYgfSxcbikudGhlbigocmVzKSA9PiAocmVzLm1hcCgoaXRlbSkgPT4gaXRlbS5rZXkpKSk7XG5cbmV4cG9ydCBjb25zdCBidWlsZEZpbHRlcldpdGhSZXNvdXJjZUxpc3QgPSAocmVzb3VyY2VMaXN0ID0gW10pID0+IHtcbiAgY29uc3QgZmlsdGVyID0ge1xuICAgIElOOiB7XG4gICAgICBbY29uZmlnLmVzQ29uZmlnLmF1dGhGaWx0ZXJGaWVsZF06IFsuLi5yZXNvdXJjZUxpc3RdLFxuICAgIH0sXG4gIH07XG4gIHJldHVybiBmaWx0ZXI7XG59O1xuIl0sIm1hcHBpbmdzIjoiK1NBQUEsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsS0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBSixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUksZUFBQSxHQUFBTCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUssTUFBQSxHQUFBTixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQU0sT0FBQSxHQUFBUCxzQkFBQSxDQUFBQyxPQUFBLGVBQStCLFNBQUFELHVCQUFBUSxDQUFBLFVBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBOztBQUV4QixNQUFNRyx5Q0FBeUMsR0FBR0EsQ0FBQ0MsZUFBZSxFQUFFQyxRQUFRLEVBQUVDLE9BQU8sR0FBRyxDQUFDLENBQUMsS0FBSztFQUNwRyxNQUFNQyxJQUFJLEdBQUc7SUFDWEMsU0FBUyxFQUFFO0VBQ2IsQ0FBQztFQUNEQyxNQUFNLENBQUNDLElBQUksQ0FBQ04s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